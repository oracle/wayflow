


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>How to Build a Swarm of Agents &#8212; wayflowcore 26.1.0.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=dba54f56160742ef5599"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599" />

  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'core/howtoguides/howto_swarm';</script>
  <script src="../../_static/announcement.js"></script>

    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to Build a Manager-Workers of Agents" href="howto_managerworkers.html" />
    <link rel="prev" title="How to Build a Havingierarchical Multi-Agent System" href="howto_multiagent.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="26.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
    <img src="../../_static/logo-dark.svg" class="logo__image only-dark pst-js-only" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials &amp; Use Cases</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/basic_agent.html">Build a Simple Conversational Assistant with Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/basic_flow.html">Build a Simple Fixed-flow Assistant with Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/usecase_prbot.html">Build a Simple Code Review Assistant</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">How-to Guides</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="io_descriptors.html">Change Input and Output Descriptors of Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_async.html">Use Asynchronous APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="agents.html">Create a ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_imagecontent.html">How to Send Images to LLMs and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_prompttemplate.html">Use Templates for Advanced Prompting Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_userinputinflows.html">Ask for User Input in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="conditional_flows.html">Create Conditional Transitions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="promptexecutionstep.html">Do Structured LLM Generation in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_userconfirmation.html">Add User Confirmation to a Tool Call Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="catching_exceptions.html">Catch Exceptions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_mapstep.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_agents_in_flows.html">Use Agents in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_multiagent.html">Build a Hierarchical Multi-Agent System</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Build a Swarm of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_managerworkers.html">Build a ManagerWorkers of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_build_assistants_with_tools.html">Build Assistants with Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_multiple_output_tool.html">Create Tools with Multiple Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_a_tool_from_a_flow.html">Convert Flows to Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_mcp.html">Connect MCP tools to Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_remote_tool_expired_token.html">Do Remote API Calls with Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_execute_agentspec_with_wayflowcore.html">Load and Execute an Agent Spec Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_serdeser.html">Serialize and Deserialize Flows and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_serialize_conversations.html">Serialize and Deserialize Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing_ollama.html">Install and Use Ollama</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_tracing.html">Enable Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_datastores.html">Connect Assistants to Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="embeddingmodels_from_different_providers.html">Use Embedding Models from Different Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_evaluation.html">How to Evaluate WayFlow Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_conversation_evaluation.html">How to Evaluate Assistant Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_variable.html">Use Variables for Shared State in Flows</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/agentspec.html">Agent Spec Adapters</a></li>

<li class="toctree-l2"><a class="reference internal" href="../api/conversation.html">Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/flows.html">Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/embeddingmodels.html">Embedding Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/contextproviders.html">Context Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/interrupts.html">Execution Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prompttemplate.html">PromptTemplates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialization.html">Serialization/Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/datastores.html">Datastores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/warnings.html">Warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/evaluation.html">Evaluation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">For Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">WayFlow</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How-to Guides</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">How to Build a Swarm of Agents</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-build-a-swarm-of-agents">
<span id="top-howtoswarm"></span><h1>How to Build a Swarm of Agents<a class="headerlink" href="#how-to-build-a-swarm-of-agents" title="Permalink to this heading">#</a></h1>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
<a class="reference internal" href="../../_images/python-icon.svg"><img alt="python-icon" height="40px" src="../../_images/python-icon.svg" width="40px" /></a> Download Python Script</div>
<p class="sd-card-text">Python script/notebook for this guide.</p>
</div>
<a class="sd-stretched-link sd-hide-link-text reference external" href="../end_to_end_code_examples/howto_swarm.py"><span>Swarm how-to script</span></a></div>
</div>
</div>
</div>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites</p>
<p>This guide assumes familiarity with <a class="reference internal" href="../tutorials/basic_agent.html"><span class="doc">Agents</span></a>.</p>
</div>
<p>The Swarm pattern is a type of agentic pattern that takes inspiration from <a class="reference external" href="https://en.wikipedia.org/wiki/Swarm_intelligence">Swarm intelligence</a>.
It is often observed in biological systems such as ant colonies, bee hives, and bird flocks.
In this agentic pattern, each agent is assigned a specific responsibility and can delegate tasks to other specialized agents to improve overall performance.</p>
<p><strong>When to use the Swarm pattern?</strong></p>
<p>Compared to using a <a class="reference internal" href="howto_multiagent.html"><span class="doc">hierarchical multi-agent pattern</span></a>, the communication in <a class="reference internal" href="../api/agent.html#swarm"><span class="std std-ref">Swarm</span></a> pattern reduces the number of LLM calls
as showcased in the diagram below.</p>
<a class="reference internal image-reference" href="../../_images/hierarchical_vs_swarm.svg"><img alt="How the Swarm pattern compares to hierachical multi-agent pattern" class="align-center" height="357" src="../../_images/hierarchical_vs_swarm.svg" width="656" /></a>
<p>ㅤ</p>
<p>In the <strong>hierarchical pattern</strong>, a route User → Agent K → User will require:</p>
<ol class="arabic simple">
<li><p>All intermediate agent to call the correct sub-agent to go down to the Agent K.</p></li>
<li><p>The Agent K to generate its answer.</p></li>
<li><p>All intermediate agents to relay the answer back to the user.</p></li>
</ol>
<p>In the <strong>swarm pattern</strong>, a route User → Agent K → User will require:</p>
<ol class="arabic simple">
<li><p>The first agent to call or handoff the conversation the Agent K (provided that the developer allows the connection between the two agents).</p></li>
<li><p>The Agent K to generate its answer.</p></li>
<li><p>The first agent to relay the answer (only when NOT using handoff; with handoff the Agent K <strong>replaces</strong> the first agent and is thus directly communicating with the human user)</p></li>
</ol>
<hr class="docutils" />
<p>This guide presents an example of a simple Swarm of agents applied to a medical use case.</p>
<a class="reference internal image-reference" href="../../_images/swarm_example.svg"><img alt="Example of a Swarm agent pattern for medical application" class="align-center" height="323" src="../../_images/swarm_example.svg" width="584" /></a>
<p>This guide will walk you through the following steps:</p>
<ol class="arabic simple">
<li><p>Defining agents equipped with tools</p></li>
<li><p>Assembling a Swarm using the defined agents</p></li>
<li><p>Executing the Swarm of agents</p></li>
</ol>
<p>It also covers how to enable <code class="docutils literal notranslate"><span class="pre">handoff</span></code> when building the <code class="docutils literal notranslate"><span class="pre">Swarm</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Swarm</span></code> agentic pattern is currently in beta (e.g., it cannot yet be used in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).
Its API and behavior are not guaranteed to be stable and may evolve in future versions.</p>
</div>
<p>For more information about <code class="docutils literal notranslate"><span class="pre">Swarm</span></code> and other agentic patterns in WayFlow, contact the AgentSpec development team.</p>
<section id="basic-implementation">
<h2>Basic implementation<a class="headerlink" href="#basic-implementation" title="Permalink to this heading">#</a></h2>
<p>First import what is needed for this guide:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span><span class="p">,</span> <span class="n">AgentSpecLoader</span>
<span class="linenos">3</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos">4</span>    <span class="n">FinishedStatus</span><span class="p">,</span>
<span class="linenos">5</span>    <span class="n">UserMessageRequestStatus</span><span class="p">,</span>
<span class="linenos">6</span><span class="p">)</span>
<span class="linenos">7</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="linenos">8</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.swarm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Swarm</span>
<span class="linenos">9</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
</pre></div>
</div>
<p>To follow this guide, you will need access to a large language model (LLM).
WayFlow supports several LLM API providers.
Select an LLM from the options below:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">OCI GenAI</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">vLLM</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Ollama</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OCIGenAIModel</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">llm</span> <span class="o">=</span> <span class="n">OCIGenAIModel</span><span class="p">(</span>
        <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;provider.model-id&quot;</span><span class="p">,</span>
        <span class="n">service_endpoint</span><span class="o">=</span><span class="s2">&quot;https://url-to-service-endpoint.com&quot;</span><span class="p">,</span>
        <span class="n">compartment_id</span><span class="o">=</span><span class="s2">&quot;compartment-id&quot;</span><span class="p">,</span>
        <span class="n">auth_type</span><span class="o">=</span><span class="s2">&quot;API_KEY&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;VLLM_HOST_PORT&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OllamaModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">OllamaModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>In this section, you will define the agents that will later be used to build the Swarm of agents.</p>
<section id="creating-the-tools">
<h3>Creating the tools<a class="headerlink" href="#creating-the-tools" title="Permalink to this heading">#</a></h3>
<p>The Swarm in this example consists of three <a class="reference internal" href="../api/agent.html#agent"><span class="std std-ref">Agents</span></a>, each equipped with a single <a class="reference internal" href="../api/tools.html#tooldecorator"><span class="std std-ref">Tool</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># tools for doctor</span>
<span class="n">medical_knowledge</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;fever&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;flu&quot;</span><span class="p">,</span> <span class="s2">&quot;infection&quot;</span><span class="p">],</span>
    <span class="s2">&quot;runny nose&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cold&quot;</span><span class="p">,</span> <span class="s2">&quot;allergies&quot;</span><span class="p">],</span>
    <span class="s2">&quot;fatigue&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cold&quot;</span><span class="p">],</span>
    <span class="s2">&quot;cough&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cold&quot;</span><span class="p">,</span> <span class="s2">&quot;allergies&quot;</span><span class="p">],</span>
    <span class="s2">&quot;headache&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;tension headache&quot;</span><span class="p">,</span> <span class="s2">&quot;migraine&quot;</span><span class="p">],</span>
<span class="p">}</span>

<span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">symptoms_checker</span><span class="p">(</span><span class="n">symptoms</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks symptoms against the medical knowledge base.</span>
<span class="sd">    Existing entries for &quot;fever&quot;, &quot;cough&quot; and &quot;headache&quot;.</span>
<span class="sd">    For other symptoms, you may need to refer to a specialist.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    symptoms (list): List of symptoms reported by the patient.</span>

<span class="sd">    Returns:</span>
<span class="sd">    list: Possible conditions based on the symptoms.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">possible_conditions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">symptom</span> <span class="ow">in</span> <span class="n">symptoms</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">symptom</span> <span class="ow">in</span> <span class="n">medical_knowledge</span><span class="p">:</span>
            <span class="n">possible_conditions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">medical_knowledge</span><span class="p">[</span><span class="n">symptom</span><span class="p">])</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">possible_conditions</span><span class="p">))</span>


<span class="n">medication_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;medicationA&quot;</span><span class="p">:</span> <span class="s2">&quot;Available. For a mild cold, take two tablets every 6 hours for 3 days.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;medicationB&quot;</span><span class="p">:</span> <span class="s2">&quot;Available.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;medicationC&quot;</span><span class="p">:</span> <span class="s2">&quot;Not available.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;creamA&quot;</span><span class="p">:</span> <span class="s2">&quot;Available. For exczema, apply the cream twice a day for the next 2 weeks.&quot;</span><span class="p">,</span>
<span class="p">}</span>


<span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_medication_info</span><span class="p">(</span><span class="n">drug_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provides availability and information about a medication.</span>
<span class="sd">    Known information for &quot;medicationA&quot;, &quot;medicationB&quot;, &quot;medicationC&quot; and &quot;creamA&quot;.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    drug_name (str): Name of the drug.</span>

<span class="sd">    Returns:</span>
<span class="sd">    str: Information about the drug.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">medication_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">drug_name</span><span class="p">,</span> <span class="s2">&quot;Drug not found.&quot;</span><span class="p">)</span>


<span class="n">dermatologist_knowledge</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;eczema&quot;</span><span class="p">:</span> <span class="s2">&quot;Apply creamA twice a day for 2 weeks.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;acne&quot;</span><span class="p">:</span> <span class="s2">&quot;Apply creamB once a day for 1 week.&quot;</span><span class="p">,</span>
<span class="p">}</span>


<span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">knowledge_tool</span><span class="p">(</span><span class="n">condition</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provides diagnosis and treatment information for skin conditions.</span>
<span class="sd">    Existing entries for &quot;eczema&quot; and &quot;acne&quot;.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    condition (str): Name of the skin condition.</span>

<span class="sd">    Returns:</span>
<span class="sd">    str: Diagnosis and treatment information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dermatologist_knowledge</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">condition</span><span class="p">,</span> <span class="s2">&quot;Condition not found.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/tools.html#tooldecorator"><span class="std std-ref">tool</span></a></p>
</section>
<section id="defining-the-agents">
<h3>Defining the agents<a class="headerlink" href="#defining-the-agents" title="Permalink to this heading">#</a></h3>
<p>The three agents need to be given the following elements:</p>
<ul class="simple">
<li><p>A name</p></li>
<li><p>A description</p></li>
<li><p>A system prompt (the instruction to give to the LLM to solve a given task)</p></li>
<li><p>A LLM</p></li>
<li><p>Some optional tools</p></li>
</ul>
<section id="general-practitioner-agent">
<h4>General Practitioner Agent<a class="headerlink" href="#general-practitioner-agent" title="Permalink to this heading">#</a></h4>
<p>The first agent the user interacts with is the General Practitioner Agent.</p>
<p>This agent is equipped with the symptoms checker tool, and can interact with the <strong>Pharmacist Agent</strong>
as well as the <strong>Dermatologist Agent</strong>.</p>
<details class="summary-prompt-for-the-general-practitioner-agent">
<summary>Prompt for the General Practitioner Agent</summary><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">general_practitioner_system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">You are an helpful general practitioner LLM doctor responsible for handling patient consultations.</span>
<span class="s2">Your goal is to assess patients&#39; symptoms, provide initial diagnoses, pescribe medication for</span>
<span class="s2">mild conditions or refer to other specialists as needed.</span>

<span class="s2">## When to Use Each Tool</span>
<span class="s2">- symptoms_checker: Use this to look up possible conditions based on symptoms reported by the patient.</span>

<span class="s2">## When to query other Agents</span>
<span class="s2">- Pharmacist: Every time you need to prescribe some medication, give the condition description and prescription to the Pharmacist.</span>
<span class="s2">- Dermatologist: If the patient has a skin condition, ask expert advice/diagnosis to the Dermatologist after the initial exchange.</span>

<span class="s2"># Specific instructions</span>
<span class="s2">## Initial exchange</span>
<span class="s2">When a patient first shares symptoms ask about for exactly 1 round of questions, consisting of asking about medical history and</span>
<span class="s2">simple questions (e.g. do they have known allergies, when did the symptoms started, did they already tried some treatment/medication, etc)).</span>
<span class="s2">Always ask for this one round of information to the user before prescribing medication / referring to other agents.</span>

<span class="s2">## Identifying condition</span>
<span class="s2">Use the symptoms checker to confirm the condition (for mild conditions only. For other conditions, refer to specialists).</span>

<span class="s2">## Mild conditions</span>
<span class="s2">* If the patient has a mild cold, prescribe medicationA.</span>
<span class="s2">    - Give the condition description and prescription to the Pharmacist.</span>

<span class="s2">## Skin conditions</span>
<span class="s2">* If the patient has a skin condition, ask for expert advice/diagnosis from the Dermatologist.</span>
<span class="s2">Here, you don&#39;t need to ask for the user confirmation. Directly call the Dermatologist</span>
<span class="s2">    - Provide the patient&#39;s symptoms/initial hypothesis to the Dermatologist and ask for a diagnosis.</span>
<span class="s2">    - The Dermatologist may query the Pharmacist to confirm the availability of the prescribed medication.</span>
<span class="s2">    - Once the treatment is confirmed, pass on the prescription to the patient and ask them to follow the instructions.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</details><p>The General Practitioner Agent can be configured as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">general_practitioner</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;GeneralPractitioner&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;General Practitioner. Primary point of contact for patients, handles general medical inquiries, provides initial diagnoses, and manages referrals.&quot;</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">symptoms_checker</span><span class="p">],</span>
    <span class="n">custom_instruction</span><span class="o">=</span><span class="n">general_practitioner_system_prompt</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pharmacist-agent">
<h4>Pharmacist Agent<a class="headerlink" href="#pharmacist-agent" title="Permalink to this heading">#</a></h4>
<p>The Pharmacist Agent is equipped with the tool to obtain medication information.
This agent cannot initiate a discussion with the other agents in the Swarm.</p>
<details class="summary-prompt-for-the-pharmacist-agent">
<summary>Prompt for the Pharmacist Agent</summary><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pharmacist_system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">You are an helpful Pharmacist LLM Agent responsible for giving information about medication.</span>
<span class="s2">Your goal is to answer queries from the General Practitioner Doctor about medication information</span>
<span class="s2">and availabilities.</span>

<span class="s2">## When to Use Each Tool</span>
<span class="s2">- get_medication_info: Use this to look up availability and information about a specific medication.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</details><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pharmacist</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Pharmacist&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Pharmacist. Gives availability and information about specific medication.&quot;</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_medication_info</span><span class="p">],</span>
    <span class="n">custom_instruction</span><span class="o">=</span><span class="n">pharmacist_system_prompt</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dermatologist-agent">
<h4>Dermatologist Agent<a class="headerlink" href="#dermatologist-agent" title="Permalink to this heading">#</a></h4>
<p>The final agent in the Swarm is the Dermatologist agent which is equipped with a tool to query a skin condition knowledge base.
This agent can initiate a discussion with the <strong>Pharmacist Agent</strong>.</p>
<details class="summary-prompt-for-the-dermatologist-agent">
<summary>Prompt for the Dermatologist Agent</summary><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dermatologist_system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">You are an helpful Dermatologist LLM Agent responsible for diagnosing and treating skin conditions.</span>
<span class="s2">Your goal is to assess patients&#39; symptoms, provide accurate diagnoses, and prescribe effective treatments.</span>

<span class="s2">## When to Use Each Tool</span>
<span class="s2">- knowledge_tool: Use this to look up diagnosis and treatment information for specific skin conditions.</span>

<span class="s2">## When to query other Agents</span>
<span class="s2">- Pharmacist: Every time you need to prescribe some medication, give the condition description and prescription to the Pharmacist.</span>

<span class="s2"># Specific instructions</span>
<span class="s2">## Initial exchange</span>
<span class="s2">When a patient&#39;s symptoms are referred to you by the General Practitioner, review the symptoms and use the knowledge tool to confirm the diagnosis.</span>
<span class="s2">## Prescription</span>
<span class="s2">Prescribe the recommended treatment for the diagnosed condition and query the Pharmacist to confirm the availability of the prescribed medication.</span>

<span class="s2">When answering back to the General Practitioner, describe your diagnosis and the prescription.</span>
<span class="s2">Tell the General Practitioner that you already checked with the pharmacist for availability.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</details><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dermatologist</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Dermatologist&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dermatologist. Diagnoses and treats skin conditions.&quot;</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">knowledge_tool</span><span class="p">],</span>
    <span class="n">custom_instruction</span><span class="o">=</span><span class="n">dermatologist_system_prompt</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-the-swarm">
<h3>Creating the Swarm<a class="headerlink" href="#creating-the-swarm" title="Permalink to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Swarm</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Swarm&quot;</span><span class="p">,</span>
    <span class="n">first_agent</span><span class="o">=</span><span class="n">general_practitioner</span><span class="p">,</span>
    <span class="n">relationships</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">dermatologist</span><span class="p">),</span>
        <span class="p">(</span><span class="n">dermatologist</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/agent.html#swarm"><span class="std std-ref">Swarm</span></a></p>
<p>The Swarm has two main parameters:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">first_agent</span></code> — the initial agent the user interacts with (in this example, the General Practitioner Agent).</p></li>
<li><p>A list of relationships between agents.</p></li>
</ul>
<p>Additionally, the list of “relationships” between the agents must be defined.</p>
<p>Each relationship is defined as a tuple of Caller Agent and Recipient Agent.</p>
<p>In this example, the General Practitioner Doctor Agent can initiate discussions with both the Pharmacist and the Dermatologist.
The Dermatologist can also initiate discussions with the Pharmacist.</p>
<p>When invoked, each agent can either respond to its caller (a human user or another agent) or choose to initiate a discussion with
another agent if they are given the capability to do so.</p>
</section>
<section id="executing-the-swarm">
<h3>Executing the Swarm<a class="headerlink" href="#executing-the-swarm" title="Permalink to this heading">#</a></h3>
<p>Now that the Swarm is defined, you can execute it using an example user query.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># With a linear conversation</span>
<span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>

<span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span>
    <span class="s2">&quot;My skin has been itching for some about a week, can you help me understand what is going on?&quot;</span>
<span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">UserMessageRequestStatus</span><span class="p">):</span>
    <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt; </span><span class="si">{</span><span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid execution status, expected UserMessageRequestStatus, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># then continue the conversation</span>
</pre></div>
</div>
<p>We recommend to implement an <a class="reference internal" href="../misc/reference_sheet.html#refsheet-executionloop"><span class="std std-ref">execution loop</span></a> to execute the <code class="docutils literal notranslate"><span class="pre">Swarm</span></code>, such as the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># run_swarm_in_command_line(assistant)</span>
<span class="linenos">2</span><span class="c1"># ^ uncomment and execute</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-usage">
<h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this heading">#</a></h2>
<section id="enabling-handoff-in-the-swarm">
<h3>Enabling handoff in the Swarm<a class="headerlink" href="#enabling-handoff-in-the-swarm" title="Permalink to this heading">#</a></h3>
<p>By default, communication in the <code class="docutils literal notranslate"><span class="pre">Swarm</span></code> pattern is done with agent sending blocking messages/requests to each other.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">handoff</span></code> mechanism provides an alternative: when enabled, agents can handoff the conversation — that is, transfer the message history between
the user and one agent to another agent within the Swarm.
Agents can still communicate with each other as they do when <code class="docutils literal notranslate"><span class="pre">handoff=False</span></code>.</p>
<p>A key benefit of using <code class="docutils literal notranslate"><span class="pre">handoff</span></code> is reduced response latency.
Talking to other agents increases the “distance” between the human user and the current agent.
Transferring a conversation to another agent keeps this distance unchanged (in other words, the agent interacting with the user is different, but the user is still the same).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Swarm</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Swarm&quot;</span><span class="p">,</span>
    <span class="n">first_agent</span><span class="o">=</span><span class="n">general_practitioner</span><span class="p">,</span>
    <span class="n">relationships</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">dermatologist</span><span class="p">),</span>
        <span class="p">(</span><span class="n">dermatologist</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">handoff</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># &lt;-- Add this</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To enable <code class="docutils literal notranslate"><span class="pre">handoff</span></code> in a Swarm, set the <code class="docutils literal notranslate"><span class="pre">handoff</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
</section>
<section id="agent-spec-exporting-loading">
<h2>Agent Spec Exporting/Loading<a class="headerlink" href="#agent-spec-exporting-loading" title="Permalink to this heading">#</a></h2>
<p>You can export the assistant configuration to its Agent Spec configuration using the <code class="docutils literal notranslate"><span class="pre">AgentSpecExporter</span></code>
and the Swarm plugin. Using the plugin ensures the proper serialization of
the custom Swarm component.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>

<span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">assistant</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is what the <strong>Agent Spec representation will look like ↓</strong></p>
<details class="summary-click-here-to-see-the-assistant-configuration">
<summary>Click here to see the assistant configuration.</summary><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">JSON</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginSwarm&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e6dd83c1-7c17-42f8-874d-e6e174f18424&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Swarm&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;first_agent&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;04597246-9a76-45a7-b4e8-b17730bf90b9&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;relationships&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;04597246-9a76-45a7-b4e8-b17730bf90b9&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aa80404a-dfc8-49e3-868a-dcfc4892b551&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;04597246-9a76-45a7-b4e8-b17730bf90b9&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6377f21e-7b6b-4e11-b05b-029980adf932&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6377f21e-7b6b-4e11-b05b-029980adf932&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aa80404a-dfc8-49e3-868a-dcfc4892b551&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;handoff&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SwarmPlugin&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;04597246-9a76-45a7-b4e8-b17730bf90b9&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Agent&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;04597246-9a76-45a7-b4e8-b17730bf90b9&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GeneralPractitioner&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;General Practitioner. Primary point of contact for patients, handles general medical inquiries, provides initial diagnoses, and manages referrals.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0f34179f-02fa-4392-98ac-cc6e0dcff7b7&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;system_prompt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are an helpful general practitioner LLM doctor responsible for handling patient consultations.\nYour goal is to assess patients&#39; symptoms, provide initial diagnoses, pescribe medication for\nmild conditions or refer to other specialists as needed.\n\n## When to Use Each Tool\n- symptoms_checker: Use this to look up possible conditions based on symptoms reported by the patient.\n\n## When to query other Agents\n- Pharmacist: Every time you need to prescribe some medication, give the condition description and prescription to the Pharmacist.\n- Dermatologist: If the patient has a skin condition, ask expert advice/diagnosis to the Dermatologist after the initial exchange.\n\n# Specific instructions\n## Initial exchange\nWhen a patient first shares symptoms ask about for exactly 1 round of questions, consisting of asking about medical history and\nsimple questions (e.g. do they have known allergies, when did the symptoms started, did they already tried some treatment/medication, etc)).\nAlways ask for this one round of information to the user before prescribing medication / referring to other agents.\n\n## Identifying condition\nUse the symptoms checker to confirm the condition (for mild conditions only. For other conditions, refer to specialists).\n\n## Mild conditions\n* If the patient has a mild cold, prescribe medicationA.\n    - Give the condition description and prescription to the Pharmacist.\n\n## Skin conditions\n* If the patient has a skin condition, ask for expert advice/diagnosis from the Dermatologist.\nHere, you don&#39;t need to ask for the user confirmation. Directly call the Dermatologist\n    - Provide the patient&#39;s symptoms/initial hypothesis to the Dermatologist and ask for a diagnosis.\n    - The Dermatologist may query the Pharmacist to confirm the availability of the prescribed medication.\n    - Once the treatment is confirmed, pass on the prescription to the patient and ask them to follow the instructions.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tools&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ServerTool&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;232a7ff6-a97e-49ce-8d62-b415d288a18a&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;symptoms_checker&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Checks symptoms against the medical knowledge base.\nExisting entries for \&quot;fever\&quot;, \&quot;cough\&quot; and \&quot;headache\&quot;.\nFor other symptoms, you may need to refer to a specialist.\n\nParameters:\nsymptoms (list): List of symptoms reported by the patient.\n\nReturns:\nlist: Possible conditions based on the symptoms.&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;symptoms&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">],</span>
<span class="w">          </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;0f34179f-02fa-4392-98ac-cc6e0dcff7b7&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VllmConfig&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0f34179f-02fa-4392-98ac-cc6e0dcff7b7&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;default_generation_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_API_URL&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;aa80404a-dfc8-49e3-868a-dcfc4892b551&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Agent&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aa80404a-dfc8-49e3-868a-dcfc4892b551&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pharmacist&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pharmacist. Gives availability and information about specific medication.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0f34179f-02fa-4392-98ac-cc6e0dcff7b7&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;system_prompt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are an helpful Pharmacist LLM Agent responsible for giving information about medication.\nYour goal is to answer queries from the General Practitioner Doctor about medication information\nand availabilities.\n\n## When to Use Each Tool\n- get_medication_info: Use this to look up availability and information about a specific medication.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tools&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ServerTool&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;57b84c13-a61b-4f79-8755-7dc8e2363726&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_medication_info&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provides availability and information about a medication.\nKnown information for \&quot;medicationA\&quot;, \&quot;medicationB\&quot;, \&quot;medicationC\&quot; and \&quot;creamA\&quot;.\n\nParameters:\ndrug_name (str): Name of the drug.\n\nReturns:\nstr: Information about the drug.&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;drug_name&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">],</span>
<span class="w">          </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;6377f21e-7b6b-4e11-b05b-029980adf932&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Agent&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6377f21e-7b6b-4e11-b05b-029980adf932&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dermatologist&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dermatologist. Diagnoses and treats skin conditions.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0f34179f-02fa-4392-98ac-cc6e0dcff7b7&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;system_prompt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are an helpful Dermatologist LLM Agent responsible for diagnosing and treating skin conditions.\nYour goal is to assess patients&#39; symptoms, provide accurate diagnoses, and prescribe effective treatments.\n\n## When to Use Each Tool\n- knowledge_tool: Use this to look up diagnosis and treatment information for specific skin conditions.\n\n## When to query other Agents\n- Pharmacist: Every time you need to prescribe some medication, give the condition description and prescription to the Pharmacist.\n\n# Specific instructions\n## Initial exchange\nWhen a patient&#39;s symptoms are referred to you by the General Practitioner, review the symptoms and use the knowledge tool to confirm the diagnosis.\n## Prescription\nPrescribe the recommended treatment for the diagnosed condition and query the Pharmacist to confirm the availability of the prescribed medication.\n\nWhen answering back to the General Practitioner, describe your diagnosis and the prescription.\nTell the General Practitioner that you already checked with the pharmacist for availability.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tools&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ServerTool&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c7b805df-39c5-4643-b4e7-352145fa5537&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;knowledge_tool&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provides diagnosis and treatment information for skin conditions.\nExisting entries for \&quot;eczema\&quot; and \&quot;acne\&quot;.\n\nParameters:\ncondition (str): Name of the skin condition.\n\nReturns:\nstr: Diagnosis and treatment information.&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;condition&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">],</span>
<span class="w">          </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;agentspec_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginSwarm</span>
<span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e6dd83c1-7c17-42f8-874d-e6e174f18424</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Swarm</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">first_agent</span><span class="p">:</span>
<span class="w">  </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">04597246-9a76-45a7-b4e8-b17730bf90b9</span>
<span class="nt">relationships</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">04597246-9a76-45a7-b4e8-b17730bf90b9</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aa80404a-dfc8-49e3-868a-dcfc4892b551</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">04597246-9a76-45a7-b4e8-b17730bf90b9</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6377f21e-7b6b-4e11-b05b-029980adf932</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6377f21e-7b6b-4e11-b05b-029980adf932</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aa80404a-dfc8-49e3-868a-dcfc4892b551</span>
<span class="nt">handoff</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SwarmPlugin</span>
<span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">04597246-9a76-45a7-b4e8-b17730bf90b9</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Agent</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">04597246-9a76-45a7-b4e8-b17730bf90b9</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeneralPractitioner</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">General Practitioner. Primary point of contact for patients, handles</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">general medical inquiries, provides initial diagnoses, and manages referrals.</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0f34179f-02fa-4392-98ac-cc6e0dcff7b7</span>
<span class="w">    </span><span class="nt">system_prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">helpful</span><span class="nv"> </span><span class="s">general</span><span class="nv"> </span><span class="s">practitioner</span><span class="nv"> </span><span class="s">LLM</span><span class="nv"> </span><span class="s">doctor</span><span class="nv"> </span><span class="s">responsible\</span>
<span class="w">      </span><span class="s">\ for</span><span class="nv"> </span><span class="s">handling</span><span class="nv"> </span><span class="s">patient</span><span class="nv"> </span><span class="s">consultations.\nYour</span><span class="nv"> </span><span class="s">goal</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">assess</span><span class="nv"> </span><span class="s">patients&#39;</span><span class="nv"> </span><span class="s">symptoms,\</span>
<span class="w">      </span><span class="s">\ provide</span><span class="nv"> </span><span class="s">initial</span><span class="nv"> </span><span class="s">diagnoses,</span><span class="nv"> </span><span class="s">pescribe</span><span class="nv"> </span><span class="s">medication</span><span class="nv"> </span><span class="s">for\nmild</span><span class="nv"> </span><span class="s">conditions</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">refer\</span>
<span class="w">      </span><span class="s">\ to</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">specialists</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">needed.\n\n##</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">Each</span><span class="nv"> </span><span class="s">Tool\n-</span><span class="nv"> </span><span class="s">symptoms_checker:\</span>
<span class="w">      </span><span class="s">\ Use</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">look</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">possible</span><span class="nv"> </span><span class="s">conditions</span><span class="nv"> </span><span class="s">based</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">reported</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the\</span>
<span class="w">      </span><span class="s">\ patient.\n\n##</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">Agents\n-</span><span class="nv"> </span><span class="s">Pharmacist:</span><span class="nv"> </span><span class="s">Every</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">need\</span>
<span class="w">      </span><span class="s">\ to</span><span class="nv"> </span><span class="s">prescribe</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">medication,</span><span class="nv"> </span><span class="s">give</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">condition</span><span class="nv"> </span><span class="s">description</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">prescription\</span>
<span class="w">      </span><span class="s">\ to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Pharmacist.\n-</span><span class="nv"> </span><span class="s">Dermatologist:</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">patient</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">skin</span><span class="nv"> </span><span class="s">condition,\</span>
<span class="w">      </span><span class="s">\ ask</span><span class="nv"> </span><span class="s">expert</span><span class="nv"> </span><span class="s">advice/diagnosis</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Dermatologist</span><span class="nv"> </span><span class="s">after</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">initial</span><span class="nv"> </span><span class="s">exchange.\n\</span>
<span class="w">      </span><span class="s">\n#</span><span class="nv"> </span><span class="s">Specific</span><span class="nv"> </span><span class="s">instructions\n##</span><span class="nv"> </span><span class="s">Initial</span><span class="nv"> </span><span class="s">exchange\nWhen</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">patient</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">shares\</span>
<span class="w">      </span><span class="s">\ symptoms</span><span class="nv"> </span><span class="s">ask</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">exactly</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">round</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">questions,</span><span class="nv"> </span><span class="s">consisting</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">asking\</span>
<span class="w">      </span><span class="s">\ about</span><span class="nv"> </span><span class="s">medical</span><span class="nv"> </span><span class="s">history</span><span class="nv"> </span><span class="s">and\nsimple</span><span class="nv"> </span><span class="s">questions</span><span class="nv"> </span><span class="s">(e.g.</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">they</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">known</span><span class="nv"> </span><span class="s">allergies,\</span>
<span class="w">      </span><span class="s">\ when</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">started,</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">they</span><span class="nv"> </span><span class="s">already</span><span class="nv"> </span><span class="s">tried</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">treatment/medication,\</span>
<span class="w">      </span><span class="s">\ etc)).\nAlways</span><span class="nv"> </span><span class="s">ask</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">one</span><span class="nv"> </span><span class="s">round</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">before</span><span class="nv"> </span><span class="s">prescribing\</span>
<span class="w">      </span><span class="s">\ medication</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">referring</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">agents.\n\n##</span><span class="nv"> </span><span class="s">Identifying</span><span class="nv"> </span><span class="s">condition\nUse</span><span class="nv"> </span><span class="s">the\</span>
<span class="w">      </span><span class="s">\ symptoms</span><span class="nv"> </span><span class="s">checker</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">confirm</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">condition</span><span class="nv"> </span><span class="s">(for</span><span class="nv"> </span><span class="s">mild</span><span class="nv"> </span><span class="s">conditions</span><span class="nv"> </span><span class="s">only.</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">other\</span>
<span class="w">      </span><span class="s">\ conditions,</span><span class="nv"> </span><span class="s">refer</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">specialists).\n\n##</span><span class="nv"> </span><span class="s">Mild</span><span class="nv"> </span><span class="s">conditions\n*</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">patient\</span>
<span class="w">      </span><span class="s">\ has</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">mild</span><span class="nv"> </span><span class="s">cold,</span><span class="nv"> </span><span class="s">prescribe</span><span class="nv"> </span><span class="s">medicationA.\n</span><span class="nv">    </span><span class="s">-</span><span class="nv"> </span><span class="s">Give</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">condition</span><span class="nv"> </span><span class="s">description\</span>
<span class="w">      </span><span class="s">\ and</span><span class="nv"> </span><span class="s">prescription</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Pharmacist.\n\n##</span><span class="nv"> </span><span class="s">Skin</span><span class="nv"> </span><span class="s">conditions\n*</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">patient\</span>
<span class="w">      </span><span class="s">\ has</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">skin</span><span class="nv"> </span><span class="s">condition,</span><span class="nv"> </span><span class="s">ask</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">expert</span><span class="nv"> </span><span class="s">advice/diagnosis</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Dermatologist.\n\</span>
<span class="w">      </span><span class="s">Here,</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">don&#39;t</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ask</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">confirmation.</span><span class="nv"> </span><span class="s">Directly</span><span class="nv"> </span><span class="s">call</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Dermatologist\n\</span>
<span class="w">      </span><span class="s">\ </span><span class="nv">   </span><span class="s">-</span><span class="nv"> </span><span class="s">Provide</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">patient&#39;s</span><span class="nv"> </span><span class="s">symptoms/initial</span><span class="nv"> </span><span class="s">hypothesis</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Dermatologist\</span>
<span class="w">      </span><span class="s">\ and</span><span class="nv"> </span><span class="s">ask</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">diagnosis.\n</span><span class="nv">    </span><span class="s">-</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">Dermatologist</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Pharmacist\</span>
<span class="w">      </span><span class="s">\ to</span><span class="nv"> </span><span class="s">confirm</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">availability</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">prescribed</span><span class="nv"> </span><span class="s">medication.\n</span><span class="nv">    </span><span class="s">-</span><span class="nv"> </span><span class="s">Once</span><span class="nv"> </span><span class="s">the\</span>
<span class="w">      </span><span class="s">\ treatment</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">confirmed,</span><span class="nv"> </span><span class="s">pass</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">prescription</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">patient</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">ask</span><span class="nv"> </span><span class="s">them\</span>
<span class="w">      </span><span class="s">\ to</span><span class="nv"> </span><span class="s">follow</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">instructions.&quot;</span>
<span class="w">    </span><span class="nt">tools</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerTool</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">232a7ff6-a97e-49ce-8d62-b415d288a18a</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">symptoms_checker</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Checks</span><span class="nv"> </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">against</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">medical</span><span class="nv"> </span><span class="s">knowledge</span><span class="nv"> </span><span class="s">base.</span>

<span class="w">        </span><span class="s">Existing</span><span class="nv"> </span><span class="s">entries</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">&quot;fever&quot;,</span><span class="nv"> </span><span class="s">&quot;cough&quot;</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">&quot;headache&quot;.</span>

<span class="w">        </span><span class="s">For</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">symptoms,</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">refer</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">specialist.</span>


<span class="w">        </span><span class="s">Parameters:</span>

<span class="w">        </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">(list):</span><span class="nv"> </span><span class="s">List</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">reported</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">patient.</span>


<span class="w">        </span><span class="s">Returns:</span>

<span class="w">        </span><span class="s">list:</span><span class="nv"> </span><span class="s">Possible</span><span class="nv"> </span><span class="s">conditions</span><span class="nv"> </span><span class="s">based</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">symptoms.&#39;</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">symptoms</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">  </span><span class="nt">0f34179f-02fa-4392-98ac-cc6e0dcff7b7</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VllmConfig</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0f34179f-02fa-4392-98ac-cc6e0dcff7b7</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_MODEL_ID</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">default_generation_parameters</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_API_URL</span>
<span class="w">    </span><span class="nt">model_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_MODEL_ID</span>
<span class="w">  </span><span class="nt">aa80404a-dfc8-49e3-868a-dcfc4892b551</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Agent</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aa80404a-dfc8-49e3-868a-dcfc4892b551</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pharmacist</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pharmacist. Gives availability and information about specific medication.</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0f34179f-02fa-4392-98ac-cc6e0dcff7b7</span>
<span class="w">    </span><span class="nt">system_prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">helpful</span><span class="nv"> </span><span class="s">Pharmacist</span><span class="nv"> </span><span class="s">LLM</span><span class="nv"> </span><span class="s">Agent</span><span class="nv"> </span><span class="s">responsible</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">giving</span>
<span class="w">      </span><span class="s">information</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">medication.</span>

<span class="w">      </span><span class="s">Your</span><span class="nv"> </span><span class="s">goal</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">queries</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">General</span><span class="nv"> </span><span class="s">Practitioner</span><span class="nv"> </span><span class="s">Doctor</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">medication</span>
<span class="w">      </span><span class="s">information</span>

<span class="w">      </span><span class="s">and</span><span class="nv"> </span><span class="s">availabilities.</span>


<span class="w">      </span><span class="s">##</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">Each</span><span class="nv"> </span><span class="s">Tool</span>

<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">get_medication_info:</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">look</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">availability</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">about</span>
<span class="w">      </span><span class="s">a</span><span class="nv"> </span><span class="s">specific</span><span class="nv"> </span><span class="s">medication.&#39;</span>
<span class="w">    </span><span class="nt">tools</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerTool</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">57b84c13-a61b-4f79-8755-7dc8e2363726</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_medication_info</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Provides</span><span class="nv"> </span><span class="s">availability</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">medication.</span>

<span class="w">        </span><span class="s">Known</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">&quot;medicationA&quot;,</span><span class="nv"> </span><span class="s">&quot;medicationB&quot;,</span><span class="nv"> </span><span class="s">&quot;medicationC&quot;</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">&quot;creamA&quot;.</span>


<span class="w">        </span><span class="s">Parameters:</span>

<span class="w">        </span><span class="s">drug_name</span><span class="nv"> </span><span class="s">(str):</span><span class="nv"> </span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">drug.</span>


<span class="w">        </span><span class="s">Returns:</span>

<span class="w">        </span><span class="s">str:</span><span class="nv"> </span><span class="s">Information</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">drug.&#39;</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drug_name</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">  </span><span class="nt">6377f21e-7b6b-4e11-b05b-029980adf932</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Agent</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6377f21e-7b6b-4e11-b05b-029980adf932</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dermatologist</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dermatologist. Diagnoses and treats skin conditions.</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0f34179f-02fa-4392-98ac-cc6e0dcff7b7</span>
<span class="w">    </span><span class="nt">system_prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">helpful</span><span class="nv"> </span><span class="s">Dermatologist</span><span class="nv"> </span><span class="s">LLM</span><span class="nv"> </span><span class="s">Agent</span><span class="nv"> </span><span class="s">responsible</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">diagnosing</span>
<span class="w">      </span><span class="s">and</span><span class="nv"> </span><span class="s">treating</span><span class="nv"> </span><span class="s">skin</span><span class="nv"> </span><span class="s">conditions.</span>

<span class="w">      </span><span class="s">Your</span><span class="nv"> </span><span class="s">goal</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">assess</span><span class="nv"> </span><span class="s">patients</span><span class="se">&#39;&#39;</span><span class="nv"> </span><span class="s">symptoms,</span><span class="nv"> </span><span class="s">provide</span><span class="nv"> </span><span class="s">accurate</span><span class="nv"> </span><span class="s">diagnoses,</span><span class="nv"> </span><span class="s">and</span>
<span class="w">      </span><span class="s">prescribe</span><span class="nv"> </span><span class="s">effective</span><span class="nv"> </span><span class="s">treatments.</span>


<span class="w">      </span><span class="s">##</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">Each</span><span class="nv"> </span><span class="s">Tool</span>

<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">knowledge_tool:</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">look</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">diagnosis</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">treatment</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">for</span>
<span class="w">      </span><span class="s">specific</span><span class="nv"> </span><span class="s">skin</span><span class="nv"> </span><span class="s">conditions.</span>


<span class="w">      </span><span class="s">##</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">Agents</span>

<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">Pharmacist:</span><span class="nv"> </span><span class="s">Every</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">prescribe</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">medication,</span><span class="nv"> </span><span class="s">give</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">condition</span>
<span class="w">      </span><span class="s">description</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">prescription</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Pharmacist.</span>


<span class="w">      </span><span class="s">#</span><span class="nv"> </span><span class="s">Specific</span><span class="nv"> </span><span class="s">instructions</span>

<span class="w">      </span><span class="s">##</span><span class="nv"> </span><span class="s">Initial</span><span class="nv"> </span><span class="s">exchange</span>

<span class="w">      </span><span class="s">When</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">patient</span><span class="se">&#39;&#39;</span><span class="s">s</span><span class="nv"> </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">referred</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">General</span><span class="nv"> </span><span class="s">Practitioner,</span>
<span class="w">      </span><span class="s">review</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">symptoms</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">knowledge</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">confirm</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">diagnosis.</span>

<span class="w">      </span><span class="s">##</span><span class="nv"> </span><span class="s">Prescription</span>

<span class="w">      </span><span class="s">Prescribe</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">recommended</span><span class="nv"> </span><span class="s">treatment</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">diagnosed</span><span class="nv"> </span><span class="s">condition</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">the</span>
<span class="w">      </span><span class="s">Pharmacist</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">confirm</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">availability</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">prescribed</span><span class="nv"> </span><span class="s">medication.</span>


<span class="w">      </span><span class="s">When</span><span class="nv"> </span><span class="s">answering</span><span class="nv"> </span><span class="s">back</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">General</span><span class="nv"> </span><span class="s">Practitioner,</span><span class="nv"> </span><span class="s">describe</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">diagnosis</span><span class="nv"> </span><span class="s">and</span>
<span class="w">      </span><span class="s">the</span><span class="nv"> </span><span class="s">prescription.</span>

<span class="w">      </span><span class="s">Tell</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">General</span><span class="nv"> </span><span class="s">Practitioner</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">already</span><span class="nv"> </span><span class="s">checked</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">pharmacist</span><span class="nv"> </span><span class="s">for</span>
<span class="w">      </span><span class="s">availability.&#39;</span>
<span class="w">    </span><span class="nt">tools</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerTool</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c7b805df-39c5-4643-b4e7-352145fa5537</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">knowledge_tool</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Provides</span><span class="nv"> </span><span class="s">diagnosis</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">treatment</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">skin</span><span class="nv"> </span><span class="s">conditions.</span>

<span class="w">        </span><span class="s">Existing</span><span class="nv"> </span><span class="s">entries</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">&quot;eczema&quot;</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">&quot;acne&quot;.</span>


<span class="w">        </span><span class="s">Parameters:</span>

<span class="w">        </span><span class="s">condition</span><span class="nv"> </span><span class="s">(str):</span><span class="nv"> </span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">skin</span><span class="nv"> </span><span class="s">condition.</span>


<span class="w">        </span><span class="s">Returns:</span>

<span class="w">        </span><span class="s">str:</span><span class="nv"> </span><span class="s">Diagnosis</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">treatment</span><span class="nv"> </span><span class="s">information.&#39;</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">condition</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="nt">agentspec_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.1</span>
</pre></div>
</div>
</div></div>
</details><p>You can then load the configuration back to an assistant using the <code class="docutils literal notranslate"><span class="pre">AgentSpecLoader</span></code>.</p>
<p>Similar to the serialization, use the swarm deserialization plugin to ensure the proper deserialization of
the custom Swarm component.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>

<span class="n">TOOL_REGISTRY</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;symptoms_checker&quot;</span><span class="p">:</span> <span class="n">symptoms_checker</span><span class="p">,</span>
    <span class="s2">&quot;get_medication_info&quot;</span><span class="p">:</span> <span class="n">get_medication_info</span><span class="p">,</span>
    <span class="s2">&quot;knowledge_tool&quot;</span><span class="p">:</span> <span class="n">knowledge_tool</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">assistant</span><span class="p">:</span> <span class="n">Swarm</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">(</span>
    <span class="n">tool_registry</span><span class="o">=</span><span class="n">TOOL_REGISTRY</span>
<span class="p">)</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide uses the following extension/plugin Agent Spec components:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PluginSwarm</span></code></p></li>
</ul>
<p>See the list of available Agent Spec extension/plugin components in the <a class="reference internal" href="../api/agentspec.html"><span class="doc">API Reference</span></a></p>
</div>
</section>
<section id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>Now that you have learned how to define a Swarm, you may proceed to <a class="reference internal" href="howto_multiagent.html"><span class="doc">How to Build Multi-Agent System</span></a>.</p>
</section>
<section id="full-code">
<h2>Full code<a class="headerlink" href="#full-code" title="Permalink to this heading">#</a></h2>
<p>Click on the card at the <a class="reference internal" href="#top-howtoswarm"><span class="std std-ref">top of this page</span></a> to download the full code for this guide or copy the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Copyright © 2025 Oracle and/or its affiliates.</span>
<span class="linenos">  2</span><span class="c1">#</span>
<span class="linenos">  3</span><span class="c1"># This software is under the Universal Permissive License</span>
<span class="linenos">  4</span><span class="c1"># %%[markdown]</span>
<span class="linenos">  5</span><span class="c1"># Code Example - Build a Swarm of Agents</span>
<span class="linenos">  6</span><span class="c1"># --------------------------------------</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="c1"># How to use:</span>
<span class="linenos">  9</span><span class="c1"># Create a new Python virtual environment and install the latest WayFlow version.</span>
<span class="linenos"> 10</span><span class="c1"># ```bash</span>
<span class="linenos"> 11</span><span class="c1"># python -m venv venv-wayflowcore</span>
<span class="linenos"> 12</span><span class="c1"># source venv-wayflowcore/bin/activate</span>
<span class="linenos"> 13</span><span class="c1"># pip install --upgrade pip</span>
<span class="linenos"> 14</span><span class="c1"># pip install &quot;wayflowcore==26.1&quot; </span>
<span class="linenos"> 15</span><span class="c1"># ```</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="c1"># You can now run the script</span>
<span class="linenos"> 18</span><span class="c1"># 1. As a Python file:</span>
<span class="linenos"> 19</span><span class="c1"># ```bash</span>
<span class="linenos"> 20</span><span class="c1"># python howto_swarm.py</span>
<span class="linenos"> 21</span><span class="c1"># ```</span>
<span class="linenos"> 22</span><span class="c1"># 2. As a Notebook (in VSCode):</span>
<span class="linenos"> 23</span><span class="c1"># When viewing the file,</span>
<span class="linenos"> 24</span><span class="c1">#  - press the keys Ctrl + Enter to run the selected cell</span>
<span class="linenos"> 25</span><span class="c1">#  - or Shift + Enter to run the selected cell and move to the cell below# (UPL) 1.0 (LICENSE-UPL or https://oss.oracle.com/licenses/upl) or Apache License</span>
<span class="linenos"> 26</span><span class="c1"># 2.0 (LICENSE-APACHE or http://www.apache.org/licenses/LICENSE-2.0), at your option.</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 32</span><span class="c1">## Imports for this guide</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="c1"># %%</span>
<span class="linenos"> 35</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="linenos"> 36</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span><span class="p">,</span> <span class="n">AgentSpecLoader</span>
<span class="linenos"> 37</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 38</span>    <span class="n">FinishedStatus</span><span class="p">,</span>
<span class="linenos"> 39</span>    <span class="n">UserMessageRequestStatus</span><span class="p">,</span>
<span class="linenos"> 40</span><span class="p">)</span>
<span class="linenos"> 41</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="linenos"> 42</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.swarm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Swarm</span>
<span class="linenos"> 43</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
<span class="linenos"> 44</span>
<span class="linenos"> 45</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 46</span><span class="c1">## Configure your LLM</span>
<span class="linenos"> 47</span>
<span class="linenos"> 48</span><span class="c1"># %%</span>
<span class="linenos"> 49</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span><span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
<span class="linenos"> 52</span>    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span><span class="p">,</span>
<span class="linenos"> 53</span>    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;LLAMA_API_URL&quot;</span><span class="p">,</span>
<span class="linenos"> 54</span><span class="p">)</span>
<span class="linenos"> 55</span>
<span class="linenos"> 56</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 57</span><span class="c1">## Creating the tools</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span><span class="c1"># %%</span>
<span class="linenos"> 60</span><span class="c1"># tools for doctor</span>
<span class="linenos"> 61</span><span class="n">medical_knowledge</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 62</span>    <span class="s2">&quot;fever&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;flu&quot;</span><span class="p">,</span> <span class="s2">&quot;infection&quot;</span><span class="p">],</span>
<span class="linenos"> 63</span>    <span class="s2">&quot;runny nose&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cold&quot;</span><span class="p">,</span> <span class="s2">&quot;allergies&quot;</span><span class="p">],</span>
<span class="linenos"> 64</span>    <span class="s2">&quot;fatigue&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cold&quot;</span><span class="p">],</span>
<span class="linenos"> 65</span>    <span class="s2">&quot;cough&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cold&quot;</span><span class="p">,</span> <span class="s2">&quot;allergies&quot;</span><span class="p">],</span>
<span class="linenos"> 66</span>    <span class="s2">&quot;headache&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;tension headache&quot;</span><span class="p">,</span> <span class="s2">&quot;migraine&quot;</span><span class="p">],</span>
<span class="linenos"> 67</span><span class="p">}</span>
<span class="linenos"> 68</span>
<span class="linenos"> 69</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos"> 70</span><span class="k">def</span><span class="w"> </span><span class="nf">symptoms_checker</span><span class="p">(</span><span class="n">symptoms</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="linenos"> 71</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 72</span><span class="sd">    Checks symptoms against the medical knowledge base.</span>
<span class="linenos"> 73</span><span class="sd">    Existing entries for &quot;fever&quot;, &quot;cough&quot; and &quot;headache&quot;.</span>
<span class="linenos"> 74</span><span class="sd">    For other symptoms, you may need to refer to a specialist.</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span><span class="sd">    Parameters:</span>
<span class="linenos"> 77</span><span class="sd">    symptoms (list): List of symptoms reported by the patient.</span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span><span class="sd">    Returns:</span>
<span class="linenos"> 80</span><span class="sd">    list: Possible conditions based on the symptoms.</span>
<span class="linenos"> 81</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 82</span>    <span class="n">possible_conditions</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 83</span>    <span class="k">for</span> <span class="n">symptom</span> <span class="ow">in</span> <span class="n">symptoms</span><span class="p">:</span>
<span class="linenos"> 84</span>        <span class="k">if</span> <span class="n">symptom</span> <span class="ow">in</span> <span class="n">medical_knowledge</span><span class="p">:</span>
<span class="linenos"> 85</span>            <span class="n">possible_conditions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">medical_knowledge</span><span class="p">[</span><span class="n">symptom</span><span class="p">])</span>
<span class="linenos"> 86</span>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">possible_conditions</span><span class="p">))</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span>
<span class="linenos"> 89</span><span class="n">medication_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 90</span>    <span class="s2">&quot;medicationA&quot;</span><span class="p">:</span> <span class="s2">&quot;Available. For a mild cold, take two tablets every 6 hours for 3 days.&quot;</span><span class="p">,</span>
<span class="linenos"> 91</span>    <span class="s2">&quot;medicationB&quot;</span><span class="p">:</span> <span class="s2">&quot;Available.&quot;</span><span class="p">,</span>
<span class="linenos"> 92</span>    <span class="s2">&quot;medicationC&quot;</span><span class="p">:</span> <span class="s2">&quot;Not available.&quot;</span><span class="p">,</span>
<span class="linenos"> 93</span>    <span class="s2">&quot;creamA&quot;</span><span class="p">:</span> <span class="s2">&quot;Available. For exczema, apply the cream twice a day for the next 2 weeks.&quot;</span><span class="p">,</span>
<span class="linenos"> 94</span><span class="p">}</span>
<span class="linenos"> 95</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos"> 98</span><span class="k">def</span><span class="w"> </span><span class="nf">get_medication_info</span><span class="p">(</span><span class="n">drug_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 99</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">100</span><span class="sd">    Provides availability and information about a medication.</span>
<span class="linenos">101</span><span class="sd">    Known information for &quot;medicationA&quot;, &quot;medicationB&quot;, &quot;medicationC&quot; and &quot;creamA&quot;.</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="sd">    Parameters:</span>
<span class="linenos">104</span><span class="sd">    drug_name (str): Name of the drug.</span>
<span class="linenos">105</span>
<span class="linenos">106</span><span class="sd">    Returns:</span>
<span class="linenos">107</span><span class="sd">    str: Information about the drug.</span>
<span class="linenos">108</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">109</span>    <span class="k">return</span> <span class="n">medication_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">drug_name</span><span class="p">,</span> <span class="s2">&quot;Drug not found.&quot;</span><span class="p">)</span>
<span class="linenos">110</span>
<span class="linenos">111</span>
<span class="linenos">112</span><span class="n">dermatologist_knowledge</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">113</span>    <span class="s2">&quot;eczema&quot;</span><span class="p">:</span> <span class="s2">&quot;Apply creamA twice a day for 2 weeks.&quot;</span><span class="p">,</span>
<span class="linenos">114</span>    <span class="s2">&quot;acne&quot;</span><span class="p">:</span> <span class="s2">&quot;Apply creamB once a day for 1 week.&quot;</span><span class="p">,</span>
<span class="linenos">115</span><span class="p">}</span>
<span class="linenos">116</span>
<span class="linenos">117</span>
<span class="linenos">118</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos">119</span><span class="k">def</span><span class="w"> </span><span class="nf">knowledge_tool</span><span class="p">(</span><span class="n">condition</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos">120</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">121</span><span class="sd">    Provides diagnosis and treatment information for skin conditions.</span>
<span class="linenos">122</span><span class="sd">    Existing entries for &quot;eczema&quot; and &quot;acne&quot;.</span>
<span class="linenos">123</span>
<span class="linenos">124</span><span class="sd">    Parameters:</span>
<span class="linenos">125</span><span class="sd">    condition (str): Name of the skin condition.</span>
<span class="linenos">126</span>
<span class="linenos">127</span><span class="sd">    Returns:</span>
<span class="linenos">128</span><span class="sd">    str: Diagnosis and treatment information.</span>
<span class="linenos">129</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">130</span>    <span class="k">return</span> <span class="n">dermatologist_knowledge</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">condition</span><span class="p">,</span> <span class="s2">&quot;Condition not found.&quot;</span><span class="p">)</span>
<span class="linenos">131</span>
<span class="linenos">132</span><span class="c1"># %%[markdown]</span>
<span class="linenos">133</span><span class="c1">## Prompt for the General Practitioner Agent</span>
<span class="linenos">134</span>
<span class="linenos">135</span><span class="c1"># %%</span>
<span class="linenos">136</span><span class="n">general_practitioner_system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">137</span><span class="s2">You are an helpful general practitioner LLM doctor responsible for handling patient consultations.</span>
<span class="linenos">138</span><span class="s2">Your goal is to assess patients&#39; symptoms, provide initial diagnoses, pescribe medication for</span>
<span class="linenos">139</span><span class="s2">mild conditions or refer to other specialists as needed.</span>
<span class="linenos">140</span>
<span class="linenos">141</span><span class="s2">## When to Use Each Tool</span>
<span class="linenos">142</span><span class="s2">- symptoms_checker: Use this to look up possible conditions based on symptoms reported by the patient.</span>
<span class="linenos">143</span>
<span class="linenos">144</span><span class="s2">## When to query other Agents</span>
<span class="linenos">145</span><span class="s2">- Pharmacist: Every time you need to prescribe some medication, give the condition description and prescription to the Pharmacist.</span>
<span class="linenos">146</span><span class="s2">- Dermatologist: If the patient has a skin condition, ask expert advice/diagnosis to the Dermatologist after the initial exchange.</span>
<span class="linenos">147</span>
<span class="linenos">148</span><span class="s2"># Specific instructions</span>
<span class="linenos">149</span><span class="s2">## Initial exchange</span>
<span class="linenos">150</span><span class="s2">When a patient first shares symptoms ask about for exactly 1 round of questions, consisting of asking about medical history and</span>
<span class="linenos">151</span><span class="s2">simple questions (e.g. do they have known allergies, when did the symptoms started, did they already tried some treatment/medication, etc)).</span>
<span class="linenos">152</span><span class="s2">Always ask for this one round of information to the user before prescribing medication / referring to other agents.</span>
<span class="linenos">153</span>
<span class="linenos">154</span><span class="s2">## Identifying condition</span>
<span class="linenos">155</span><span class="s2">Use the symptoms checker to confirm the condition (for mild conditions only. For other conditions, refer to specialists).</span>
<span class="linenos">156</span>
<span class="linenos">157</span><span class="s2">## Mild conditions</span>
<span class="linenos">158</span><span class="s2">* If the patient has a mild cold, prescribe medicationA.</span>
<span class="linenos">159</span><span class="s2">    - Give the condition description and prescription to the Pharmacist.</span>
<span class="linenos">160</span>
<span class="linenos">161</span><span class="s2">## Skin conditions</span>
<span class="linenos">162</span><span class="s2">* If the patient has a skin condition, ask for expert advice/diagnosis from the Dermatologist.</span>
<span class="linenos">163</span><span class="s2">Here, you don&#39;t need to ask for the user confirmation. Directly call the Dermatologist</span>
<span class="linenos">164</span><span class="s2">    - Provide the patient&#39;s symptoms/initial hypothesis to the Dermatologist and ask for a diagnosis.</span>
<span class="linenos">165</span><span class="s2">    - The Dermatologist may query the Pharmacist to confirm the availability of the prescribed medication.</span>
<span class="linenos">166</span><span class="s2">    - Once the treatment is confirmed, pass on the prescription to the patient and ask them to follow the instructions.</span>
<span class="linenos">167</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos">168</span>
<span class="linenos">169</span><span class="c1"># %%[markdown]</span>
<span class="linenos">170</span><span class="c1">## Define the General Practitioner Agent</span>
<span class="linenos">171</span>
<span class="linenos">172</span><span class="c1"># %%</span>
<span class="linenos">173</span><span class="n">general_practitioner</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="linenos">174</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;GeneralPractitioner&quot;</span><span class="p">,</span>
<span class="linenos">175</span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;General Practitioner. Primary point of contact for patients, handles general medical inquiries, provides initial diagnoses, and manages referrals.&quot;</span><span class="p">,</span>
<span class="linenos">176</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">177</span>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">symptoms_checker</span><span class="p">],</span>
<span class="linenos">178</span>    <span class="n">custom_instruction</span><span class="o">=</span><span class="n">general_practitioner_system_prompt</span><span class="p">,</span>
<span class="linenos">179</span><span class="p">)</span>
<span class="linenos">180</span>
<span class="linenos">181</span><span class="c1"># %%[markdown]</span>
<span class="linenos">182</span><span class="c1">## Prompt for the Pharmacist Agent</span>
<span class="linenos">183</span>
<span class="linenos">184</span><span class="c1"># %%</span>
<span class="linenos">185</span><span class="n">pharmacist_system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">186</span><span class="s2">You are an helpful Pharmacist LLM Agent responsible for giving information about medication.</span>
<span class="linenos">187</span><span class="s2">Your goal is to answer queries from the General Practitioner Doctor about medication information</span>
<span class="linenos">188</span><span class="s2">and availabilities.</span>
<span class="linenos">189</span>
<span class="linenos">190</span><span class="s2">## When to Use Each Tool</span>
<span class="linenos">191</span><span class="s2">- get_medication_info: Use this to look up availability and information about a specific medication.</span>
<span class="linenos">192</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos">193</span>
<span class="linenos">194</span><span class="c1"># %%[markdown]</span>
<span class="linenos">195</span><span class="c1">## Define the Pharmacist Agent</span>
<span class="linenos">196</span>
<span class="linenos">197</span><span class="c1"># %%</span>
<span class="linenos">198</span><span class="n">pharmacist</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="linenos">199</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Pharmacist&quot;</span><span class="p">,</span>
<span class="linenos">200</span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Pharmacist. Gives availability and information about specific medication.&quot;</span><span class="p">,</span>
<span class="linenos">201</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">202</span>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_medication_info</span><span class="p">],</span>
<span class="linenos">203</span>    <span class="n">custom_instruction</span><span class="o">=</span><span class="n">pharmacist_system_prompt</span><span class="p">,</span>
<span class="linenos">204</span><span class="p">)</span>
<span class="linenos">205</span>
<span class="linenos">206</span><span class="c1"># %%[markdown]</span>
<span class="linenos">207</span><span class="c1">## Prompt for the Dermatologist Agent</span>
<span class="linenos">208</span>
<span class="linenos">209</span><span class="c1"># %%</span>
<span class="linenos">210</span><span class="n">dermatologist_system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">211</span><span class="s2">You are an helpful Dermatologist LLM Agent responsible for diagnosing and treating skin conditions.</span>
<span class="linenos">212</span><span class="s2">Your goal is to assess patients&#39; symptoms, provide accurate diagnoses, and prescribe effective treatments.</span>
<span class="linenos">213</span>
<span class="linenos">214</span><span class="s2">## When to Use Each Tool</span>
<span class="linenos">215</span><span class="s2">- knowledge_tool: Use this to look up diagnosis and treatment information for specific skin conditions.</span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="s2">## When to query other Agents</span>
<span class="linenos">218</span><span class="s2">- Pharmacist: Every time you need to prescribe some medication, give the condition description and prescription to the Pharmacist.</span>
<span class="linenos">219</span>
<span class="linenos">220</span><span class="s2"># Specific instructions</span>
<span class="linenos">221</span><span class="s2">## Initial exchange</span>
<span class="linenos">222</span><span class="s2">When a patient&#39;s symptoms are referred to you by the General Practitioner, review the symptoms and use the knowledge tool to confirm the diagnosis.</span>
<span class="linenos">223</span><span class="s2">## Prescription</span>
<span class="linenos">224</span><span class="s2">Prescribe the recommended treatment for the diagnosed condition and query the Pharmacist to confirm the availability of the prescribed medication.</span>
<span class="linenos">225</span>
<span class="linenos">226</span><span class="s2">When answering back to the General Practitioner, describe your diagnosis and the prescription.</span>
<span class="linenos">227</span><span class="s2">Tell the General Practitioner that you already checked with the pharmacist for availability.</span>
<span class="linenos">228</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos">229</span>
<span class="linenos">230</span><span class="c1"># %%[markdown]</span>
<span class="linenos">231</span><span class="c1">## Define the Dermatologist Agent</span>
<span class="linenos">232</span>
<span class="linenos">233</span><span class="c1"># %%</span>
<span class="linenos">234</span><span class="n">dermatologist</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="linenos">235</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Dermatologist&quot;</span><span class="p">,</span>
<span class="linenos">236</span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dermatologist. Diagnoses and treats skin conditions.&quot;</span><span class="p">,</span>
<span class="linenos">237</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">238</span>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">knowledge_tool</span><span class="p">],</span>
<span class="linenos">239</span>    <span class="n">custom_instruction</span><span class="o">=</span><span class="n">dermatologist_system_prompt</span><span class="p">,</span>
<span class="linenos">240</span><span class="p">)</span>
<span class="linenos">241</span>
<span class="linenos">242</span><span class="c1"># %%[markdown]</span>
<span class="linenos">243</span><span class="c1">## Creating the Swarm</span>
<span class="linenos">244</span>
<span class="linenos">245</span><span class="c1"># %%</span>
<span class="linenos">246</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Swarm</span><span class="p">(</span>
<span class="linenos">247</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Swarm&quot;</span><span class="p">,</span>
<span class="linenos">248</span>    <span class="n">first_agent</span><span class="o">=</span><span class="n">general_practitioner</span><span class="p">,</span>
<span class="linenos">249</span>    <span class="n">relationships</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">250</span>        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
<span class="linenos">251</span>        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">dermatologist</span><span class="p">),</span>
<span class="linenos">252</span>        <span class="p">(</span><span class="n">dermatologist</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
<span class="linenos">253</span>    <span class="p">],</span>
<span class="linenos">254</span><span class="p">)</span>
<span class="linenos">255</span>
<span class="linenos">256</span>
<span class="linenos">257</span><span class="c1"># %%[markdown]</span>
<span class="linenos">258</span><span class="c1">## Running the Swarm</span>
<span class="linenos">259</span>
<span class="linenos">260</span><span class="c1"># %%</span>
<span class="linenos">261</span><span class="c1"># With a linear conversation</span>
<span class="linenos">262</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="linenos">263</span>
<span class="linenos">264</span><span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span>
<span class="linenos">265</span>    <span class="s2">&quot;My skin has been itching for some about a week, can you help me understand what is going on?&quot;</span>
<span class="linenos">266</span><span class="p">)</span>
<span class="linenos">267</span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">268</span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">UserMessageRequestStatus</span><span class="p">):</span>
<span class="linenos">269</span>    <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
<span class="linenos">270</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt; </span><span class="si">{</span><span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="linenos">271</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">272</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid execution status, expected UserMessageRequestStatus, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">273</span>
<span class="linenos">274</span><span class="c1"># then continue the conversation</span>
<span class="linenos">275</span><span class="c1"># %%</span>
<span class="linenos">276</span><span class="c1"># Or with an execution loop</span>
<span class="linenos">277</span><span class="k">def</span><span class="w"> </span><span class="nf">run_swarm_in_command_line</span><span class="p">(</span><span class="n">assistant</span><span class="p">:</span> <span class="n">Swarm</span><span class="p">):</span>
<span class="linenos">278</span>    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">279</span>    <span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="linenos">280</span>
<span class="linenos">281</span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">282</span>        <span class="n">status</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span>
<span class="linenos">283</span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">284</span>            <span class="k">break</span>
<span class="linenos">285</span>        <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
<span class="linenos">286</span>        <span class="k">if</span> <span class="n">assistant_reply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">287</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="linenos">288</span>        <span class="n">user_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">User &gt;&gt;&gt; &quot;</span><span class="p">)</span>
<span class="linenos">289</span>        <span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
<span class="linenos">290</span>
<span class="linenos">291</span>
<span class="linenos">292</span><span class="c1"># %%[markdown]</span>
<span class="linenos">293</span><span class="c1">## Running with the execution loop</span>
<span class="linenos">294</span>
<span class="linenos">295</span><span class="c1"># %%</span>
<span class="linenos">296</span><span class="c1"># run_swarm_in_command_line(assistant)</span>
<span class="linenos">297</span><span class="c1"># ^ uncomment and execute</span>
<span class="linenos">298</span>
<span class="linenos">299</span><span class="c1"># %%[markdown]</span>
<span class="linenos">300</span><span class="c1">## Enabling handoff in the Swarm</span>
<span class="linenos">301</span>
<span class="linenos">302</span><span class="c1"># %%</span>
<span class="linenos">303</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Swarm</span><span class="p">(</span>
<span class="linenos">304</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Swarm&quot;</span><span class="p">,</span>
<span class="linenos">305</span>    <span class="n">first_agent</span><span class="o">=</span><span class="n">general_practitioner</span><span class="p">,</span>
<span class="linenos">306</span>    <span class="n">relationships</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">307</span>        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
<span class="linenos">308</span>        <span class="p">(</span><span class="n">general_practitioner</span><span class="p">,</span> <span class="n">dermatologist</span><span class="p">),</span>
<span class="linenos">309</span>        <span class="p">(</span><span class="n">dermatologist</span><span class="p">,</span> <span class="n">pharmacist</span><span class="p">),</span>
<span class="linenos">310</span>    <span class="p">],</span>
<span class="linenos">311</span>    <span class="n">handoff</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># &lt;-- Add this</span>
<span class="linenos">312</span><span class="p">)</span>
<span class="linenos">313</span>
<span class="linenos">314</span><span class="c1"># %%[markdown]</span>
<span class="linenos">315</span><span class="c1">## Export config to Agent Spec</span>
<span class="linenos">316</span>
<span class="linenos">317</span><span class="c1"># %%</span>
<span class="linenos">318</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>
<span class="linenos">319</span>
<span class="linenos">320</span><span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">assistant</span><span class="p">)</span>
<span class="linenos">321</span>
<span class="linenos">322</span><span class="c1"># %%[markdown]</span>
<span class="linenos">323</span><span class="c1">## Load Agent Spec config</span>
<span class="linenos">324</span>
<span class="linenos">325</span><span class="c1"># %%</span>
<span class="linenos">326</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>
<span class="linenos">327</span>
<span class="linenos">328</span><span class="n">TOOL_REGISTRY</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">329</span>    <span class="s2">&quot;symptoms_checker&quot;</span><span class="p">:</span> <span class="n">symptoms_checker</span><span class="p">,</span>
<span class="linenos">330</span>    <span class="s2">&quot;get_medication_info&quot;</span><span class="p">:</span> <span class="n">get_medication_info</span><span class="p">,</span>
<span class="linenos">331</span>    <span class="s2">&quot;knowledge_tool&quot;</span><span class="p">:</span> <span class="n">knowledge_tool</span><span class="p">,</span>
<span class="linenos">332</span><span class="p">}</span>
<span class="linenos">333</span><span class="n">assistant</span><span class="p">:</span> <span class="n">Swarm</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">(</span>
<span class="linenos">334</span>    <span class="n">tool_registry</span><span class="o">=</span><span class="n">TOOL_REGISTRY</span>
<span class="linenos">335</span><span class="p">)</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-implementation">Basic implementation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-tools">Creating the tools</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-agents">Defining the agents</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#general-practitioner-agent">General Practitioner Agent</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pharmacist-agent">Pharmacist Agent</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dermatologist-agent">Dermatologist Agent</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-swarm">Creating the Swarm</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#executing-the-swarm">Executing the Swarm</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-usage">Advanced usage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enabling-handoff-in-the-swarm">Enabling handoff in the Swarm</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agent-spec-exporting-loading">Agent Spec Exporting/Loading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next steps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#full-code">Full code</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>