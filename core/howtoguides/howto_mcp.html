


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>How to connect MCP tools to Assistants &#8212; wayflowcore 26.1.0.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=dba54f56160742ef5599"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599" />

  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'core/howtoguides/howto_mcp';</script>
  <script src="../../_static/announcement.js"></script>

    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to Do Remote API Calls with Potentially Expiring Tokens" href="howto_remote_tool_expired_token.html" />
    <link rel="prev" title="How to Create a Tool Using a Flow" href="create_a_tool_from_a_flow.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="26.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
    <img src="../../_static/logo-dark.svg" class="logo__image only-dark pst-js-only" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials &amp; Use Cases</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/basic_agent.html">Build a Simple Conversational Assistant with Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/basic_flow.html">Build a Simple Fixed-flow Assistant with Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/usecase_prbot.html">Build a Simple Code Review Assistant</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">How-to Guides</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="io_descriptors.html">Change Input and Output Descriptors of Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_async.html">Use Asynchronous APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="agents.html">Create a ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_imagecontent.html">How to Send Images to LLMs and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_prompttemplate.html">Use Templates for Advanced Prompting Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_userinputinflows.html">Ask for User Input in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="conditional_flows.html">Create Conditional Transitions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="promptexecutionstep.html">Do Structured LLM Generation in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_userconfirmation.html">Add User Confirmation to a Tool Call Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="catching_exceptions.html">Catch Exceptions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_mapstep.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_agents_in_flows.html">Use Agents in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_multiagent.html">Build a Hierarchical Multi-Agent System</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_swarm.html">Build a Swarm of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_managerworkers.html">Build a ManagerWorkers of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_build_assistants_with_tools.html">Build Assistants with Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_multiple_output_tool.html">Create Tools with Multiple Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_a_tool_from_a_flow.html">Convert Flows to Tools</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Connect MCP tools to Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_remote_tool_expired_token.html">Do Remote API Calls with Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_execute_agentspec_with_wayflowcore.html">Load and Execute an Agent Spec Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_serdeser.html">Serialize and Deserialize Flows and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_serialize_conversations.html">Serialize and Deserialize Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing_ollama.html">Install and Use Ollama</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_tracing.html">Enable Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_datastores.html">Connect Assistants to Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="embeddingmodels_from_different_providers.html">Use Embedding Models from Different Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_evaluation.html">How to Evaluate WayFlow Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_conversation_evaluation.html">How to Evaluate Assistant Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_variable.html">Use Variables for Shared State in Flows</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/agentspec.html">Agent Spec Adapters</a></li>

<li class="toctree-l2"><a class="reference internal" href="../api/conversation.html">Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/flows.html">Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/embeddingmodels.html">Embedding Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/contextproviders.html">Context Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/interrupts.html">Execution Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prompttemplate.html">PromptTemplates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialization.html">Serialization/Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/datastores.html">Datastores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/warnings.html">Warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/evaluation.html">Evaluation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">For Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">WayFlow</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How-to Guides</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">How to connect MCP tools to Assistants</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-connect-mcp-tools-to-assistants">
<span id="top-howtomcp"></span><h1>How to connect MCP tools to Assistants<a class="headerlink" href="#how-to-connect-mcp-tools-to-assistants" title="Permalink to this heading">#</a></h1>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
<a class="reference internal" href="../../_images/python-icon.svg"><img alt="python-icon" height="40px" src="../../_images/python-icon.svg" width="40px" /></a> Download Python Script</div>
<p class="sd-card-text">Python script/notebook for this guide.</p>
</div>
<a class="sd-stretched-link sd-hide-link-text reference external" href="../end_to_end_code_examples/howto_mcp.py"><span>MCP how-to script</span></a></div>
</div>
</div>
</div>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites</p>
<p>This guide assumes familiarity with:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/tools.html"><span class="doc">Tools</span></a></p></li>
<li><p><a class="reference internal" href="howto_build_assistants_with_tools.html"><span class="doc">Building Assistants with Tools</span></a></p></li>
</ul>
</div>
<p><a class="reference external" href="https://modelcontextprotocol.io/introduction">Model Context Protocol</a> (MCP) is an open protocol that standardizes how applications provide context to LLMs.
You can use an MCP server to provide a consistent tool interface to your agents and flows, without having to create custom adapters for different APIs.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See the <a class="reference external" href="https://github.com/oracle/mcp">Oracle MCP Server Repository</a> to explore examples
of reference implementations of MCP servers for managing and interacting with Oracle products.</p>
</div>
<p>In this guide, you will learn how to:</p>
<ul class="simple">
<li><p>Create a simple MCP Server (in a separate Python file)</p></li>
<li><p>Connect an Agent to an MCP Server (including how to export/load via Agent Spec, and run it)</p></li>
<li><p>Connect a Flow to an MCP Server (including export/load/run)</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This guide does not aim at explaining how to make secure MCP servers, but instead mainly aims at showing how to connect to one.
You should ensure that your MCP server configurations are secure, and only connect to trusted external MCP servers.</p>
</div>
<section id="prerequisite-setup-a-simple-mcp-server">
<h2>Prerequisite: Setup a simple MCP Server<a class="headerlink" href="#prerequisite-setup-a-simple-mcp-server" title="Permalink to this heading">#</a></h2>
<p>First, let’s see how to create and start a simple MCP server exposing a couple of tools.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should copy the following server code and run it in a separate Python process.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server.fastmcp</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastMCP</span>

<span class="n">PAYSLIPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">7612</span><span class="p">,</span>
        <span class="s2">&quot;Currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PeriodStartDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/05/15&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PeriodEndDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/06/15&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PaymentDate&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DocumentId&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">&quot;Currency&quot;</span><span class="p">:</span> <span class="s2">&quot;CHF&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PeriodStartDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2024/05/01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PeriodEndDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2024/06/01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PaymentDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2024/05/15&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DocumentId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="s2">&quot;Currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PeriodStartDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/06/15&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PeriodEndDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/10/15&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PaymentDate&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DocumentsId&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_server</span><span class="p">(</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and configure the MCP server&quot;&quot;&quot;</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Example MCP Server&quot;</span><span class="p">,</span>
        <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;A MCP Server.&quot;</span><span class="p">,</span>
        <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@server</span><span class="o">.</span><span class="n">tool</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Return session details for the current user&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_session</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Username&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob.b&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DisplayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob B&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@server</span><span class="o">.</span><span class="n">tool</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Return payslip details for a given PersonId&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_payslips</span><span class="p">(</span><span class="n">PersonId</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">payslip</span> <span class="k">for</span> <span class="n">payslip</span> <span class="ow">in</span> <span class="n">PAYSLIPS</span> <span class="k">if</span> <span class="n">payslip</span><span class="p">[</span><span class="s2">&quot;PersonId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">PersonId</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">server</span>


<span class="k">def</span><span class="w"> </span><span class="nf">start_mcp_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8080</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">create_server</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">transport</span><span class="o">=</span><span class="s2">&quot;sse&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">/sse&quot;</span>

<span class="c1"># mcp_server_url = start_mcp_server() # &lt;--- Move the code above to a separate file then uncomment</span>
</pre></div>
</div>
<p>This MCP server exposes two example tools: <code class="docutils literal notranslate"><span class="pre">get_user_session</span></code> and <code class="docutils literal notranslate"><span class="pre">get_payslips</span></code>.
Once started, it will be available at (by default): <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/sse</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When choosing a transport for MCP:</p>
<ul class="simple">
<li><p>Use <a class="reference internal" href="../api/tools.html#stdiotransport"><span class="std std-ref">Stdio</span></a> when launching and communicating with an MCP server as a local subprocess on the same machine as the client.</p></li>
<li><p>Use <a class="reference internal" href="../api/tools.html#streamablehttpmtlstransport"><span class="std std-ref">Streamable HTTP</span></a> when connecting to a remote MCP server.</p></li>
</ul>
<p>For more information, visit <a class="reference external" href="https://modelcontextprotocol.io/specification/2025-03-26/basic/transports#stdio">https://modelcontextprotocol.io/specification/2025-03-26/basic/transports#stdio</a></p>
</div>
</section>
<section id="connecting-an-agent-to-the-mcp-server">
<h2>Connecting an Agent to the MCP Server<a class="headerlink" href="#connecting-an-agent-to-the-mcp-server" title="Permalink to this heading">#</a></h2>
<p>You can now connect an agent to this running MCP server.</p>
<section id="add-imports-and-configure-an-llm">
<h3>Add imports and configure an LLM<a class="headerlink" href="#add-imports-and-configure-an-llm" title="Permalink to this heading">#</a></h3>
<p>Start by importing the necessary packages for this guide:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="n">FinishedStatus</span><span class="p">,</span> <span class="n">UserMessageRequestStatus</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.mcp</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPTool</span><span class="p">,</span> <span class="n">MCPToolBox</span><span class="p">,</span> <span class="n">SSETransport</span><span class="p">,</span> <span class="n">enable_mcp_without_auth</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolExecutionStep</span>

<span class="n">mcp_server_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://localhost:8080/sse&quot;</span> <span class="c1"># change to your own URL</span>
<span class="c1"># We will see below how to connect a specific tool to an assistant, e.g.</span>
<span class="n">MCP_TOOL_NAME</span> <span class="o">=</span> <span class="s2">&quot;get_user_session&quot;</span>
<span class="c1"># And see how to build an agent that can answer questions, e.g.</span>
<span class="n">USER_QUERY</span> <span class="o">=</span> <span class="s2">&quot;What was the payment date of the last payslip for the current user?&quot;</span>
</pre></div>
</div>
<p>WayFlow supports several LLM API providers.
Select an LLM from the options below:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">OCI GenAI</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">vLLM</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Ollama</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OCIGenAIModel</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">llm</span> <span class="o">=</span> <span class="n">OCIGenAIModel</span><span class="p">(</span>
        <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;provider.model-id&quot;</span><span class="p">,</span>
        <span class="n">service_endpoint</span><span class="o">=</span><span class="s2">&quot;https://url-to-service-endpoint.com&quot;</span><span class="p">,</span>
        <span class="n">compartment_id</span><span class="o">=</span><span class="s2">&quot;compartment-id&quot;</span><span class="p">,</span>
        <span class="n">auth_type</span><span class="o">=</span><span class="s2">&quot;API_KEY&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;VLLM_HOST_PORT&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OllamaModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">OllamaModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div>
</section>
<section id="build-the-agent">
<h3>Build the Agent<a class="headerlink" href="#build-the-agent" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="../api/agent.html#agent"><span class="std std-ref">Agents</span></a> can connect to MCP tools by either using a <a class="reference internal" href="../api/tools.html#mcptoolbox"><span class="std std-ref">MCPToolBox</span></a> or a <a class="reference internal" href="../api/tools.html#mcptool"><span class="std std-ref">MCPTool</span></a>.
Here you will use the toolbox (see the section on Flows to see how to use the <code class="docutils literal notranslate"><span class="pre">MCPTool</span></code>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">enable_mcp_without_auth</span><span class="p">()</span> <span class="c1"># &lt;--- See https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization#security-considerations</span>
<span class="n">mcp_client</span> <span class="o">=</span> <span class="n">SSETransport</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">mcp_server_url</span><span class="p">)</span>
<span class="n">mcp_toolbox</span> <span class="o">=</span> <span class="n">MCPToolBox</span><span class="p">(</span><span class="n">client_transport</span><span class="o">=</span><span class="n">mcp_client</span><span class="p">)</span>

<span class="n">assistant</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">mcp_toolbox</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Specify the <a class="reference internal" href="../api/tools.html#clienttransport"><span class="std std-ref">transport</span></a> to use to handle the connection to the server and create the toolbox.
You can then equip an agent with the toolbox similarly to tools.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">enable_mcp_without_auth()</span></code> disables authorization for local/testing only—do not use in production.</p>
</div>
</section>
<section id="running-the-agent">
<h3>Running the Agent<a class="headerlink" href="#running-the-agent" title="Permalink to this heading">#</a></h3>
<p>You can now run the agent in a simple conversation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># With a linear conversation</span>
<span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>

<span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="n">USER_QUERY</span><span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">UserMessageRequestStatus</span><span class="p">):</span>
    <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt; </span><span class="si">{</span><span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid execution status, expected UserMessageRequestStatus, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># then continue the conversation</span>
</pre></div>
</div>
<p>Alternatively, run the agent interactively in a command-line loop:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">run_agent_in_command_line</span><span class="p">(</span><span class="n">assistant</span><span class="p">:</span> <span class="n">Agent</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
            <span class="k">break</span>
        <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">assistant_reply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">user_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">User &gt;&gt;&gt; &quot;</span><span class="p">)</span>
        <span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>

<span class="c1"># run_agent_in_command_line(assistant)</span>
<span class="c1"># ^ uncomment and execute</span>
</pre></div>
</div>
</section>
</section>
<section id="connecting-a-flow-to-the-mcp-server">
<h2>Connecting a Flow to the MCP Server<a class="headerlink" href="#connecting-a-flow-to-the-mcp-server" title="Permalink to this heading">#</a></h2>
<p>You can also use MCP tools in a <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> by using the <a class="reference internal" href="../api/tools.html#mcptool"><span class="std std-ref">MCPTool</span></a> in a <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>.</p>
<section id="build-the-flow">
<h3>Build the Flow<a class="headerlink" href="#build-the-flow" title="Permalink to this heading">#</a></h3>
<p>Create the flow using the MCP tool:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mcp_tool</span> <span class="o">=</span> <span class="n">MCPTool</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">MCP_TOOL_NAME</span><span class="p">,</span>
    <span class="n">client_transport</span><span class="o">=</span><span class="n">mcp_client</span>
<span class="p">)</span>

<span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span>
    <span class="n">ToolExecutionStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mcp_tool_step&quot;</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">mcp_tool</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Here you specify the client transport as with the MCP ToolBox, as well as the name of the specific tool
you want to use. Additionally, you can override the tool description (exposed by the MCP server) by
specifying the <code class="docutils literal notranslate"><span class="pre">description</span></code> parameter.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">_validate_tool_exist_on_server</span></code> parameter to validate whether the tool is available or not
at instantiation time.</p>
</div>
</section>
<section id="running-the-flow">
<h3>Running the Flow<a class="headerlink" href="#running-the-flow" title="Permalink to this heading">#</a></h3>
<p>Execute the flow as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
    <span class="n">flow_outputs</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">Flow outputs &gt;&gt;&gt; </span><span class="si">{</span><span class="n">flow_outputs</span><span class="si">}</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Invalid execution status, expected FinishedStatus, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="exporting-loading-with-agent-spec">
<h3>Exporting/Loading with Agent Spec<a class="headerlink" href="#exporting-loading-with-agent-spec" title="Permalink to this heading">#</a></h3>
<p>You can export the flow configuration to Agent Spec YAML:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>

<span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">assistant</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is what the <strong>Agent Spec representation will look like ↓</strong></p>
<details class="summary-click-here-to-see-the-assistant-configuration">
<summary>Click here to see the assistant configuration.</summary><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">JSON</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c535a5db-e2bc-4f0b-896d-d4266237428d&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flow_34eae46e__auto&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d8948188-ea98-4bdb-aaa4-9c29f600696b&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;50108849-6be7-48d8-b3d0-5bf78c12403c&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d8948188-ea98-4bdb-aaa4-9c29f600696b&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d84bc934-90bd-421a-8ce5-f7224008d0b5&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;36f9ecb6-04f8-4351-81c6-1aab04963b0a&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___to_mcp_tool_step_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d8948188-ea98-4bdb-aaa4-9c29f600696b&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;50108849-6be7-48d8-b3d0-5bf78c12403c&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;07883a38-48b0-43ad-aeeb-1a937786a1ff&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mcp_tool_step_to_None End node_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;50108849-6be7-48d8-b3d0-5bf78c12403c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d84bc934-90bd-421a-8ce5-f7224008d0b5&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e4820094-c97f-4805-a0ac-8048a2fcaaeb&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mcp_tool_step_tool_output_to_None End node_tool_output_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;50108849-6be7-48d8-b3d0-5bf78c12403c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d84bc934-90bd-421a-8ce5-f7224008d0b5&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;d84bc934-90bd-421a-8ce5-f7224008d0b5&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d84bc934-90bd-421a-8ce5-f7224008d0b5&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;None End node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;End node representing all transitions to None in the WayFlow flow&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;next&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;50108849-6be7-48d8-b3d0-5bf78c12403c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedToolNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;50108849-6be7-48d8-b3d0-5bf78c12403c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mcp_tool_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;tool&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginMCPTool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d7346aa2-3276-49f7-81a2-7b1fe13dbb7d&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_random_string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tool to return a random string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;client_transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginSSETransport&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ba05bef-c297-4bd8-ac37-738838218cf4&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mcp_client_transport&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">          </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8001/sse&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;timeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;sse_read_timeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">300.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MCPPlugin&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MCPPlugin&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;raise_exceptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;d8948188-ea98-4bdb-aaa4-9c29f600696b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d8948188-ea98-4bdb-aaa4-9c29f600696b&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep__&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;agentspec_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c535a5db-e2bc-4f0b-896d-d4266237428d</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flow_34eae46e__auto</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">outputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="nt">start_node</span><span class="p">:</span>
<span class="w">  </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d8948188-ea98-4bdb-aaa4-9c29f600696b</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50108849-6be7-48d8-b3d0-5bf78c12403c</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d8948188-ea98-4bdb-aaa4-9c29f600696b</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d84bc934-90bd-421a-8ce5-f7224008d0b5</span>
<span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">36f9ecb6-04f8-4351-81c6-1aab04963b0a</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___to_mcp_tool_step_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d8948188-ea98-4bdb-aaa4-9c29f600696b</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50108849-6be7-48d8-b3d0-5bf78c12403c</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07883a38-48b0-43ad-aeeb-1a937786a1ff</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mcp_tool_step_to_None End node_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50108849-6be7-48d8-b3d0-5bf78c12403c</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d84bc934-90bd-421a-8ce5-f7224008d0b5</span>
<span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e4820094-c97f-4805-a0ac-8048a2fcaaeb</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mcp_tool_step_tool_output_to_None End node_tool_output_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50108849-6be7-48d8-b3d0-5bf78c12403c</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d84bc934-90bd-421a-8ce5-f7224008d0b5</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">d84bc934-90bd-421a-8ce5-f7224008d0b5</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d84bc934-90bd-421a-8ce5-f7224008d0b5</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None End node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">End node representing all transitions to None in the WayFlow flow</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">  </span><span class="nt">50108849-6be7-48d8-b3d0-5bf78c12403c</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtendedToolNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50108849-6be7-48d8-b3d0-5bf78c12403c</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mcp_tool_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">tool</span><span class="p">:</span>
<span class="w">      </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginMCPTool</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d7346aa2-3276-49f7-81a2-7b1fe13dbb7d</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_random_string</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tool to return a random string</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">      </span><span class="nt">client_transport</span><span class="p">:</span>
<span class="w">        </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginSSETransport</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ba05bef-c297-4bd8-ac37-738838218cf4</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mcp_client_transport</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8001/sse</span>
<span class="w">        </span><span class="nt">headers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">        </span><span class="nt">sse_read_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300.0</span>
<span class="w">        </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MCPPlugin</span>
<span class="w">        </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">      </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MCPPlugin</span>
<span class="w">      </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">    </span><span class="nt">input_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">output_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">raise_exceptions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">    </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">  </span><span class="nt">d8948188-ea98-4bdb-aaa4-9c29f600696b</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d8948188-ea98-4bdb-aaa4-9c29f600696b</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep__</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="nt">agentspec_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.1</span>
</pre></div>
</div>
</div></div>
</details><p>You can then load the configuration back to an assistant using the <code class="docutils literal notranslate"><span class="pre">AgentSpecLoader</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>

<span class="n">assistant</span><span class="p">:</span> <span class="n">Flow</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">()</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide uses the following extension/plugin Agent Spec components:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PluginMCPTool</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PluginSSETransport</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExtendedToolNode</span></code></p></li>
</ul>
<p>See the list of available Agent Spec extension/plugin components in the <a class="reference internal" href="../api/agentspec.html"><span class="doc">API Reference</span></a></p>
</div>
</section>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>Having learned how to integrate MCP servers in WayFlow, you may now proceed to:</p>
<ul class="simple">
<li><p><a class="reference internal" href="howto_agents_in_flows.html"><span class="doc">Agents in Flows</span></a></p></li>
<li><p><a class="reference internal" href="howto_userconfirmation.html"><span class="doc">How to Add User Confirmation to Tool Call Requests</span></a></p></li>
<li><p><a class="reference internal" href="create_a_tool_from_a_flow.html"><span class="doc">How to Create a ServerTool from a Flow</span></a></p></li>
</ul>
</section>
<section id="full-code">
<h2>Full code<a class="headerlink" href="#full-code" title="Permalink to this heading">#</a></h2>
<p>Click on the card at the <a class="reference internal" href="#top-howtomcp"><span class="std std-ref">top of this page</span></a> to download the full code for this guide or copy the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Copyright © 2025 Oracle and/or its affiliates.</span>
<span class="linenos">  2</span><span class="c1">#</span>
<span class="linenos">  3</span><span class="c1"># This software is under the Universal Permissive License</span>
<span class="linenos">  4</span><span class="c1"># %%[markdown]</span>
<span class="linenos">  5</span><span class="c1"># WayFlow Code Example - How to connect MCP tools to Assistants</span>
<span class="linenos">  6</span><span class="c1"># -------------------------------------------------------------</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="c1"># How to use:</span>
<span class="linenos">  9</span><span class="c1"># Create a new Python virtual environment and install the latest WayFlow version.</span>
<span class="linenos"> 10</span><span class="c1"># ```bash</span>
<span class="linenos"> 11</span><span class="c1"># python -m venv venv-wayflowcore</span>
<span class="linenos"> 12</span><span class="c1"># source venv-wayflowcore/bin/activate</span>
<span class="linenos"> 13</span><span class="c1"># pip install --upgrade pip</span>
<span class="linenos"> 14</span><span class="c1"># pip install &quot;wayflowcore==26.1&quot; </span>
<span class="linenos"> 15</span><span class="c1"># ```</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="c1"># You can now run the script</span>
<span class="linenos"> 18</span><span class="c1"># 1. As a Python file:</span>
<span class="linenos"> 19</span><span class="c1"># ```bash</span>
<span class="linenos"> 20</span><span class="c1"># python howto_mcp.py</span>
<span class="linenos"> 21</span><span class="c1"># ```</span>
<span class="linenos"> 22</span><span class="c1"># 2. As a Notebook (in VSCode):</span>
<span class="linenos"> 23</span><span class="c1"># When viewing the file,</span>
<span class="linenos"> 24</span><span class="c1">#  - press the keys Ctrl + Enter to run the selected cell</span>
<span class="linenos"> 25</span><span class="c1">#  - or Shift + Enter to run the selected cell and move to the cell below# (UPL) 1.0 (LICENSE-UPL or https://oss.oracle.com/licenses/upl) or Apache License</span>
<span class="linenos"> 26</span><span class="c1"># 2.0 (LICENSE-APACHE or http://www.apache.org/licenses/LICENSE-2.0), at your option.</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 32</span><span class="c1">##Create a MCP Server</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="c1"># %%</span>
<span class="linenos"> 35</span><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server.fastmcp</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastMCP</span>
<span class="linenos"> 36</span>
<span class="linenos"> 37</span><span class="n">PAYSLIPS</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 38</span>    <span class="p">{</span>
<span class="linenos"> 39</span>        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">7612</span><span class="p">,</span>
<span class="linenos"> 40</span>        <span class="s2">&quot;Currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
<span class="linenos"> 41</span>        <span class="s2">&quot;PeriodStartDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/05/15&quot;</span><span class="p">,</span>
<span class="linenos"> 42</span>        <span class="s2">&quot;PeriodEndDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/06/15&quot;</span><span class="p">,</span>
<span class="linenos"> 43</span>        <span class="s2">&quot;PaymentDate&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 44</span>        <span class="s2">&quot;DocumentId&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 45</span>        <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 46</span>    <span class="p">},</span>
<span class="linenos"> 47</span>    <span class="p">{</span>
<span class="linenos"> 48</span>        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
<span class="linenos"> 49</span>        <span class="s2">&quot;Currency&quot;</span><span class="p">:</span> <span class="s2">&quot;CHF&quot;</span><span class="p">,</span>
<span class="linenos"> 50</span>        <span class="s2">&quot;PeriodStartDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2024/05/01&quot;</span><span class="p">,</span>
<span class="linenos"> 51</span>        <span class="s2">&quot;PeriodEndDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2024/06/01&quot;</span><span class="p">,</span>
<span class="linenos"> 52</span>        <span class="s2">&quot;PaymentDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2024/05/15&quot;</span><span class="p">,</span>
<span class="linenos"> 53</span>        <span class="s2">&quot;DocumentId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 54</span>        <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 55</span>    <span class="p">},</span>
<span class="linenos"> 56</span>    <span class="p">{</span>
<span class="linenos"> 57</span>        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
<span class="linenos"> 58</span>        <span class="s2">&quot;Currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
<span class="linenos"> 59</span>        <span class="s2">&quot;PeriodStartDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/06/15&quot;</span><span class="p">,</span>
<span class="linenos"> 60</span>        <span class="s2">&quot;PeriodEndDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/10/15&quot;</span><span class="p">,</span>
<span class="linenos"> 61</span>        <span class="s2">&quot;PaymentDate&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 62</span>        <span class="s2">&quot;DocumentsId&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 63</span>        <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 64</span>    <span class="p">},</span>
<span class="linenos"> 65</span><span class="p">]</span>
<span class="linenos"> 66</span>
<span class="linenos"> 67</span><span class="k">def</span><span class="w"> </span><span class="nf">create_server</span><span class="p">(</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="linenos"> 68</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and configure the MCP server&quot;&quot;&quot;</span>
<span class="linenos"> 69</span>    <span class="n">server</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span>
<span class="linenos"> 70</span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Example MCP Server&quot;</span><span class="p">,</span>
<span class="linenos"> 71</span>        <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;A MCP Server.&quot;</span><span class="p">,</span>
<span class="linenos"> 72</span>        <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span>
<span class="linenos"> 73</span>        <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
<span class="linenos"> 74</span>    <span class="p">)</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span>    <span class="nd">@server</span><span class="o">.</span><span class="n">tool</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Return session details for the current user&quot;</span><span class="p">)</span>
<span class="linenos"> 77</span>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_session</span><span class="p">():</span>
<span class="linenos"> 78</span>        <span class="k">return</span> <span class="p">{</span>
<span class="linenos"> 79</span>            <span class="s2">&quot;PersonId&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="linenos"> 80</span>            <span class="s2">&quot;Username&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob.b&quot;</span><span class="p">,</span>
<span class="linenos"> 81</span>            <span class="s2">&quot;DisplayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob B&quot;</span><span class="p">,</span>
<span class="linenos"> 82</span>        <span class="p">}</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span>    <span class="nd">@server</span><span class="o">.</span><span class="n">tool</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Return payslip details for a given PersonId&quot;</span><span class="p">)</span>
<span class="linenos"> 85</span>    <span class="k">def</span><span class="w"> </span><span class="nf">get_payslips</span><span class="p">(</span><span class="n">PersonId</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="linenos"> 86</span>        <span class="k">return</span> <span class="p">[</span><span class="n">payslip</span> <span class="k">for</span> <span class="n">payslip</span> <span class="ow">in</span> <span class="n">PAYSLIPS</span> <span class="k">if</span> <span class="n">payslip</span><span class="p">[</span><span class="s2">&quot;PersonId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">PersonId</span><span class="p">)]</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span>    <span class="k">return</span> <span class="n">server</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span><span class="k">def</span><span class="w"> </span><span class="nf">start_mcp_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 92</span>    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
<span class="linenos"> 93</span>    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8080</span>
<span class="linenos"> 94</span>    <span class="n">server</span> <span class="o">=</span> <span class="n">create_server</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
<span class="linenos"> 95</span>    <span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">transport</span><span class="o">=</span><span class="s2">&quot;sse&quot;</span><span class="p">)</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">/sse&quot;</span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span><span class="c1"># mcp_server_url = start_mcp_server() # &lt;--- Move the code above to a separate file then uncomment</span>
<span class="linenos">100</span>
<span class="linenos">101</span><span class="c1"># %%[markdown]</span>
<span class="linenos">102</span><span class="c1">## Imports for this guide</span>
<span class="linenos">103</span>
<span class="linenos">104</span><span class="c1"># %%</span>
<span class="linenos">105</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="n">FinishedStatus</span><span class="p">,</span> <span class="n">UserMessageRequestStatus</span>
<span class="linenos">106</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="linenos">107</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.mcp</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPTool</span><span class="p">,</span> <span class="n">MCPToolBox</span><span class="p">,</span> <span class="n">SSETransport</span><span class="p">,</span> <span class="n">enable_mcp_without_auth</span>
<span class="linenos">108</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="linenos">109</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolExecutionStep</span>
<span class="linenos">110</span>
<span class="linenos">111</span><span class="n">mcp_server_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://localhost:8080/sse&quot;</span> <span class="c1"># change to your own URL</span>
<span class="linenos">112</span><span class="c1"># We will see below how to connect a specific tool to an assistant, e.g.</span>
<span class="linenos">113</span><span class="n">MCP_TOOL_NAME</span> <span class="o">=</span> <span class="s2">&quot;get_user_session&quot;</span>
<span class="linenos">114</span><span class="c1"># And see how to build an agent that can answer questions, e.g.</span>
<span class="linenos">115</span><span class="n">USER_QUERY</span> <span class="o">=</span> <span class="s2">&quot;What was the payment date of the last payslip for the current user?&quot;</span>
<span class="linenos">116</span>
<span class="linenos">117</span><span class="c1"># %%[markdown]</span>
<span class="linenos">118</span><span class="c1">## Configure your LLM</span>
<span class="linenos">119</span>
<span class="linenos">120</span><span class="c1"># %%</span>
<span class="linenos">121</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>
<span class="linenos">122</span><span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
<span class="linenos">123</span>    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span><span class="p">,</span>
<span class="linenos">124</span>    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;LLAMA_API_URL&quot;</span><span class="p">,</span>
<span class="linenos">125</span><span class="p">)</span>
<span class="linenos">126</span>
<span class="linenos">127</span>
<span class="linenos">128</span><span class="c1"># %%[markdown]</span>
<span class="linenos">129</span><span class="c1">## Connecting an agent to the MCP server</span>
<span class="linenos">130</span>
<span class="linenos">131</span><span class="c1"># %%</span>
<span class="linenos">132</span><span class="n">enable_mcp_without_auth</span><span class="p">()</span> <span class="c1"># &lt;--- See https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization#security-considerations</span>
<span class="linenos">133</span><span class="n">mcp_client</span> <span class="o">=</span> <span class="n">SSETransport</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">mcp_server_url</span><span class="p">)</span>
<span class="linenos">134</span><span class="n">mcp_toolbox</span> <span class="o">=</span> <span class="n">MCPToolBox</span><span class="p">(</span><span class="n">client_transport</span><span class="o">=</span><span class="n">mcp_client</span><span class="p">)</span>
<span class="linenos">135</span>
<span class="linenos">136</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="linenos">137</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">138</span>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">mcp_toolbox</span><span class="p">]</span>
<span class="linenos">139</span><span class="p">)</span>
<span class="linenos">140</span>
<span class="linenos">141</span>
<span class="linenos">142</span><span class="c1"># %%[markdown]</span>
<span class="linenos">143</span><span class="c1">## Running the agent</span>
<span class="linenos">144</span>
<span class="linenos">145</span><span class="c1"># %%</span>
<span class="linenos">146</span><span class="c1"># With a linear conversation</span>
<span class="linenos">147</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="linenos">148</span>
<span class="linenos">149</span><span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="n">USER_QUERY</span><span class="p">)</span>
<span class="linenos">150</span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">151</span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">UserMessageRequestStatus</span><span class="p">):</span>
<span class="linenos">152</span>    <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
<span class="linenos">153</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt; </span><span class="si">{</span><span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="linenos">154</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">155</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid execution status, expected UserMessageRequestStatus, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">156</span>
<span class="linenos">157</span><span class="c1"># then continue the conversation</span>
<span class="linenos">158</span>
<span class="linenos">159</span><span class="c1"># %%[markdown]</span>
<span class="linenos">160</span><span class="c1">## Running with an execution loop</span>
<span class="linenos">161</span>
<span class="linenos">162</span><span class="c1"># %%</span>
<span class="linenos">163</span><span class="k">def</span><span class="w"> </span><span class="nf">run_agent_in_command_line</span><span class="p">(</span><span class="n">assistant</span><span class="p">:</span> <span class="n">Agent</span><span class="p">):</span>
<span class="linenos">164</span>    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">165</span>    <span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="linenos">166</span>
<span class="linenos">167</span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">168</span>        <span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">169</span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">170</span>            <span class="k">break</span>
<span class="linenos">171</span>        <span class="n">assistant_reply</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
<span class="linenos">172</span>        <span class="k">if</span> <span class="n">assistant_reply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">173</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Assistant &gt;&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">assistant_reply</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="linenos">174</span>        <span class="n">user_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">User &gt;&gt;&gt; &quot;</span><span class="p">)</span>
<span class="linenos">175</span>        <span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
<span class="linenos">176</span>
<span class="linenos">177</span><span class="c1"># run_agent_in_command_line(assistant)</span>
<span class="linenos">178</span><span class="c1"># ^ uncomment and execute</span>
<span class="linenos">179</span>
<span class="linenos">180</span><span class="c1"># %%[markdown]</span>
<span class="linenos">181</span><span class="c1">## Connecting a flow to the MCP server</span>
<span class="linenos">182</span>
<span class="linenos">183</span><span class="c1"># %%</span>
<span class="linenos">184</span><span class="n">mcp_tool</span> <span class="o">=</span> <span class="n">MCPTool</span><span class="p">(</span>
<span class="linenos">185</span>    <span class="n">name</span><span class="o">=</span><span class="n">MCP_TOOL_NAME</span><span class="p">,</span>
<span class="linenos">186</span>    <span class="n">client_transport</span><span class="o">=</span><span class="n">mcp_client</span>
<span class="linenos">187</span><span class="p">)</span>
<span class="linenos">188</span>
<span class="linenos">189</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span>
<span class="linenos">190</span>    <span class="n">ToolExecutionStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mcp_tool_step&quot;</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">mcp_tool</span><span class="p">)</span>
<span class="linenos">191</span><span class="p">])</span>
<span class="linenos">192</span>
<span class="linenos">193</span><span class="c1"># %%[markdown]</span>
<span class="linenos">194</span><span class="c1">## Running the flow</span>
<span class="linenos">195</span>
<span class="linenos">196</span><span class="c1"># %%</span>
<span class="linenos">197</span><span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">198</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>
<span class="linenos">199</span>
<span class="linenos">200</span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">201</span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">202</span>    <span class="n">flow_outputs</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="linenos">203</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">Flow outputs &gt;&gt;&gt; </span><span class="si">{</span><span class="n">flow_outputs</span><span class="si">}</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="linenos">204</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">205</span>    <span class="nb">print</span><span class="p">(</span>
<span class="linenos">206</span>        <span class="sa">f</span><span class="s2">&quot;Invalid execution status, expected FinishedStatus, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="linenos">207</span>    <span class="p">)</span>
<span class="linenos">208</span>
<span class="linenos">209</span><span class="c1"># %%[markdown]</span>
<span class="linenos">210</span><span class="c1">## Export config to Agent Spec</span>
<span class="linenos">211</span>
<span class="linenos">212</span><span class="c1"># %%</span>
<span class="linenos">213</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>
<span class="linenos">214</span>
<span class="linenos">215</span><span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">assistant</span><span class="p">)</span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="c1"># %%[markdown]</span>
<span class="linenos">218</span><span class="c1">## Load Agent Spec config</span>
<span class="linenos">219</span>
<span class="linenos">220</span><span class="c1"># %%</span>
<span class="linenos">221</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>
<span class="linenos">222</span>
<span class="linenos">223</span><span class="n">assistant</span><span class="p">:</span> <span class="n">Flow</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">()</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisite-setup-a-simple-mcp-server">Prerequisite: Setup a simple MCP Server</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-an-agent-to-the-mcp-server">Connecting an Agent to the MCP Server</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-imports-and-configure-an-llm">Add imports and configure an LLM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-the-agent">Build the Agent</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-agent">Running the Agent</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-a-flow-to-the-mcp-server">Connecting a Flow to the MCP Server</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-the-flow">Build the Flow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-flow">Running the Flow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-loading-with-agent-spec">Exporting/Loading with Agent Spec</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#full-code">Full code</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>