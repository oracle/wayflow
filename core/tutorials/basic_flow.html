


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Build a Simple Fixed-Flow Assistant with Flows &#8212; wayflowcore 26.1.0.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=dba54f56160742ef5599"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599" />

  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'core/tutorials/basic_flow';</script>
  <script src="../../_static/announcement.js"></script>

    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Build a Simple Code Review Assistant" href="usecase_prbot.html" />
    <link rel="prev" title="Build a Simple Conversational Assistant with Agents" href="basic_agent.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="26.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
    <img src="../../_static/logo-dark.svg" class="logo__image only-dark pst-js-only" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Tutorials &amp; Use Cases</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic_agent.html">Build a Simple Conversational Assistant with Agents</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Build a Simple Fixed-flow Assistant with Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="usecase_prbot.html">Build a Simple Code Review Assistant</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howtoguides/index.html">How-to Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/io_descriptors.html">Change Input and Output Descriptors of Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_async.html">Use Asynchronous APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/agents.html">Create a ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_imagecontent.html">How to Send Images to LLMs and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_prompttemplate.html">Use Templates for Advanced Prompting Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_userinputinflows.html">Ask for User Input in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/conditional_flows.html">Create Conditional Transitions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/promptexecutionstep.html">Do Structured LLM Generation in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_userconfirmation.html">Add User Confirmation to a Tool Call Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/catching_exceptions.html">Catch Exceptions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mapstep.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_agents_in_flows.html">Use Agents in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_multiagent.html">Build a Hierarchical Multi-Agent System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_swarm.html">Build a Swarm of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_managerworkers.html">Build a ManagerWorkers of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_build_assistants_with_tools.html">Build Assistants with Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_multiple_output_tool.html">Create Tools with Multiple Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/create_a_tool_from_a_flow.html">Convert Flows to Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mcp.html">Connect MCP tools to Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_remote_tool_expired_token.html">Do Remote API Calls with Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_execute_agentspec_with_wayflowcore.html">Load and Execute an Agent Spec Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_serdeser.html">Serialize and Deserialize Flows and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_serialize_conversations.html">Serialize and Deserialize Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/installing_ollama.html">Install and Use Ollama</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_tracing.html">Enable Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_datastores.html">Connect Assistants to Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/embeddingmodels_from_different_providers.html">Use Embedding Models from Different Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_evaluation.html">How to Evaluate WayFlow Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_conversation_evaluation.html">How to Evaluate Assistant Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_variable.html">Use Variables for Shared State in Flows</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/agentspec.html">Agent Spec Adapters</a></li>

<li class="toctree-l2"><a class="reference internal" href="../api/conversation.html">Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/flows.html">Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/embeddingmodels.html">Embedding Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/contextproviders.html">Context Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/interrupts.html">Execution Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prompttemplate.html">PromptTemplates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialization.html">Serialization/Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/datastores.html">Datastores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/warnings.html">Warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/evaluation.html">Evaluation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">For Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">WayFlow</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Build a Simple Fixed-Flow Assistant with Flows</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="build-a-simple-fixed-flow-assistant-with-flows">
<span id="core-basic-flow"></span><h1>Build a Simple Fixed-Flow Assistant with Flows<a class="headerlink" href="#build-a-simple-fixed-flow-assistant-with-flows" title="Permalink to this heading">#</a></h1>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
<a class="reference internal" href="../../_images/python-icon.svg"><img alt="python-icon" height="40px" src="../../_images/python-icon.svg" width="40px" /></a> Download Python Script</div>
<p class="sd-card-text">Python script/notebook for this guide.</p>
</div>
<a class="sd-stretched-link sd-hide-link-text reference external" href="../end_to_end_code_examples/tutorial_flow.py"><span>Simple flow tutorial script</span></a></div>
</div>
</div>
</div>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites</p>
<p>This guide does not assume any prior knowledge about WayFlow. However, it assumes the reader has a
basic knowledge of Large Language Models (LLMs).</p>
<p>You will need a working installation of WayFlow - see <a class="reference internal" href="../installation.html"><span class="doc">Installation</span></a>.</p>
</div>
<section id="learning-goals">
<h2>Learning goals<a class="headerlink" href="#learning-goals" title="Permalink to this heading">#</a></h2>
<p>In this tutorial, you will develop a simple HR chatbot that answers an employee’s HR-related questions.</p>
<p>By doing this tutorial, you will:</p>
<ol class="arabic simple">
<li><p>Learn the basics of using a <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> to build an assistant.</p></li>
<li><p>Learn how to pass values around in WayFlow.</p></li>
<li><p>Learn how to use some of the more common types of steps.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Another type of assistant supported by WayFlow is <a class="reference internal" href="../api/agent.html#agent"><span class="std std-ref">Agents</span></a>. To learn more about building conversational
assistants with Agents, check out the <a class="reference internal" href="basic_agent.html"><span class="doc">Build a Simple Agents tutorial</span></a>.</p>
</div>
</section>
<section id="a-primer-on-flows">
<span id="primer-on-flows"></span><h2>A primer on Flows<a class="headerlink" href="#a-primer-on-flows" title="Permalink to this heading">#</a></h2>
<p>A <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> is a type of assistant composed of individual <strong>Steps</strong> connected to form a coherent sequence of actions. By
using a flow-based approach WayFlow can tackle a wide range of business processes and tasks.</p>
<p>Each step in the <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> performs a specific function. The flow you will build in this tutorial uses the following types
of steps:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/flows.html#inputmessagestep"><span class="std std-ref">InputMessageStep</span></a>: This gathers input from the user.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>: In this case it runs a Python function that fetches data from another system. <code class="docutils literal notranslate"><span class="pre">Tools</span></code> can do more than this. Take a look at <a class="reference internal" href="../api/tools.html#servertool"><span class="std std-ref">ServerTools</span></a> and <a class="reference internal" href="../api/tools.html#clienttool"><span class="std std-ref">ClientTools</span></a> to find out more.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a>: This executes a prompt using a Large Language Model (LLM) and supports inserting data from other steps into the prompt.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a>: This is used to display information to the user.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For advanced LLM users: Typically, an LLM chatbot maintains a chat history to support multi-turn conversations—this is referred to as an <a class="reference internal" href="../api/agent.html#agent"><span class="std std-ref">Agent</span></a>.
In contrast, the <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> is a stateless function that simply calls the model to generate an output based on the provided input prompt.</p>
</div>
</section>
<section id="building-the-flow">
<span id="id1"></span><h2>Building the flow<a class="headerlink" href="#building-the-flow" title="Permalink to this heading">#</a></h2>
<p>In this tutorial, you will create an HR chatbot that answers a user’s HR-related queries. You will do this by building a fixed-flow assistant
using Python code.</p>
<p>The chatbot will need to perform the following steps, in order, to answer a user’s HR questions.</p>
<ol class="arabic simple">
<li><p>The user is greeted and prompted for a question.</p></li>
<li><p>The user inputs their question to the assistant.</p></li>
<li><p>The assistant uses a tool to search for the requested information, querying an HR system.</p></li>
<li><p>The assistant uses an LLM to answer the user’s question using the data retrieved in the previous step.</p></li>
<li><p>The assistant returns the answer generated by the LLM to the user.</p></li>
</ol>
<p>Given that you know what logical steps the assistant needs to perform to achieve the goal, how do you turn this into a working WayFlow assistant?</p>
<p>Turning the above logical steps into code can be broken down into several steps, each taking you towards the finished assistant. The rest of
this tutorial addresses these tasks.</p>
</section>
<section id="setup-a-jupyter-notebook">
<h2>Setup a Jupyter Notebook<a class="headerlink" href="#setup-a-jupyter-notebook" title="Permalink to this heading">#</a></h2>
<p>You can follow along with this tutorial by creating a Jupyter Notebook. Ensure that <code class="docutils literal notranslate"><span class="pre">wayflowcore</span></code> is installed — see the <a class="reference internal" href="../installation.html"><span class="doc">installation</span></a>
instructions for details.</p>
<p>Alternatively, you can use any Python environment to run the code in this tutorial.</p>
</section>
<section id="imports-and-llm-configuration">
<h2>Imports and LLM configuration<a class="headerlink" href="#imports-and-llm-configuration" title="Permalink to this heading">#</a></h2>
<p>First import what is needed for this tutorial:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">textwrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">dedent</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Create an LLM model to use later in the tutorial.</span>
<span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>
<span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos">10</span>    <span class="n">CompleteStep</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="n">InputMessageStep</span><span class="p">,</span>
<span class="linenos">12</span>    <span class="n">OutputMessageStep</span><span class="p">,</span>
<span class="linenos">13</span>    <span class="n">PromptExecutionStep</span><span class="p">,</span>
<span class="linenos">14</span>    <span class="n">StartStep</span><span class="p">,</span>
<span class="linenos">15</span>    <span class="n">ToolExecutionStep</span><span class="p">,</span>
<span class="linenos">16</span><span class="p">)</span>
<span class="linenos">17</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
</pre></div>
</div>
<p>WayFlow supports several LLM API providers. First choose an LLM from one of the options below:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">OCI GenAI</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">vLLM</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Ollama</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OCIGenAIModel</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">llm</span> <span class="o">=</span> <span class="n">OCIGenAIModel</span><span class="p">(</span>
        <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;provider.model-id&quot;</span><span class="p">,</span>
        <span class="n">service_endpoint</span><span class="o">=</span><span class="s2">&quot;https://url-to-service-endpoint.com&quot;</span><span class="p">,</span>
        <span class="n">compartment_id</span><span class="o">=</span><span class="s2">&quot;compartment-id&quot;</span><span class="p">,</span>
        <span class="n">auth_type</span><span class="o">=</span><span class="s2">&quot;API_KEY&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;VLLM_HOST_PORT&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OllamaModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">OllamaModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>API keys should never be stored in code. Use environment variables and/or tools such as <a class="reference external" href="https://pypi.org/project/python-dotenv/">python-dotenv</a>
instead.</p>
</div>
</section>
<section id="naming-data">
<h2>Naming data<a class="headerlink" href="#naming-data" title="Permalink to this heading">#</a></h2>
<p>Passing values between steps is a very common occurrence when building Flows. This is done using <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdges</span></a> which define
that a value is passed from one step to another.</p>
<p>A step has input and output descriptors, which describe what values it requires to run and what values it produces. These can be thought of as
names that describe the step’s inputs and outputs.</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> will be automatically inferred from any input from the step class that supports Jinja templating.
Parameters in a Jinja template look like this: <code class="docutils literal notranslate"><span class="pre">{{this_is_a_template_parameter}}</span></code>. Additionally, input descriptors can be inferred from
other sources, such as the input parameters schemas of the <code class="docutils literal notranslate"><span class="pre">tool</span></code> for the <code class="docutils literal notranslate"><span class="pre">ToolExecutionStep</span></code>. There will be one input descriptor for each
parameter in the template, with a name taken from the parameter. Similarly, there will be one input descriptor for each parameter required by a <code class="docutils literal notranslate"><span class="pre">tool</span></code>.</p>
<p>Output descriptors can also be considered names for a step’s outputs. For many steps, there will be a default name for each output. For example,
for a <code class="docutils literal notranslate"><span class="pre">ToolExecutionStep</span></code> the default name for the output of the step is <code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.TOOL_OUTPUT</span></code>.</p>
<p>Input and output descriptors can be renamed using either <code class="docutils literal notranslate"><span class="pre">input_mappings</span></code>, or <code class="docutils literal notranslate"><span class="pre">output_mappings</span></code> allowing for more meaningful names.</p>
<p>Where we need to reference input and output descriptors in the code we use a variable to hold the name. Doing this eliminates errors related to typos.</p>
<p>Below are the names you will use for the values passed around in this tutorial.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Names for the input parameters of the steps in the flow.</span>
<span class="linenos">2</span><span class="n">HR_QUERY</span> <span class="o">=</span> <span class="s2">&quot;user_query&quot;</span>
<span class="linenos">3</span><span class="n">TOOL_QUERY</span> <span class="o">=</span> <span class="s2">&quot;query&quot;</span>
<span class="linenos">4</span><span class="n">HR_DATA_CONTEXT</span> <span class="o">=</span> <span class="s2">&quot;hr_data_context&quot;</span>
<span class="linenos">5</span><span class="n">QUERY_ANSWER</span> <span class="o">=</span> <span class="s2">&quot;answer&quot;</span>
<span class="linenos">6</span><span class="n">USER_QUESTION</span> <span class="o">=</span> <span class="s2">&quot;user_question&quot;</span>
</pre></div>
</div>
<p>Later in this tutorial, you will examine in detail how passing values works.</p>
</section>
<section id="specifying-the-steps">
<h2>Specifying the steps<a class="headerlink" href="#specifying-the-steps" title="Permalink to this heading">#</a></h2>
<p>The flow follows a simple sequence of logical steps that were defined earlier in the tutorial. They consist of prompting the user for a question,
searching the HR system for the required information, using an LLM to generate an answer from the retrieved data, and finally answering the user.</p>
<p>In a nutshell, the flow consists of the following steps in order:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/flows.html#startstep"><span class="std std-ref">StartStep</span></a>: Acts as a starting point for the flow. It does nothing, and this is not strictly required, but if you exclude it, you will get a warning message.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#inputmessagestep"><span class="std std-ref">InputMessageStep</span></a>: Where the user is asked for input - the question the user wants to ask.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>: Queries the HR system to look up the relevant to the user’s query.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a>: Uses an LLM to ingest and interpret the HR data and the user’s query to generate an answer.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a>: Displays the answer generated in the previous step to the user.</p></li>
</ul>
<p>You now need to build each of the steps used in the flow.</p>
<section id="start-step">
<h3>START_STEP<a class="headerlink" href="#start-step" title="Permalink to this heading">#</a></h3>
<p>This is where the flow starts. It can take in a string to display to the user, but it is being used only as a starting point for the flow. The
message to the user is displayed in the <code class="docutils literal notranslate"><span class="pre">USER_INPUT_STEP</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># A start step. This is where the flow starts.</span>
<span class="linenos">2</span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span> <span class="n">input_descriptors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="user-input-step">
<h3>USER_INPUT_STEP<a class="headerlink" href="#user-input-step" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">InputMessageStep</span></code> prompts the user for information and saves the response for subsequent use. This step requires at least a message
template, which defines the prompt presented to the user. In this context, the user is welcomed and asked to provide their HR-related question.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> is used to specify a new, more meaningful name for the <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code> of the step. By default, the <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code>
for the value produced by the step is <code class="docutils literal notranslate"><span class="pre">InputMessageStep.USER_PROVIDED_INPUT</span></code>. It is important to remember that the value is not held in this; this
is only the default name for the <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code>. A more meaningful name would be useful, so the <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code> is renamed to the value
in <code class="docutils literal notranslate"><span class="pre">HR_QUERY</span></code>. When accessing the output value of this step in a <code class="docutils literal notranslate"><span class="pre">DataFlowEdge</span></code>, the name in <code class="docutils literal notranslate"><span class="pre">HR_QUERY</span></code> can be used.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">user_input_message_template</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 3</span><span class="sd">    I am an HR Assistant, designed to answer your questions about HR matters.</span>
<span class="linenos"> 4</span><span class="sd">    What kinds of questions do you have today?</span>
<span class="linenos"> 5</span><span class="sd">    Example of HR topics:</span>
<span class="linenos"> 6</span><span class="sd">    - Employee benefits</span>
<span class="linenos"> 7</span><span class="sd">    - Salaries</span>
<span class="linenos"> 8</span><span class="sd">    - Career advancement</span>
<span class="linenos"> 9</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">10</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="n">user_input_step</span> <span class="o">=</span> <span class="n">InputMessageStep</span><span class="p">(</span>
<span class="linenos">13</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_input_step&quot;</span><span class="p">,</span>
<span class="linenos">14</span>    <span class="n">message_template</span><span class="o">=</span><span class="n">user_input_message_template</span><span class="p">,</span>
<span class="linenos">15</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">InputMessageStep</span><span class="o">.</span><span class="n">USER_PROVIDED_INPUT</span><span class="p">:</span> <span class="n">HR_QUERY</span><span class="p">},</span>
<span class="linenos">16</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="hr-lookup-step">
<h3>HR_LOOKUP_STEP<a class="headerlink" href="#hr-lookup-step" title="Permalink to this heading">#</a></h3>
<p>In this case the <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a> executes a tool, a decorated Python function, with the passed in query. Here, for
simplicity, the tool is mocked out and always returns the same data. The mock data contains HR information for two fictional employees,
<code class="docutils literal notranslate"><span class="pre">John</span> <span class="pre">Smith</span></code> and <code class="docutils literal notranslate"><span class="pre">Mary</span> <span class="pre">Jones</span></code>.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> is used to specify a new, more meaningful name for the <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code> of this step. By default, the <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code>
for the value produced by this step is <code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.TOOL_OUTPUT</span></code>. It is renamed to the more meaningful name in <code class="docutils literal notranslate"><span class="pre">HR_DATA_CONTEXT</span></code>.
This name can be used in a <code class="docutils literal notranslate"><span class="pre">DataFlowEdge</span></code> to access the output value of the step.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1"># A tool which will run a query on the HR system and return some data.</span>
<span class="linenos"> 4</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">,</span> <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">HR_DATA_CONTEXT</span><span class="p">)])</span>
<span class="linenos"> 5</span><span class="k">def</span><span class="w"> </span><span class="nf">search_hr_database</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Function that searches the HR database for employee benefits.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="sd">    Parameters</span>
<span class="linenos"> 9</span><span class="sd">    ----------</span>
<span class="linenos">10</span><span class="sd">    query:</span>
<span class="linenos">11</span><span class="sd">        a query string</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="sd">    Returns</span>
<span class="linenos">14</span><span class="sd">    -------</span>
<span class="linenos">15</span><span class="sd">        a JSON response</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">18</span>    <span class="c1"># Returns mock data.</span>
<span class="linenos">19</span>    <span class="k">return</span> <span class="s1">&#39;{&quot;John Smith&quot;: {&quot;benefits&quot;: &quot;Unlimited PTO&quot;, &quot;salary&quot;: &quot;$1,000&quot;}, &quot;Mary Jones&quot;: {&quot;benefits&quot;: &quot;25 days&quot;, &quot;salary&quot;: &quot;$10,000&quot;}}&#39;</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="c1"># Step that runs the lookup of a query using the tool.</span>
<span class="linenos">22</span><span class="n">hr_lookup_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos">23</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hr_lookup_step&quot;</span><span class="p">,</span>
<span class="linenos">24</span>    <span class="n">tool</span><span class="o">=</span><span class="n">search_hr_database</span><span class="p">,</span>
<span class="linenos">25</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="llm-answer-step">
<h3>LLM_ANSWER_STEP<a class="headerlink" href="#llm-answer-step" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> executes a prompt using an LLM. It requires a prompt template and an LLM(s) to do so.</p>
<p>As in the <code class="docutils literal notranslate"><span class="pre">USER_INPUT_STEP</span></code>, the LLM’s <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code> is replaced with a more meaningful name.
The default <code class="docutils literal notranslate"><span class="pre">output_descriptor</span></code> for the output of <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> is <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep.OUTPUT</span></code>. It is renamed to the value
held in <code class="docutils literal notranslate"><span class="pre">QUERY_ANSWER</span></code>. This name can be used in a <code class="docutils literal notranslate"><span class="pre">DataFlowEdge</span></code> to access the output value of the step.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># The template for the prompt to be used by the LLM. Notice the use of parameters</span>
<span class="linenos"> 2</span><span class="c1"># such as, {{ user_question }}. The template is evaluated using the parameters that</span>
<span class="linenos"> 3</span><span class="c1"># are passed into the PromptExecutionStep.</span>
<span class="linenos"> 4</span><span class="n">hrassistant_prompt_template</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="sd">    You are a knowledgeable, factual, and helpful HR assistant that can answer simple \</span>
<span class="linenos"> 7</span><span class="sd">    HR-related questions like salary and benefits.</span>
<span class="linenos"> 8</span><span class="sd">    Your task:</span>
<span class="linenos"> 9</span><span class="sd">        - Based on the HR data given below, answer the user&#39;s question</span>
<span class="linenos">10</span><span class="sd">    Important:</span>
<span class="linenos">11</span><span class="sd">        - Be helpful and concise in your messages</span>
<span class="linenos">12</span><span class="sd">        - Do not tell the user any details not mentioned in the tool response, let&#39;s be factual.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="sd">    Here is the User question:</span>
<span class="linenos">15</span><span class="sd">    - {{ user_question }}</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="sd">    Here is the HR data:</span>
<span class="linenos">18</span><span class="sd">    - {{ hr_data_context }}</span>
<span class="linenos">19</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">20</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="c1"># Step that evaluates the prompt template and then passes the prompt to the LLM.</span>
<span class="linenos">23</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="n">llm_answer_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="linenos">26</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_answer_step&quot;</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="n">hrassistant_prompt_template</span><span class="p">,</span>
<span class="linenos">28</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">29</span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">QUERY_ANSWER</span><span class="p">)],</span>
<span class="linenos">30</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="user-output-step">
<h3>USER_OUTPUT_STEP<a class="headerlink" href="#user-output-step" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">OutputMessageStep</span></code> displays information to the user. It uses a message template to generate the output.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Step that outputs the answer to the user&#39;s query.</span>
<span class="linenos">2</span><span class="n">user_output_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span>
<span class="linenos">3</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_output_step&quot;</span><span class="p">,</span>
<span class="linenos">4</span>    <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;My Assistant&#39;s Response: {{ answer }}&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="step-transitions">
<h2>Step transitions<a class="headerlink" href="#step-transitions" title="Permalink to this heading">#</a></h2>
<p>The Flow is almost done, you just need to specify the <strong>control flow</strong>, i.e., the transitions between the steps defined earlier.
These are straightforward here as you are building a “sequential” flow. Note that the final step, displaying the
answer to the user, transitions <code class="docutils literal notranslate"><span class="pre">CompleteStep()</span></code> - a step that acts as a termination point for the flow.
Alternatively, it can also transition back to the <code class="docutils literal notranslate"><span class="pre">USER_INPUT_STEP</span></code>, giving the user another opportunity to chat
with the fixed-flow assistant.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Define the transitions between the steps.</span>
<span class="linenos">2</span><span class="n">control_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">3</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">),</span>
<span class="linenos">4</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">),</span>
<span class="linenos">5</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">),</span>
<span class="linenos">6</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">),</span>
<span class="linenos">7</span>    <span class="c1"># Note: you can use a CompleteStep as the termination of the flow.</span>
<span class="linenos">8</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">CompleteStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;final_step&quot;</span><span class="p">)),</span>
<span class="linenos">9</span><span class="p">]</span>
</pre></div>
</div>
<p>In addition to defining the transitions, you must specify the <strong>data flow</strong>, i.e., how values are passed from one step to the next.
This is done using <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdges</span></a>. Each <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdge</span></a> has a <code class="docutils literal notranslate"><span class="pre">source_step</span></code>
which defines the source step for the value, a <code class="docutils literal notranslate"><span class="pre">source_output</span></code> that is the name of the value, a <code class="docutils literal notranslate"><span class="pre">destination_step</span></code>
that defines which step the value will be consumed by, and a <code class="docutils literal notranslate"><span class="pre">destination_input</span></code> which is the name of the input
parameter for the destination step which will consume the value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Define the data flows between steps.</span>
<span class="linenos"> 2</span><span class="n">data_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 3</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos"> 4</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">,</span>
<span class="linenos"> 5</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">HR_QUERY</span><span class="p">,</span>
<span class="linenos"> 6</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">,</span>
<span class="linenos"> 7</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">TOOL_QUERY</span><span class="p">,</span>
<span class="linenos"> 8</span>    <span class="p">),</span>
<span class="linenos"> 9</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">10</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">,</span>
<span class="linenos">11</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">HR_QUERY</span><span class="p">,</span>
<span class="linenos">12</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span>
<span class="linenos">13</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">USER_QUESTION</span><span class="p">,</span>
<span class="linenos">14</span>    <span class="p">),</span>
<span class="linenos">15</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">16</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">,</span>
<span class="linenos">17</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">HR_DATA_CONTEXT</span><span class="p">,</span>
<span class="linenos">18</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span>
<span class="linenos">19</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">HR_DATA_CONTEXT</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="p">),</span>
<span class="linenos">21</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">22</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span>
<span class="linenos">23</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">QUERY_ANSWER</span><span class="p">,</span>
<span class="linenos">24</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">,</span>
<span class="linenos">25</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">QUERY_ANSWER</span><span class="p">,</span>
<span class="linenos">26</span>    <span class="p">),</span>
<span class="linenos">27</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="creating-the-assistant">
<h2>Creating the assistant<a class="headerlink" href="#creating-the-assistant" title="Permalink to this heading">#</a></h2>
<p>Finally, you create the flow by using the <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> class.</p>
<p>You set the initial step to be the <code class="docutils literal notranslate"><span class="pre">begin_step</span></code> and pass in <code class="docutils literal notranslate"><span class="pre">control_flow_edges</span></code> and <code class="docutils literal notranslate"><span class="pre">data_flow_edges</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Create the flow passing in the steps, the name of the step to start with, the control_flow_edges and the data_flow_edges.</span>
<span class="linenos">2</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">3</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="linenos">4</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="n">control_flow_edges</span><span class="p">,</span>
<span class="linenos">5</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="n">data_flow_edges</span><span class="p">,</span>
<span class="linenos">6</span><span class="p">)</span>
</pre></div>
</div>
<p>This completes the fixed-flow HR assistant.</p>
</section>
<section id="running-the-assistant">
<h2>Running the assistant<a class="headerlink" href="#running-the-assistant" title="Permalink to this heading">#</a></h2>
<p>Before we run the assistant, what are some questions that you could ask it? The following questions can be answered from the dummy HR data and are
a good starting point.</p>
<ol class="arabic simple">
<li><p><cite>What is the salary for John Smith?</cite></p></li>
<li><p><cite>Does John Smith earn more that Mary Jones?</cite></p></li>
<li><p><cite>How much annual leave does John Smith get?</cite></p></li>
</ol>
<p>But, we can also ask the assistant questions that it shouldn’t be able to answer, because it hasn’t been given any data that is relevant to the
question:</p>
<ol class="arabic simple">
<li><p><cite>How much does Jones Jones earn?</cite></p></li>
<li><p><cite>What is Mary Jones favorite color?</cite></p></li>
</ol>
<p>So with some questions ready you can now run the assistant. Within the example code below you will pass one of these questions to the assistant.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to create an assistant that answers one question and then returns to the beginning to start over. This could be done by connecting the
final step back to the user input step in the final <code class="docutils literal notranslate"><span class="pre">ControlFlowEdge</span></code>, as shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ControlFlowEdge</span><span class="p">(</span>
   <span class="n">source_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">,</span>
   <span class="n">destination_step</span><span class="o">=</span><span class="n">user_input_step</span>
<span class="p">),</span>
</pre></div>
</div>
</div>
<p>Run the code below to run the assistant. It will ask the assistant a single one of the above question ane exit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Start a conversation.</span>
<span class="linenos"> 2</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Execute the assistant.</span>
<span class="linenos"> 5</span><span class="c1"># This will print out the message to the user, then stop at the user input step.</span>
<span class="linenos"> 6</span><span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Ask a question of the assistant by appending a user message.</span>
<span class="linenos"> 9</span><span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="s2">&quot;Does John Smith earn more that Mary Jones?&quot;</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1"># Execute the assistant again. Continues from the UserInputStep.</span>
<span class="linenos">12</span><span class="c1"># As there are no other steps the flow will run to the end.</span>
<span class="linenos">13</span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1"># &quot;output_message&quot; is the default key name for the output value</span>
<span class="linenos">16</span><span class="c1"># of the OutputMessageStep.</span>
<span class="linenos">17</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="n">FinishedStatus</span>
<span class="linenos">18</span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">19</span>    <span class="n">answer</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">]</span>
<span class="linenos">20</span>    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
<span class="linenos">21</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">22</span>    <span class="nb">print</span><span class="p">(</span>
<span class="linenos">23</span>        <span class="sa">f</span><span class="s2">&quot;Incorrect execution status, expected FinishedStatus, got </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="linenos">24</span>    <span class="p">)</span>
</pre></div>
</div>
<p>The process can be summarized as follows.</p>
<p>The HR Assistant first prints the welcome message defined above. Next, it captures the user’s question - here you pass in a question using
<code class="docutils literal notranslate"><span class="pre">conversation.append_user_message</span></code>. It processes the input through the predefined steps and transitions, and finally returns the output.</p>
<p>Congratulations, you have built your first fixed-flow assistant!</p>
</section>
<section id="agent-spec-exporting-loading">
<h2>Agent Spec Exporting/Loading<a class="headerlink" href="#agent-spec-exporting-loading" title="Permalink to this heading">#</a></h2>
<p>You can export the assistant configuration to its Agent Spec configuration using the <code class="docutils literal notranslate"><span class="pre">AgentSpecExporter</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>

<span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">assistant</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is what the <strong>Agent Spec representation will look like ↓</strong></p>
<details class="summary-click-here-to-see-the-assistant-configuration">
<summary>Click here to see the assistant configuration.</summary><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">JSON</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bf3ca5b3-39bc-40ca-9d9a-a387bee07031&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flow_e057bcd6__auto&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the input value provided by the user&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;output_message&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;91594dfc-44fa-41d9-91ba-52ae7b0b0f16&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;91594dfc-44fa-41d9-91ba-52ae7b0b0f16&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a71aebf8-0416-4811-bb89-6cf4627dc170&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_step_to_user_input_step_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;91594dfc-44fa-41d9-91ba-52ae7b0b0f16&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b2e0fb5c-8b57-4c32-9261-bd036ee607c1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_input_step_to_hr_lookup_step_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4d1bea5b-0c63-4042-891b-aca964e1640f&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_lookup_step_to_llm_answer_step_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9323cd7b-5da2-46b6-8333-46ac19d22d4d&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm_answer_step_to_user_output_step_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e8075a13-3e48-4611-b68f-aa10423309ec&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_output_step_to_final_step_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1a76f7f9-19b0-438e-aa3e-274dc06d4aa2&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_input_step_user_query_to_hr_lookup_step_query_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;query&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f4a11a6e-0b79-4ede-8673-30ad1b79af2d&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_input_step_user_query_to_llm_answer_step_user_question_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_question&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ee8b7cdd-762a-4202-b320-d71dab6d6318&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_lookup_step_hr_data_context_to_llm_answer_step_hr_data_context_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ac2e45dc-75c2-427f-8c75-1114aeda295d&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm_answer_step_answer_to_user_output_step_answer_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cae80dba-f95a-4a24-9b93-684928a23b11&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_input_step_user_query_to_final_step_user_query_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fe0c03de-5f80-4575-8d0e-605211ab9b3c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_lookup_step_hr_data_context_to_final_step_hr_data_context_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a22200bc-dbba-4658-aeb1-0ddced3beb3e&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm_answer_step_answer_to_final_step_answer_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;de05873e-c565-41be-a3f8-f9c6600e4f57&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_output_step_output_message_to_final_step_output_message_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;output_message&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;output_message&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedToolNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;819ae9c0-4055-4fe6-ab05-f03c45775206&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_lookup_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;query&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;tool&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ServerTool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6ca8f0ef-2496-4c9b-bbea-ca6e5969c07e&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;search_hr_database&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Function that searches the HR database for employee benefits.\n\nParameters\n----------\nquery:\n    a query string\n\nReturns\n-------\n    a JSON response&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;query&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;raise_exceptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginInputMessageNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c79bea59-c54b-4a54-8ac5-df6daaa60d22&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_input_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the input value provided by the user&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;user_provided_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;message_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\nI am an HR Assistant, designed to answer your questions about HR matters.\nWhat kinds of questions do you have today?\nExample of HR topics:\n- Employee benefits\n- Salaries\n- Career advancement\n&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;rephrase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LlmNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d9b795cd-3949-4acb-9399-6d9f0a10d7e6&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm_answer_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;user_question\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_question&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;hr_data_context\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VllmConfig&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;22ce9b88-6c3f-40a4-88f9-2f81a7960993&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;default_generation_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_API_URL&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;prompt_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\nYou are a knowledgeable, factual, and helpful HR assistant that can answer simple     HR-related questions like salary and benefits.\nYour task:\n    - Based on the HR data given below, answer the user&#39;s question\nImportant:\n    - Be helpful and concise in your messages\n    - Do not tell the user any details not mentioned in the tool response, let&#39;s be factual.\n\nHere is the User question:\n- {{ user_question }}\n\nHere is the HR data:\n- {{ hr_data_context }}\n&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginOutputMessageNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01c4a5ff-6568-42a0-a8de-8efaec780712&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_output_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;answer\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;output_message&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;expose_message_as_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;My Assistant&#39;s Response: {{ answer }}&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;message_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AGENT&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;rephrase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;953ccf06-5550-4597-9518-df1043269693&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;final_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the input value provided by the user&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;output_message&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the input value provided by the user&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_query&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hr_data_context&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;output_message&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;final_step&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;91594dfc-44fa-41d9-91ba-52ae7b0b0f16&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;91594dfc-44fa-41d9-91ba-52ae7b0b0f16&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;agentspec_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bf3ca5b3-39bc-40ca-9d9a-a387bee07031</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flow_e057bcd6__auto</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">outputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the input value provided by the user</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output_message</span>
<span class="nt">start_node</span><span class="p">:</span>
<span class="w">  </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">91594dfc-44fa-41d9-91ba-52ae7b0b0f16</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">91594dfc-44fa-41d9-91ba-52ae7b0b0f16</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01c4a5ff-6568-42a0-a8de-8efaec780712</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a71aebf8-0416-4811-bb89-6cf4627dc170</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_step_to_user_input_step_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">91594dfc-44fa-41d9-91ba-52ae7b0b0f16</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b2e0fb5c-8b57-4c32-9261-bd036ee607c1</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_input_step_to_hr_lookup_step_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4d1bea5b-0c63-4042-891b-aca964e1640f</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_lookup_step_to_llm_answer_step_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9323cd7b-5da2-46b6-8333-46ac19d22d4d</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llm_answer_step_to_user_output_step_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01c4a5ff-6568-42a0-a8de-8efaec780712</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e8075a13-3e48-4611-b68f-aa10423309ec</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_output_step_to_final_step_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01c4a5ff-6568-42a0-a8de-8efaec780712</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1a76f7f9-19b0-438e-aa3e-274dc06d4aa2</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_input_step_user_query_to_hr_lookup_step_query_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">query</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f4a11a6e-0b79-4ede-8673-30ad1b79af2d</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_input_step_user_query_to_llm_answer_step_user_question_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_question</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ee8b7cdd-762a-4202-b320-d71dab6d6318</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_lookup_step_hr_data_context_to_llm_answer_step_hr_data_context_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ac2e45dc-75c2-427f-8c75-1114aeda295d</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llm_answer_step_answer_to_user_output_step_answer_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01c4a5ff-6568-42a0-a8de-8efaec780712</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cae80dba-f95a-4a24-9b93-684928a23b11</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_input_step_user_query_to_final_step_user_query_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fe0c03de-5f80-4575-8d0e-605211ab9b3c</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_lookup_step_hr_data_context_to_final_step_hr_data_context_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a22200bc-dbba-4658-aeb1-0ddced3beb3e</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llm_answer_step_answer_to_final_step_answer_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">de05873e-c565-41be-a3f8-f9c6600e4f57</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_output_step_output_message_to_final_step_output_message_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01c4a5ff-6568-42a0-a8de-8efaec780712</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output_message</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output_message</span>
<span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">819ae9c0-4055-4fe6-ab05-f03c45775206</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtendedToolNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">819ae9c0-4055-4fe6-ab05-f03c45775206</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_lookup_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">query</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">tool</span><span class="p">:</span>
<span class="w">      </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerTool</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6ca8f0ef-2496-4c9b-bbea-ca6e5969c07e</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">search_hr_database</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Function</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">searches</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">database</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">employee</span><span class="nv"> </span><span class="s">benefits.\n\</span>
<span class="w">        </span><span class="s">\nParameters\n----------\nquery:\n</span><span class="nv">    </span><span class="s">a</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">string\n\nReturns\n-------\n\</span>
<span class="w">        </span><span class="s">\ </span><span class="nv">   </span><span class="s">a</span><span class="nv"> </span><span class="s">JSON</span><span class="nv"> </span><span class="s">response&quot;</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">query</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">    </span><span class="nt">input_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">output_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">raise_exceptions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">    </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">  </span><span class="nt">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginInputMessageNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c79bea59-c54b-4a54-8ac5-df6daaa60d22</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_input_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the input value provided by the user</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">input_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">      </span><span class="nt">user_provided_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">    </span><span class="nt">message_template</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span>

<span class="w">      </span><span class="s">I</span><span class="nv"> </span><span class="s">am</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">Assistant,</span><span class="nv"> </span><span class="s">designed</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">questions</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">matters.</span>

<span class="w">      </span><span class="s">What</span><span class="nv"> </span><span class="s">kinds</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">questions</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">today?</span>

<span class="w">      </span><span class="s">Example</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">topics:</span>

<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">Employee</span><span class="nv"> </span><span class="s">benefits</span>

<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">Salaries</span>

<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">Career</span><span class="nv"> </span><span class="s">advancement</span>

<span class="w">      </span><span class="s">&#39;</span>
<span class="w">    </span><span class="nt">rephrase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">    </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">  </span><span class="nt">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LlmNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">d9b795cd-3949-4acb-9399-6d9f0a10d7e6</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llm_answer_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;user_question&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_question</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;hr_data_context&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VllmConfig</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22ce9b88-6c3f-40a4-88f9-2f81a7960993</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_MODEL_ID</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">default_generation_parameters</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_API_URL</span>
<span class="w">      </span><span class="nt">model_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_MODEL_ID</span>
<span class="w">    </span><span class="nt">prompt_template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;\nYou</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">knowledgeable,</span><span class="nv"> </span><span class="s">factual,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">helpful</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">assistant\</span>
<span class="w">      </span><span class="s">\ that</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">simple</span><span class="nv">     </span><span class="s">HR-related</span><span class="nv"> </span><span class="s">questions</span><span class="nv"> </span><span class="s">like</span><span class="nv"> </span><span class="s">salary</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">benefits.\n\</span>
<span class="w">      </span><span class="s">Your</span><span class="nv"> </span><span class="s">task:\n</span><span class="nv">    </span><span class="s">-</span><span class="nv"> </span><span class="s">Based</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">given</span><span class="nv"> </span><span class="s">below,</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">user&#39;s</span><span class="nv"> </span><span class="s">question\n\</span>
<span class="w">      </span><span class="s">Important:\n</span><span class="nv">    </span><span class="s">-</span><span class="nv"> </span><span class="s">Be</span><span class="nv"> </span><span class="s">helpful</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">concise</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">messages\n</span><span class="nv">    </span><span class="s">-</span><span class="nv"> </span><span class="s">Do</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">tell\</span>
<span class="w">      </span><span class="s">\ the</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">any</span><span class="nv"> </span><span class="s">details</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">mentioned</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">response,</span><span class="nv"> </span><span class="s">let&#39;s</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">factual.\n\</span>
<span class="w">      </span><span class="s">\nHere</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">User</span><span class="nv"> </span><span class="s">question:\n-</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">user_question</span><span class="nv"> </span><span class="s">}}\n\nHere</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">data:\n\</span>
<span class="w">      </span><span class="s">-</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">hr_data_context</span><span class="nv"> </span><span class="s">}}\n&quot;</span>
<span class="w">  </span><span class="nt">01c4a5ff-6568-42a0-a8de-8efaec780712</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginOutputMessageNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01c4a5ff-6568-42a0-a8de-8efaec780712</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_output_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;answer&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output_message</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">expose_message_as_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;My</span><span class="nv"> </span><span class="s">Assistant</span><span class="se">&#39;&#39;</span><span class="s">s</span><span class="nv"> </span><span class="s">Response:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">input_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">output_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">message_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AGENT</span>
<span class="w">    </span><span class="nt">rephrase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">llm_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">    </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">  </span><span class="nt">953ccf06-5550-4597-9518-df1043269693</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">953ccf06-5550-4597-9518-df1043269693</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">final_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the input value provided by the user</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output_message</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the input value provided by the user</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_query</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hr_data_context</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">answer</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output_message</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">final_step</span>
<span class="w">  </span><span class="nt">91594dfc-44fa-41d9-91ba-52ae7b0b0f16</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">91594dfc-44fa-41d9-91ba-52ae7b0b0f16</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_step</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="nt">agentspec_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.1</span>
</pre></div>
</div>
</div></div>
</details><p>You can then load the configuration back to an assistant using the <code class="docutils literal notranslate"><span class="pre">AgentSpecLoader</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>

<span class="n">tool_registry</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;search_hr_database&quot;</span><span class="p">:</span> <span class="n">search_hr_database</span><span class="p">}</span>

<span class="n">assistant</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">(</span><span class="n">tool_registry</span><span class="o">=</span><span class="n">tool_registry</span><span class="p">)</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide uses the following extension/plugin Agent Spec components:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PluginInputMessageNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PluginOutputMessageNode</span></code></p></li>
</ul>
<p>See the list of available Agent Spec extension/plugin components in the <a class="reference internal" href="../api/agentspec.html"><span class="doc">API Reference</span></a></p>
</div>
</section>
<section id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>In this tutorial, you learned how to build a fixed-flow assistant. To continue learning, check out:</p>
<ul class="simple">
<li><p><a class="reference internal" href="basic_agent.html"><span class="doc">Build a Simple Conversational Assistant with Agents</span></a>.</p></li>
<li><p>Read the <a class="reference internal" href="../api/index.html#api"><span class="std std-ref">API Reference</span></a>.</p></li>
<li><p>Take a look at the <a class="reference internal" href="../howtoguides/index.html#how-to-guides"><span class="std std-ref">How-to Guides</span></a>.</p></li>
</ul>
</section>
<section id="full-code">
<h2>Full code<a class="headerlink" href="#full-code" title="Permalink to this heading">#</a></h2>
<p>Click on the card at the <a class="reference internal" href="#core-basic-flow"><span class="std std-ref">top of this page</span></a> to download the full code
for this guide or copy the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Copyright © 2025 Oracle and/or its affiliates.</span>
<span class="linenos">  2</span><span class="c1">#</span>
<span class="linenos">  3</span><span class="c1"># This software is under the Universal Permissive License</span>
<span class="linenos">  4</span><span class="c1"># %%[markdown]</span>
<span class="linenos">  5</span><span class="c1"># Tutorial - Build a Fixed-Flow Assistant</span>
<span class="linenos">  6</span><span class="c1"># ---------------------------------------</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="c1"># How to use:</span>
<span class="linenos">  9</span><span class="c1"># Create a new Python virtual environment and install the latest WayFlow version.</span>
<span class="linenos"> 10</span><span class="c1"># ```bash</span>
<span class="linenos"> 11</span><span class="c1"># python -m venv venv-wayflowcore</span>
<span class="linenos"> 12</span><span class="c1"># source venv-wayflowcore/bin/activate</span>
<span class="linenos"> 13</span><span class="c1"># pip install --upgrade pip</span>
<span class="linenos"> 14</span><span class="c1"># pip install &quot;wayflowcore==26.1&quot; </span>
<span class="linenos"> 15</span><span class="c1"># ```</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="c1"># You can now run the script</span>
<span class="linenos"> 18</span><span class="c1"># 1. As a Python file:</span>
<span class="linenos"> 19</span><span class="c1"># ```bash</span>
<span class="linenos"> 20</span><span class="c1"># python tutorial_flow.py</span>
<span class="linenos"> 21</span><span class="c1"># ```</span>
<span class="linenos"> 22</span><span class="c1"># 2. As a Notebook (in VSCode):</span>
<span class="linenos"> 23</span><span class="c1"># When viewing the file,</span>
<span class="linenos"> 24</span><span class="c1">#  - press the keys Ctrl + Enter to run the selected cell</span>
<span class="linenos"> 25</span><span class="c1">#  - or Shift + Enter to run the selected cell and move to the cell below# (UPL) 1.0 (LICENSE-UPL or https://oss.oracle.com/licenses/upl) or Apache License</span>
<span class="linenos"> 26</span><span class="c1"># 2.0 (LICENSE-APACHE or http://www.apache.org/licenses/LICENSE-2.0), at your option.</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 32</span><span class="c1">## Imports</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="c1"># %%</span>
<span class="linenos"> 35</span><span class="kn">from</span><span class="w"> </span><span class="nn">textwrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">dedent</span>
<span class="linenos"> 36</span>
<span class="linenos"> 37</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="linenos"> 38</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="linenos"> 39</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="linenos"> 40</span>
<span class="linenos"> 41</span><span class="c1"># Create an LLM model to use later in the tutorial.</span>
<span class="linenos"> 42</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>
<span class="linenos"> 43</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 44</span>    <span class="n">CompleteStep</span><span class="p">,</span>
<span class="linenos"> 45</span>    <span class="n">InputMessageStep</span><span class="p">,</span>
<span class="linenos"> 46</span>    <span class="n">OutputMessageStep</span><span class="p">,</span>
<span class="linenos"> 47</span>    <span class="n">PromptExecutionStep</span><span class="p">,</span>
<span class="linenos"> 48</span>    <span class="n">StartStep</span><span class="p">,</span>
<span class="linenos"> 49</span>    <span class="n">ToolExecutionStep</span><span class="p">,</span>
<span class="linenos"> 50</span><span class="p">)</span>
<span class="linenos"> 51</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
<span class="linenos"> 52</span>
<span class="linenos"> 53</span><span class="c1"># LLM model configuration</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
<span class="linenos"> 56</span>    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span><span class="p">,</span>
<span class="linenos"> 57</span>    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;LLAMA_API_URL&quot;</span><span class="p">,</span>
<span class="linenos"> 58</span><span class="p">)</span>
<span class="linenos"> 59</span>
<span class="linenos"> 60</span>
<span class="linenos"> 61</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 62</span><span class="c1">## Define value names</span>
<span class="linenos"> 63</span>
<span class="linenos"> 64</span><span class="c1"># %%</span>
<span class="linenos"> 65</span><span class="c1"># Names for the input parameters of the steps in the flow.</span>
<span class="linenos"> 66</span><span class="n">HR_QUERY</span> <span class="o">=</span> <span class="s2">&quot;user_query&quot;</span>
<span class="linenos"> 67</span><span class="n">TOOL_QUERY</span> <span class="o">=</span> <span class="s2">&quot;query&quot;</span>
<span class="linenos"> 68</span><span class="n">HR_DATA_CONTEXT</span> <span class="o">=</span> <span class="s2">&quot;hr_data_context&quot;</span>
<span class="linenos"> 69</span><span class="n">QUERY_ANSWER</span> <span class="o">=</span> <span class="s2">&quot;answer&quot;</span>
<span class="linenos"> 70</span><span class="n">USER_QUESTION</span> <span class="o">=</span> <span class="s2">&quot;user_question&quot;</span>
<span class="linenos"> 71</span>
<span class="linenos"> 72</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 73</span><span class="c1">## Define start step</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span><span class="c1"># %%</span>
<span class="linenos"> 76</span><span class="c1"># A start step. This is where the flow starts.</span>
<span class="linenos"> 77</span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span> <span class="n">input_descriptors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 80</span><span class="c1">## Define user input step</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span><span class="c1"># %%</span>
<span class="linenos"> 83</span><span class="n">user_input_message_template</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span>
<span class="linenos"> 84</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 85</span><span class="sd">    I am an HR Assistant, designed to answer your questions about HR matters.</span>
<span class="linenos"> 86</span><span class="sd">    What kinds of questions do you have today?</span>
<span class="linenos"> 87</span><span class="sd">    Example of HR topics:</span>
<span class="linenos"> 88</span><span class="sd">    - Employee benefits</span>
<span class="linenos"> 89</span><span class="sd">    - Salaries</span>
<span class="linenos"> 90</span><span class="sd">    - Career advancement</span>
<span class="linenos"> 91</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 92</span><span class="p">)</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="n">user_input_step</span> <span class="o">=</span> <span class="n">InputMessageStep</span><span class="p">(</span>
<span class="linenos"> 95</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_input_step&quot;</span><span class="p">,</span>
<span class="linenos"> 96</span>    <span class="n">message_template</span><span class="o">=</span><span class="n">user_input_message_template</span><span class="p">,</span>
<span class="linenos"> 97</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">InputMessageStep</span><span class="o">.</span><span class="n">USER_PROVIDED_INPUT</span><span class="p">:</span> <span class="n">HR_QUERY</span><span class="p">},</span>
<span class="linenos"> 98</span><span class="p">)</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="c1"># %%[markdown]</span>
<span class="linenos">101</span><span class="c1">## Define HR lookup step</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="c1"># %%</span>
<span class="linenos">104</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="linenos">105</span>
<span class="linenos">106</span><span class="c1"># A tool which will run a query on the HR system and return some data.</span>
<span class="linenos">107</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">,</span> <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">HR_DATA_CONTEXT</span><span class="p">)])</span>
<span class="linenos">108</span><span class="k">def</span><span class="w"> </span><span class="nf">search_hr_database</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos">109</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Function that searches the HR database for employee benefits.</span>
<span class="linenos">110</span>
<span class="linenos">111</span><span class="sd">    Parameters</span>
<span class="linenos">112</span><span class="sd">    ----------</span>
<span class="linenos">113</span><span class="sd">    query:</span>
<span class="linenos">114</span><span class="sd">        a query string</span>
<span class="linenos">115</span>
<span class="linenos">116</span><span class="sd">    Returns</span>
<span class="linenos">117</span><span class="sd">    -------</span>
<span class="linenos">118</span><span class="sd">        a JSON response</span>
<span class="linenos">119</span>
<span class="linenos">120</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">121</span>    <span class="c1"># Returns mock data.</span>
<span class="linenos">122</span>    <span class="k">return</span> <span class="s1">&#39;{&quot;John Smith&quot;: {&quot;benefits&quot;: &quot;Unlimited PTO&quot;, &quot;salary&quot;: &quot;$1,000&quot;}, &quot;Mary Jones&quot;: {&quot;benefits&quot;: &quot;25 days&quot;, &quot;salary&quot;: &quot;$10,000&quot;}}&#39;</span>
<span class="linenos">123</span>
<span class="linenos">124</span><span class="c1"># Step that runs the lookup of a query using the tool.</span>
<span class="linenos">125</span><span class="n">hr_lookup_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos">126</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hr_lookup_step&quot;</span><span class="p">,</span>
<span class="linenos">127</span>    <span class="n">tool</span><span class="o">=</span><span class="n">search_hr_database</span><span class="p">,</span>
<span class="linenos">128</span><span class="p">)</span>
<span class="linenos">129</span>
<span class="linenos">130</span><span class="c1"># %%[markdown]</span>
<span class="linenos">131</span><span class="c1">## Define llm answer step</span>
<span class="linenos">132</span>
<span class="linenos">133</span><span class="c1"># %%</span>
<span class="linenos">134</span><span class="c1"># The template for the prompt to be used by the LLM. Notice the use of parameters</span>
<span class="linenos">135</span><span class="c1"># such as, {{ user_question }}. The template is evaluated using the parameters that</span>
<span class="linenos">136</span><span class="c1"># are passed into the PromptExecutionStep.</span>
<span class="linenos">137</span><span class="n">hrassistant_prompt_template</span> <span class="o">=</span> <span class="n">dedent</span><span class="p">(</span>
<span class="linenos">138</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">139</span><span class="sd">    You are a knowledgeable, factual, and helpful HR assistant that can answer simple \</span>
<span class="linenos">140</span><span class="sd">    HR-related questions like salary and benefits.</span>
<span class="linenos">141</span><span class="sd">    Your task:</span>
<span class="linenos">142</span><span class="sd">        - Based on the HR data given below, answer the user&#39;s question</span>
<span class="linenos">143</span><span class="sd">    Important:</span>
<span class="linenos">144</span><span class="sd">        - Be helpful and concise in your messages</span>
<span class="linenos">145</span><span class="sd">        - Do not tell the user any details not mentioned in the tool response, let&#39;s be factual.</span>
<span class="linenos">146</span>
<span class="linenos">147</span><span class="sd">    Here is the User question:</span>
<span class="linenos">148</span><span class="sd">    - {{ user_question }}</span>
<span class="linenos">149</span>
<span class="linenos">150</span><span class="sd">    Here is the HR data:</span>
<span class="linenos">151</span><span class="sd">    - {{ hr_data_context }}</span>
<span class="linenos">152</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">153</span><span class="p">)</span>
<span class="linenos">154</span>
<span class="linenos">155</span><span class="c1"># Step that evaluates the prompt template and then passes the prompt to the LLM.</span>
<span class="linenos">156</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="linenos">157</span>
<span class="linenos">158</span><span class="n">llm_answer_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="linenos">159</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_answer_step&quot;</span><span class="p">,</span>
<span class="linenos">160</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="n">hrassistant_prompt_template</span><span class="p">,</span>
<span class="linenos">161</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">162</span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">QUERY_ANSWER</span><span class="p">)],</span>
<span class="linenos">163</span><span class="p">)</span>
<span class="linenos">164</span>
<span class="linenos">165</span>
<span class="linenos">166</span><span class="c1"># %%[markdown]</span>
<span class="linenos">167</span><span class="c1">## Define user output step</span>
<span class="linenos">168</span>
<span class="linenos">169</span><span class="c1"># %%</span>
<span class="linenos">170</span><span class="c1"># Step that outputs the answer to the user&#39;s query.</span>
<span class="linenos">171</span><span class="n">user_output_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span>
<span class="linenos">172</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_output_step&quot;</span><span class="p">,</span>
<span class="linenos">173</span>    <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;My Assistant&#39;s Response: {{ answer }}&quot;</span><span class="p">,</span>
<span class="linenos">174</span><span class="p">)</span>
<span class="linenos">175</span>
<span class="linenos">176</span><span class="c1"># %%[markdown]</span>
<span class="linenos">177</span><span class="c1">## Define flow transitions</span>
<span class="linenos">178</span>
<span class="linenos">179</span><span class="c1"># %%</span>
<span class="linenos">180</span><span class="c1"># Define the transitions between the steps.</span>
<span class="linenos">181</span><span class="n">control_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">182</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">),</span>
<span class="linenos">183</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">),</span>
<span class="linenos">184</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">),</span>
<span class="linenos">185</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">),</span>
<span class="linenos">186</span>    <span class="c1"># Note: you can use a CompleteStep as the termination of the flow.</span>
<span class="linenos">187</span>    <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">CompleteStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;final_step&quot;</span><span class="p">)),</span>
<span class="linenos">188</span><span class="p">]</span>
<span class="linenos">189</span>
<span class="linenos">190</span><span class="c1"># %%[markdown]</span>
<span class="linenos">191</span><span class="c1">## Define data transitions</span>
<span class="linenos">192</span>
<span class="linenos">193</span><span class="c1"># %%</span>
<span class="linenos">194</span><span class="c1"># Define the data flows between steps.</span>
<span class="linenos">195</span><span class="n">data_flow_edges</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">196</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">197</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">,</span>
<span class="linenos">198</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">HR_QUERY</span><span class="p">,</span>
<span class="linenos">199</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">,</span>
<span class="linenos">200</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">TOOL_QUERY</span><span class="p">,</span>
<span class="linenos">201</span>    <span class="p">),</span>
<span class="linenos">202</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">203</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">user_input_step</span><span class="p">,</span>
<span class="linenos">204</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">HR_QUERY</span><span class="p">,</span>
<span class="linenos">205</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span>
<span class="linenos">206</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">USER_QUESTION</span><span class="p">,</span>
<span class="linenos">207</span>    <span class="p">),</span>
<span class="linenos">208</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">209</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">hr_lookup_step</span><span class="p">,</span>
<span class="linenos">210</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">HR_DATA_CONTEXT</span><span class="p">,</span>
<span class="linenos">211</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span>
<span class="linenos">212</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">HR_DATA_CONTEXT</span><span class="p">,</span>
<span class="linenos">213</span>    <span class="p">),</span>
<span class="linenos">214</span>    <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">215</span>        <span class="n">source_step</span><span class="o">=</span><span class="n">llm_answer_step</span><span class="p">,</span>
<span class="linenos">216</span>        <span class="n">source_output</span><span class="o">=</span><span class="n">QUERY_ANSWER</span><span class="p">,</span>
<span class="linenos">217</span>        <span class="n">destination_step</span><span class="o">=</span><span class="n">user_output_step</span><span class="p">,</span>
<span class="linenos">218</span>        <span class="n">destination_input</span><span class="o">=</span><span class="n">QUERY_ANSWER</span><span class="p">,</span>
<span class="linenos">219</span>    <span class="p">),</span>
<span class="linenos">220</span><span class="p">]</span>
<span class="linenos">221</span>
<span class="linenos">222</span><span class="c1"># %%[markdown]</span>
<span class="linenos">223</span><span class="c1">## Create assistant</span>
<span class="linenos">224</span>
<span class="linenos">225</span><span class="c1"># %%</span>
<span class="linenos">226</span><span class="c1"># Create the flow passing in the steps, the name of the step to start with, the control_flow_edges and the data_flow_edges.</span>
<span class="linenos">227</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">228</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="linenos">229</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="n">control_flow_edges</span><span class="p">,</span>
<span class="linenos">230</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="n">data_flow_edges</span><span class="p">,</span>
<span class="linenos">231</span><span class="p">)</span>
<span class="linenos">232</span>
<span class="linenos">233</span><span class="c1"># %%[markdown]</span>
<span class="linenos">234</span><span class="c1">## Run assistant</span>
<span class="linenos">235</span>
<span class="linenos">236</span><span class="c1"># %%</span>
<span class="linenos">237</span><span class="c1"># Start a conversation.</span>
<span class="linenos">238</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="linenos">239</span>
<span class="linenos">240</span><span class="c1"># Execute the assistant.</span>
<span class="linenos">241</span><span class="c1"># This will print out the message to the user, then stop at the user input step.</span>
<span class="linenos">242</span><span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">243</span>
<span class="linenos">244</span><span class="c1"># Ask a question of the assistant by appending a user message.</span>
<span class="linenos">245</span><span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="s2">&quot;Does John Smith earn more that Mary Jones?&quot;</span><span class="p">)</span>
<span class="linenos">246</span>
<span class="linenos">247</span><span class="c1"># Execute the assistant again. Continues from the UserInputStep.</span>
<span class="linenos">248</span><span class="c1"># As there are no other steps the flow will run to the end.</span>
<span class="linenos">249</span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">250</span>
<span class="linenos">251</span><span class="c1"># &quot;output_message&quot; is the default key name for the output value</span>
<span class="linenos">252</span><span class="c1"># of the OutputMessageStep.</span>
<span class="linenos">253</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="n">FinishedStatus</span>
<span class="linenos">254</span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">255</span>    <span class="n">answer</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">]</span>
<span class="linenos">256</span>    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
<span class="linenos">257</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">258</span>    <span class="nb">print</span><span class="p">(</span>
<span class="linenos">259</span>        <span class="sa">f</span><span class="s2">&quot;Incorrect execution status, expected FinishedStatus, got </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="linenos">260</span>    <span class="p">)</span>
<span class="linenos">261</span>
<span class="linenos">262</span><span class="c1"># %%[markdown]</span>
<span class="linenos">263</span><span class="c1">## Export config to Agent Spec</span>
<span class="linenos">264</span>
<span class="linenos">265</span><span class="c1"># %%</span>
<span class="linenos">266</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>
<span class="linenos">267</span>
<span class="linenos">268</span><span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">assistant</span><span class="p">)</span>
<span class="linenos">269</span>
<span class="linenos">270</span><span class="c1"># %%[markdown]</span>
<span class="linenos">271</span><span class="c1">## Load Agent Spec config</span>
<span class="linenos">272</span>
<span class="linenos">273</span><span class="c1"># %%</span>
<span class="linenos">274</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>
<span class="linenos">275</span>
<span class="linenos">276</span><span class="n">tool_registry</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;search_hr_database&quot;</span><span class="p">:</span> <span class="n">search_hr_database</span><span class="p">}</span>
<span class="linenos">277</span>
<span class="linenos">278</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">(</span><span class="n">tool_registry</span><span class="o">=</span><span class="n">tool_registry</span><span class="p">)</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-primer-on-flows">A primer on Flows</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-flow">Building the flow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-a-jupyter-notebook">Setup a Jupyter Notebook</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports-and-llm-configuration">Imports and LLM configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-data">Naming data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifying-the-steps">Specifying the steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#start-step">START_STEP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-input-step">USER_INPUT_STEP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hr-lookup-step">HR_LOOKUP_STEP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#llm-answer-step">LLM_ANSWER_STEP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-output-step">USER_OUTPUT_STEP</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-transitions">Step transitions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-assistant">Creating the assistant</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-assistant">Running the assistant</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agent-spec-exporting-loading">Agent Spec Exporting/Loading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next steps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#full-code">Full code</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>