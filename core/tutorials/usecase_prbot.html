


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Build a Simple Code Review Assistant &#8212; wayflowcore 26.1.0.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dba54f56160742ef5599" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=dba54f56160742ef5599"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599" />

  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'core/tutorials/usecase_prbot';</script>
  <script src="../../_static/announcement.js"></script>

    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How-to Guides" href="../howtoguides/index.html" />
    <link rel="prev" title="Build a Simple Fixed-Flow Assistant with Flows" href="basic_flow.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="26.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
    <img src="../../_static/logo-dark.svg" class="logo__image only-dark pst-js-only" alt="wayflowcore 26.1.0.dev0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Tutorials &amp; Use Cases</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic_agent.html">Build a Simple Conversational Assistant with Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_flow.html">Build a Simple Fixed-flow Assistant with Flows</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Build a Simple Code Review Assistant</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howtoguides/index.html">How-to Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/io_descriptors.html">Change Input and Output Descriptors of Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_async.html">Use Asynchronous APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/agents.html">Create a ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_imagecontent.html">How to Send Images to LLMs and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_prompttemplate.html">Use Templates for Advanced Prompting Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_userinputinflows.html">Ask for User Input in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/conditional_flows.html">Create Conditional Transitions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/promptexecutionstep.html">Do Structured LLM Generation in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_userconfirmation.html">Add User Confirmation to a Tool Call Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/catching_exceptions.html">Catch Exceptions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mapstep.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_agents_in_flows.html">Use Agents in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_multiagent.html">Build a Hierarchical Multi-Agent System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_swarm.html">Build a Swarm of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_managerworkers.html">Build a ManagerWorkers of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_build_assistants_with_tools.html">Build Assistants with Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_multiple_output_tool.html">Create Tools with Multiple Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/create_a_tool_from_a_flow.html">Convert Flows to Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mcp.html">Connect MCP tools to Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_remote_tool_expired_token.html">Do Remote API Calls with Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_execute_agentspec_with_wayflowcore.html">Load and Execute an Agent Spec Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_serdeser.html">Serialize and Deserialize Flows and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_serialize_conversations.html">Serialize and Deserialize Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/installing_ollama.html">Install and Use Ollama</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_tracing.html">Enable Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_datastores.html">Connect Assistants to Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/embeddingmodels_from_different_providers.html">Use Embedding Models from Different Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_evaluation.html">How to Evaluate WayFlow Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_conversation_evaluation.html">How to Evaluate Assistant Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_variable.html">Use Variables for Shared State in Flows</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/agentspec.html">Agent Spec Adapters</a></li>

<li class="toctree-l2"><a class="reference internal" href="../api/conversation.html">Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/flows.html">Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/embeddingmodels.html">Embedding Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/contextproviders.html">Context Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/interrupts.html">Execution Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/prompttemplate.html">PromptTemplates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/serialization.html">Serialization/Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/datastores.html">Datastores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/warnings.html">Warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/evaluation.html">Evaluation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">For Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">WayFlow</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Build a Simple Code Review Assistant</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="build-a-simple-code-review-assistant">
<span id="top-simple-code-review-assistant"></span><h1>Build a Simple Code Review Assistant<a class="headerlink" href="#build-a-simple-code-review-assistant" title="Permalink to this heading">#</a></h1>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
<a class="reference internal" href="../../_images/python-icon.svg"><img alt="python-icon" height="40px" src="../../_images/python-icon.svg" width="40px" /></a> Download Python Script</div>
<p class="sd-card-text">Python script/notebook for this guide.</p>
</div>
<a class="sd-stretched-link sd-hide-link-text reference external" href="../end_to_end_code_examples/usecase_prbot.py"><span>Simple Code Review Assistant tutorial script</span></a></div>
</div>
</div>
</div>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites</p>
<p>This guide does not assume any prior knowledge about Project WayFlow. However, it assumes the reader has a basic knowledge of LLMs.</p>
<p>You will need a working installation of WayFlow - see <a class="reference internal" href="../installation.html"><span class="doc">Installation</span></a>.</p>
</div>
<section id="learning-goals">
<h2>Learning goals<a class="headerlink" href="#learning-goals" title="Permalink to this heading">#</a></h2>
<p>In this use-case tutorial, you will build a more advanced WayFlow application, a <strong>Pull Request (PR) Reviewing Assistant</strong>, using a WayFlow
<a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> to automate basic reviews of Python source code.</p>
<p>In this tutorial you will:</p>
<ol class="arabic simple">
<li><p>Learn the basics of using <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flows</span></a> to build an assistant.</p></li>
<li><p>Learn how to compose multiple sub-flows to create a more complex <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a>.</p></li>
<li><p>Learn more about building <a class="reference internal" href="../api/tools.html#servertool"><span class="std std-ref">Tools</span></a> that can be used within your <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flows</span></a>.</p></li>
</ol>
<p>You can download a Jupyter Notebook for this use-case to follow along from <a class="reference download internal" download="" href="../../_downloads/851f997ab457f57a59b6c42bfde5d608/usecase_prbot.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Code</span> <span class="pre">PR</span> <span class="pre">Review</span> <span class="pre">Bot</span> <span class="pre">Tutorial</span></code></a>.</p>
</section>
<section id="introduction-to-the-task">
<h2>Introduction to the task<a class="headerlink" href="#introduction-to-the-task" title="Permalink to this heading">#</a></h2>
<p>Code reviews are crucial for maintaining code quality and reviewers often spend considerable time pointing out
routine issues such as the presence of debug statements, formatting inconsistencies, or common coding convention violations that may not
be fully captured by static code analysis tools. This consumes valuable time that could be spent on reviewing more important things such as the
<em>core logic</em>, <em>architecture</em>, and <em>business requirements</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Building an agent with WayFlow to perform such code reviews has a number of advantages:</p>
<ol class="arabic simple">
<li><p>Review rules can be written using natural language, making an agent much more flexible than a simple static checker.</p></li>
<li><p>Writing rules in natural language makes updating the rules very easy.</p></li>
<li><p>More general issues can be captured. You can allow the LLM to infer from the rule to more general cases that could be missed by a simple static checker.</p></li>
<li><p>New review rules can be generated from the collected comments of existing PRs.</p></li>
</ol>
</div>
<p>In this tutorial, you will create a WayFlow Flow assistant designed to scan Python pull requests for common oversights such as:</p>
<ul class="simple">
<li><p>Having TODO comments without associated tickets.</p></li>
<li><p>Using unclear or ambiguous variable naming.</p></li>
<li><p>Using risky Python code practices such as mutable defaults.</p></li>
</ul>
<p>To build this assistant you will break the task into configuration and two sub-flows that will be composed into a single flow:</p>
<p></p>
<a class="reference internal image-reference" href="../../_images/prbot_main.svg"><img alt="Complete Flow of the PR Bot" class="align-center" height="290" src="../../_images/prbot_main.svg" width="555" /></a>
<p></p>
<ol class="arabic simple">
<li><p>Configure your application, choose an LLM and import required modules [<em>Part 1</em>].</p></li>
<li><p>The first sub-flow retrieves and diffs information from a local codebase in a Git repository [<em>Part 2</em>].</p></li>
<li><p>The second sub-flow iterates over the file diffs using a <a class="reference internal" href="../api/flows.html#mapstep"><span class="std std-ref">MapStep</span></a> and generates comments with an LLM using the <a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a> [<em>Step 3</em>].</p></li>
</ol>
<p>You will also learn how to extract information using the <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> and the <a class="reference internal" href="../api/flows.html#extractvaluefromjsonstep"><span class="std std-ref">ExtractValueFromJsonStep</span></a>, and how to build and execute
tools with the <a class="reference internal" href="../api/tools.html#servertool"><span class="std std-ref">ServerTool</span></a> and the <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not a production-ready code review assistant that can be used as-is.</p>
</div>
</section>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h2>
<p>First, let’s set up the environment. For this tutorial you need to have <code class="docutils literal notranslate"><span class="pre">wayflowcore</span></code> installed (for additional information please read the
<a class="reference internal" href="../installation.html"><span class="doc">installation guide</span></a>).</p>
<p>Next download the example codebase Git repository, <a class="reference download internal" download="" href="../../_downloads/110a2656d20dddee13a9d839f259851a/agentix.zip"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">codebase</span> <span class="pre">Git</span> <span class="pre">repository</span></code></a>. This will be used
to generate the sample code diffs for the assistant to review.</p>
<p>Extract the codebase Git repository folder from the compressed archive. Make a note of where the codebase Git repository is extracted to.</p>
</section>
<section id="part-1-imports-and-llm-configuration">
<h2>Part 1: Imports and LLM configuration<a class="headerlink" href="#part-1-imports-and-llm-configuration" title="Permalink to this heading">#</a></h2>
<p>First, set up the environment. For this tutorial you need to have <code class="docutils literal notranslate"><span class="pre">wayflowcore</span></code> installed, for additional information, read the
<a class="reference internal" href="../installation.html"><span class="doc">installation guide</span></a>.</p>
<p>WayFlow supports several LLMs API providers. To learn more about the supported LLM providers, read the guide,
<a class="reference internal" href="../howtoguides/llm_from_different_providers.html"><span class="doc">how to use LLMs from different providers</span></a>.</p>
<p>First choose an LLM from one of the options below:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">OCI GenAI</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">vLLM</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Ollama</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OCIGenAIModel</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">llm</span> <span class="o">=</span> <span class="n">OCIGenAIModel</span><span class="p">(</span>
        <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;provider.model-id&quot;</span><span class="p">,</span>
        <span class="n">service_endpoint</span><span class="o">=</span><span class="s2">&quot;https://url-to-service-endpoint.com&quot;</span><span class="p">,</span>
        <span class="n">compartment_id</span><span class="o">=</span><span class="s2">&quot;compartment-id&quot;</span><span class="p">,</span>
        <span class="n">auth_type</span><span class="o">=</span><span class="s2">&quot;API_KEY&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;VLLM_HOST_PORT&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OllamaModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">OllamaModel</span><span class="p">(</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;model-id&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>API keys should never be stored in code. Use environment variables and/or tools such as <a class="reference external" href="https://pypi.org/project/python-dotenv/">python-dotenv</a>
instead.</p>
<p>Be cautious when using external LLM providers and ensure that you comply with your organization’s
security policies and any applicable laws and regulations. Consider using a self-hosted LLM solution or
a provider that offers on-premises deployment options if you need to maintain strict control over your code and data.</p>
</div>
</section>
<section id="part-2-retrieve-the-pr-diff-information">
<h2>Part 2: Retrieve the PR diff information<a class="headerlink" href="#part-2-retrieve-the-pr-diff-information" title="Permalink to this heading">#</a></h2>
<p>The first phase of the assistant requires retrieving information about the code diffs from a code repository. You have already extracted the sample
codebase Git repository to your local environment.</p>
<p>This will be a sub-flow that consists of two simple steps:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a> that collects PR diff information using a Python subprocess to run the Git command.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> which separates the raw diff information into diffs for each file.</p></li>
</ul>
<p></p>
<a class="reference internal image-reference" href="../../_images/prbot_retrieve_diffs.svg"><img alt="Steps to retrieve the PR diff information" class="align-center" height="200" src="../../_images/prbot_retrieve_diffs.svg" width="602" /></a>
<p></p>
<p>First, take a look at what a diff looks like. The following example shows how a real diff appears when using Git:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MOCK_DIFF</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">diff --git src://calculators/utils.py dst://calculators/utils.py</span>
<span class="s2">index 12345678..90123456 100644</span>
<span class="s2">--- src://calculators/utils.py</span>
<span class="s2">+++ dst://calculators/utils.py</span>
<span class="s2">@@ -10,6 +10,15 @@</span>

<span class="s2"> def calculate_total(data):</span>
<span class="s2">     # TODO: implement tax calculation</span>
<span class="s2">     return data</span>

<span class="s2">+def get_items(items=[]):</span>
<span class="s2">+    result = []</span>
<span class="s2">+    for item in items:</span>
<span class="s2">+        result.append(item * 2)</span>
<span class="s2">+    return result</span>
<span class="s2">+</span>
<span class="s2">+def process_numbers(numbers):</span>
<span class="s2">+    res = []</span>
<span class="s2">+    for x in numbers:</span>
<span class="s2">+        res.append(x + 1)</span>
<span class="s2">+    return res</span>
<span class="s2">+</span>
<span class="s2"> def calculate_average(numbers):</span>
<span class="s2">     return sum(numbers) / len(numbers)</span>


<span class="s2">diff --git src://example/utils.py dst://example/utils.py</span>
<span class="s2">index 000000000..123456789</span>
<span class="s2">--- /dev/null</span>
<span class="s2">+++ dst://example/utils.py</span>
<span class="s2">@@ -0,0 +1,20 @@</span>
<span class="s2">+# Copyright © 2024 Oracle and/or its affiliates.</span>
<span class="s2">+</span>
<span class="s2">+def calculate_sum(numbers=[]):</span>
<span class="s2">+    total = 0</span>
<span class="s2">+    for num in numbers:</span>
<span class="s2">+        total += num</span>
<span class="s2">+    return total</span>
<span class="s2">+</span>
<span class="s2">+</span>
<span class="s2">+def process_data(data):</span>
<span class="s2">+    # TODO: Handle exceptions here</span>
<span class="s2">+    result = data * 2</span>
<span class="s2">+    return result</span>
<span class="s2">+</span>
<span class="s2">+</span>
<span class="s2">+def main():</span>
<span class="s2">+    numbers = [1, 2, 3, 4, 5]</span>
<span class="s2">+    result = calculate_sum(numbers)</span>
<span class="s2">+    print(&quot;Sum:&quot;, result)</span>
<span class="s2">+    data = 10</span>
<span class="s2">+    processed_data = process_data(data)</span>
<span class="s2">+    print(&quot;Processed Data:&quot;, processed_data)</span>
<span class="s2">+</span>
<span class="s2">+</span>
<span class="s2">+if __name__ == &quot;__main__&quot;:</span>
<span class="s2">+    main()</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Reading a diff</strong>: Removals are identified by the “-” marks and additions by the “+” marks.
In this example, there were only additions.</p>
<p>The diff above contains information about two files, <code class="docutils literal notranslate"><span class="pre">calculators/utils.py</span></code> and <code class="docutils literal notranslate"><span class="pre">example/utils.py</span></code>.
This is an example diff and it is different from the diff that will be generated from the sample codebase.
It is included here to show how a Git diff looks and is shorter than the diff that you generate from the sample codebase.</p>
<section id="build-a-tool">
<h3>Build a tool<a class="headerlink" href="#build-a-tool" title="Permalink to this heading">#</a></h3>
<p>You need to create a tool to extract a code diff from the local code repository.
The <a class="reference internal" href="../api/tools.html#tooldecorator"><span class="std std-ref">&#64;tool</span></a> decorator can be used for that purpose by simply wrapping a Python function.</p>
<p>The function, <code class="docutils literal notranslate"><span class="pre">local_get_pr_diff_tool</span></code>, in the code below does the work of extracting the diffs by
running the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">HEAD</span></code> shell command and capturing the output. It uses a subprocess to run the shell command.</p>
<p>To turn this function into a WayFlow tool, a <code class="docutils literal notranslate"><span class="pre">&#64;tool</span></code> annotation is used to create a <a class="reference internal" href="../api/tools.html#servertool"><span class="std std-ref">ServerTool</span></a> from the function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos"> 5</span><span class="k">def</span><span class="w"> </span><span class="nf">local_get_pr_diff_tool</span><span class="p">(</span><span class="n">repo_dirpath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 7</span><span class="sd">    Retrieves code diff with a git command given the</span>
<span class="linenos"> 8</span><span class="sd">    path to the repository root folder.</span>
<span class="linenos"> 9</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">10</span>    <span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
<span class="linenos">13</span>        <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;diff&quot;</span><span class="p">,</span> <span class="s2">&quot;HEAD&quot;</span><span class="p">],</span>
<span class="linenos">14</span>        <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">15</span>        <span class="n">cwd</span><span class="o">=</span><span class="n">repo_dirpath</span><span class="p">,</span>
<span class="linenos">16</span>        <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="p">)</span>
<span class="linenos">18</span>    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="building-the-steps-and-the-sub-flow">
<h3>Building the steps and the sub-flow<a class="headerlink" href="#building-the-steps-and-the-sub-flow" title="Permalink to this heading">#</a></h3>
<p>Let’s write the code for the first sub-flow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">RegexExtractionStep</span><span class="p">,</span> <span class="n">StartStep</span><span class="p">,</span> <span class="n">ToolExecutionStep</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># IO Variable Names</span>
<span class="linenos"> 8</span><span class="n">REPO_DIRPATH_IO</span> <span class="o">=</span> <span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="linenos"> 9</span><span class="n">PR_DIFF_IO</span> <span class="o">=</span> <span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="linenos">10</span><span class="n">FILE_DIFF_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$file_diff_list&quot;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1"># Define the steps</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span> <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">REPO_DIRPATH_IO</span><span class="p">)])</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="c1"># Step 1: Retrieve the pull request diff using the local tool</span>
<span class="linenos">17</span><span class="n">get_pr_diff_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos">18</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;get_pr_diff&quot;</span><span class="p">,</span>
<span class="linenos">19</span>    <span class="n">tool</span><span class="o">=</span><span class="n">local_get_pr_diff_tool</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="n">raise_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">21</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;repo_dirpath&quot;</span><span class="p">:</span> <span class="n">REPO_DIRPATH_IO</span><span class="p">},</span>
<span class="linenos">22</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">PR_DIFF_IO</span><span class="p">},</span>
<span class="linenos">23</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="c1"># Step 2: Extract the file diffs from the raw diff using a regular expression</span>
<span class="linenos">26</span><span class="n">extract_into_list_of_file_diff_step</span> <span class="o">=</span> <span class="n">RegexExtractionStep</span><span class="p">(</span>
<span class="linenos">27</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_into_list_of_file_diff&quot;</span><span class="p">,</span>
<span class="linenos">28</span>    <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;(diff --git[\s\S]*?)(?=diff --git|$)&quot;</span><span class="p">,</span>
<span class="linenos">29</span>    <span class="n">return_first_match_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">30</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="n">PR_DIFF_IO</span><span class="p">},</span>
<span class="linenos">31</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">FILE_DIFF_LIST_IO</span><span class="p">},</span>
<span class="linenos">32</span><span class="p">)</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="c1"># Define the sub flow</span>
<span class="linenos">35</span><span class="n">retrieve_diff_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">36</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Retrieve PR diff flow&quot;</span><span class="p">,</span>
<span class="linenos">37</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="linenos">38</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">39</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">),</span>
<span class="linenos">40</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">41</span>            <span class="n">source_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">extract_into_list_of_file_diff_step</span>
<span class="linenos">42</span>        <span class="p">),</span>
<span class="linenos">43</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">extract_into_list_of_file_diff_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="linenos">44</span>    <span class="p">],</span>
<span class="linenos">45</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">46</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">47</span>            <span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="linenos">48</span>            <span class="n">source_output</span><span class="o">=</span><span class="n">REPO_DIRPATH_IO</span><span class="p">,</span>
<span class="linenos">49</span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">,</span>
<span class="linenos">50</span>            <span class="n">destination_input</span><span class="o">=</span><span class="n">REPO_DIRPATH_IO</span><span class="p">,</span>
<span class="linenos">51</span>        <span class="p">),</span>
<span class="linenos">52</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">53</span>            <span class="n">source_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">,</span>
<span class="linenos">54</span>            <span class="n">source_output</span><span class="o">=</span><span class="n">PR_DIFF_IO</span><span class="p">,</span>
<span class="linenos">55</span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">extract_into_list_of_file_diff_step</span><span class="p">,</span>
<span class="linenos">56</span>            <span class="n">destination_input</span><span class="o">=</span><span class="n">PR_DIFF_IO</span><span class="p">,</span>
<span class="linenos">57</span>        <span class="p">),</span>
<span class="linenos">58</span>    <span class="p">],</span>
<span class="linenos">59</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> | <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> | <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a> | <strong>API Reference:</strong> <a class="reference internal" href="../api/tools.html#tooldecorator"><span class="std std-ref">tool</span></a></p>
<p>The code does the following:</p>
<ol class="arabic simple">
<li><p>It lists the names of the steps and input/output variables for the sub-flow.</p></li>
<li><p>It then creates the different steps within the sub-flow.</p></li>
<li><p>Finally, it instantiates the sub-flow. This will be covered in more detail later in the tutorial.</p></li>
</ol>
<p>For clarity, the variable names are also prefixed with a dollar ($) sign. This is not necessary and is only done for code clarity. The variable
<code class="docutils literal notranslate"><span class="pre">REPO_DIRPATH_IO</span></code> is used to hold the file path to the sample codebase Git repository and you will use this to pass in the location of the
codebase Git repository.</p>
<p>Additionally, you can give explicit names to the input/output variables used in the Flow, e.g. “$repo_dirpath_io” for the variable holding the
path to the local repository. Finally, we define those explicit names as string variables (e.g. <code class="docutils literal notranslate"><span class="pre">REPO_DIRPATH_IO</span></code>) to minimize the number of
magic strings in the code.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>To learn about the basics of Flows, check out our, <a class="reference internal" href="basic_flow.html"><span class="doc">introductory tutorial on WayFlow Flows</span></a>.</p>
</div>
<p>Now take a look at each of the steps used in the sub-flow in more detail.</p>
<section id="get-the-pr-diff-get-pr-diff-step">
<h4>Get the PR diff, <code class="docutils literal notranslate"><span class="pre">get_pr_diff_step</span></code><a class="headerlink" href="#get-the-pr-diff-get-pr-diff-step" title="Permalink to this heading">#</a></h4>
<p>This uses a <code class="docutils literal notranslate"><span class="pre">ToolExecutionStep</span></code> to gather the diff information - see the notes on how this is done earlier. When creating it, you need to
provide the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tool</span></code>: Specifies the tool that will called within the step. This is the tool that was created earlier, <code class="docutils literal notranslate"><span class="pre">local_get_pr_diff_tool</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise_exceptions</span></code>: Whether to raise exceptions generated by the tool that is called. Here it is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and so exceptions will be raised.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_mapping</span></code>: Specifies the names used for the input parameters of the step. See <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a> for more details on using an <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> with this type of step.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_mapping</span></code>: Specifies the name used foe the output parameter of the step. The name held in <code class="docutils literal notranslate"><span class="pre">PR_DIFF_IO</span></code> will be mapped to the name for the output parameter of the step. Again, see <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a> for more details on using an <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> with this type of step.</p></li>
</ul>
</section>
<section id="extract-file-diffs-into-a-list-extract-into-list-of-file-diff-step">
<h4>Extract file diffs into a list, <code class="docutils literal notranslate"><span class="pre">extract_into_list_of_file_diff_step</span></code><a class="headerlink" href="#extract-file-diffs-into-a-list-extract-into-list-of-file-diff-step" title="Permalink to this heading">#</a></h4>
<p>You now have the diff information from the PR. This step performs a regex extraction on the raw diff text to extract the code to review.</p>
<p>Use a <code class="docutils literal notranslate"><span class="pre">RegexExtractionStep</span></code> to perform this action. When creating the step, you need to provide the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regex_pattern</span></code>: The regex pattern for the extraction. This uses <code class="docutils literal notranslate"><span class="pre">re.findall</span></code> underneath.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">return_first_match_only</span></code>: You want to return all results, so set this to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_mapping</span></code>: Specifies the names used for the input parameters of the step. The input parameter will be mapped to the name, held in <code class="docutils literal notranslate"><span class="pre">PR_DIFF_IO</span></code>. See <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> for more details on using an <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> with this type of step.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_mapping</span></code>: Specifies the name used for the output parameter of the step. Here, the default name <code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.TEXT</span></code> is renamed to the name defined in <code class="docutils literal notranslate"><span class="pre">PR_DIFF_IO</span></code>. Again, see <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> for more details on using an <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> with this type of step.</p></li>
</ul>
<p><strong>About the pattern:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>diff<span class="w"> </span>--git<span class="o">[</span><span class="se">\s\S</span><span class="o">]</span>*?<span class="o">)(</span>?<span class="o">=</span>diff<span class="w"> </span>--git<span class="p">|</span>$<span class="o">)</span>
</pre></div>
</div>
<p>The pattern looks for text starting with <code class="docutils literal notranslate"><span class="pre">diff</span> <span class="pre">--git</span></code>, followed by any characters (both whitespace [s] and non-whitespace [S]), until it
encounters either another <code class="docutils literal notranslate"><span class="pre">diff</span> <span class="pre">--git</span></code> or the end of the text ($). However, it does not include the next <code class="docutils literal notranslate"><span class="pre">diff</span> <span class="pre">--git</span></code> or the end in the match.</p>
<p>The *? makes it “lazy” or non-greedy, meaning it takes the shortest possible match, rather than the longest.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Recent Large Language Models are very helpful tools to create, debug and explain Regex patterns given a natural language
description.</p>
</div>
<p>Finally, create the sub-flow using the <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> class. You specify the steps in the Flow, the starting step of the Flow, the transitions
between steps and how data, from the variables, is to pass from one step to the next.</p>
<p>The transitions between steps are defined with <a class="reference internal" href="../api/flows.html#controlflowedge"><span class="std std-ref">ControlFlowEdges</span></a>. These take a source step and a destination step. Each
<code class="docutils literal notranslate"><span class="pre">ControlFlowEdge</span></code> maps one such transition.</p>
<p>Passing values between steps is a very common occurrence when building Flows. This is done using <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdges</span></a> which define
that a value is passed from one step to another.</p>
<p>Inputs to a step will most commonly be for parameters within a Jinja template, of which there are several examples of in this tutorial, or parameters to
callables used by tools. In a <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdge</span></a> you can use the name of the parameter, a string, to act as the destination of
a value that is being passed in. It is often less error-prone if you create a variable that is set to the name.</p>
<p>Similarly, when a value is the output of a step, such as when a user’s input is captured in an <a class="reference internal" href="../api/flows.html#inputmessagestep"><span class="std std-ref">InputMessageStep</span></a>, the value is
available as a property of the step, for example <code class="docutils literal notranslate"><span class="pre">InputMessageStep.USER_PROVIDED_INPUT</span></code>. But, it lacks a meaningful name, so it is often helpful to
specify one. This is done using an <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> when creating the step. Again, you will want to create a variable to hold the name to avoid
errors.</p>
</section>
</section>
<section id="defining-a-flow">
<h3>Defining a Flow<a class="headerlink" href="#defining-a-flow" title="Permalink to this heading">#</a></h3>
<p>Defining the Flow is the last step in the code shown above. There are a couple of things that are worth highlighting:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">begin_step</span></code>: A start step needs to be defined for a <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">control_flow_edges</span></code>: The transitions between the steps in the <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> are defined as <a class="reference internal" href="../api/flows.html#controlflowedge"><span class="std std-ref">ControlFlowEdges</span></a>. They have a <code class="docutils literal notranslate"><span class="pre">source_step</span></code>, which defines the start of a transition, and a <code class="docutils literal notranslate"><span class="pre">destination_step</span></code>, which defines the destination of a transition. All transitions for the flow will need to be defined.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_flow_edges</span></code>: Maps the variables between steps connected by a transition using <a class="reference internal" href="../api/flows.html#dataflowedge"><span class="std std-ref">DataFlowEdges</span></a>. It maps variables from a source step into variables in a destination step. You only need to do this for the variables that need to be passed between steps.</p></li>
</ul>
</section>
<section id="testing-the-flow">
<h3>Testing the flow<a class="headerlink" href="#testing-the-flow" title="Permalink to this heading">#</a></h3>
<p>You can test this sub-flow by creating an assistant conversation with <a class="reference internal" href="../api/flows.html#wayflowcore.flow.Flow.start_conversation" title="wayflowcore.flow.Flow.start_conversation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Flow.start_conversation()</span></code></a> and specifying the inputs,
in this case the location of the Git repository. The conversation can then be executed with <a class="reference internal" href="../api/conversation.html#wayflowcore.conversation.Conversation.execute" title="wayflowcore.conversation.Conversation.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Conversation.execute()</span></code></a>.
This returns an object that represents the status of the conversation which you can check to confirm that the conversation has successfully finished.</p>
<p>The code below shows how the inputs are passed in. Set the <code class="docutils literal notranslate"><span class="pre">PATH_TO_DIR</span></code> to the actual path you extracted the sample codebase
Git repository to. You then extract the outputs from the conversation.</p>
<p>The full code for testing the sub-flow is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="n">FinishedStatus</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1"># Replace the path below with the path to your actual codebase sample git repository.</span>
<span class="linenos"> 4</span><span class="n">PATH_TO_DIR</span> <span class="o">=</span> <span class="s2">&quot;path/to/repository_root&quot;</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">test_conversation</span> <span class="o">=</span> <span class="n">retrieve_diff_subflow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="linenos"> 7</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="linenos"> 8</span>        <span class="n">REPO_DIRPATH_IO</span><span class="p">:</span> <span class="n">PATH_TO_DIR</span><span class="p">,</span>
<span class="linenos"> 9</span>    <span class="p">}</span>
<span class="linenos">10</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">test_conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">15</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">FILE_DIFF_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">FILE_DIFF_LIST_IO</span><span class="p">]</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="nb">print</span><span class="p">(</span><span class="n">FILE_DIFF_LIST</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a></p>
</section>
</section>
<section id="part-3-review-the-list-of-diffs">
<h2>Part 3: Review the list of diffs<a class="headerlink" href="#part-3-review-the-list-of-diffs" title="Permalink to this heading">#</a></h2>
<p>Now that we have a list of diffs for each file, we can review them and generate comments using an LLM.</p>
<p>This task can be broken into a sub-flow made up of five steps:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a>: This converts the file diff list into a string to be processed by the following steps.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>: This prefixes the diffs with line numbers for additional context to the LLM.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a>: This extracts the file path from the diff string.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a>: This generates comments using the LLM based on a list of user-defined checks.</p></li>
<li><p><a class="reference internal" href="../api/flows.html#extractvaluefromjsonstep"><span class="std std-ref">ExtractValueFromJsonStep</span></a>: This extracts the comments and lines they apply to from the LLM output.</p></li>
</ul>
<p></p>
<a class="reference internal image-reference" href="../../_images/prbot_generate_comment.svg"><img alt="Sub Flow to review the PR diffs" class="align-center" height="341" src="../../_images/prbot_generate_comment.svg" width="1230" /></a>
<p></p>
<section id="build-the-tools-and-checks">
<h3>Build the tools and checks<a class="headerlink" href="#build-the-tools-and-checks" title="Permalink to this heading">#</a></h3>
<p>Before creating the steps and sub-flow to generate the comments, it is important to define the list of checks
the assistant should perform, along with any specific instructions. Additionally, a tool must be created to prefix
the diffs with line numbers, allowing the LLM to determine where to add comments.</p>
<p>Below is the full code to achieve this. It is broken into sections so that you can see, in detail, what is happening in each part.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="n">PR_BOT_CHECKS</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">  2</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  3</span><span class="sd">Name: TODO_WITHOUT_TICKET</span>
<span class="linenos">  4</span><span class="sd">Description: TODO comments should reference a ticket number for tracking.</span>
<span class="linenos">  5</span><span class="sd">Example code:</span>
<span class="linenos">  6</span><span class="sd">```python</span>
<span class="linenos">  7</span><span class="sd"># TODO: Add validation here</span>
<span class="linenos">  8</span><span class="sd">def process_user_input(data):</span>
<span class="linenos">  9</span><span class="sd">    return data</span>
<span class="linenos"> 10</span><span class="sd">```</span>
<span class="linenos"> 11</span><span class="sd">Example comment:</span>
<span class="linenos"> 12</span><span class="sd">[BOT] TODO_WITHOUT_TICKET: TODO comment should reference a ticket number for tracking (e.g., &quot;TODO: Add validation here (TICKET-1234)&quot;).</span>
<span class="linenos"> 13</span><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 14</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 15</span><span class="sd">Name: MUTABLE_DEFAULT_ARGUMENT</span>
<span class="linenos"> 16</span><span class="sd">Description: Using mutable objects as default arguments can lead to unexpected behavior.</span>
<span class="linenos"> 17</span><span class="sd">Example code:</span>
<span class="linenos"> 18</span><span class="sd">```python</span>
<span class="linenos"> 19</span><span class="sd">def add_item(item, items=[]):</span>
<span class="linenos"> 20</span><span class="sd">    items.append(item)</span>
<span class="linenos"> 21</span><span class="sd">    return items</span>
<span class="linenos"> 22</span><span class="sd">```</span>
<span class="linenos"> 23</span><span class="sd">Example comment:</span>
<span class="linenos"> 24</span><span class="sd">[BOT] MUTABLE_DEFAULT_ARGUMENT: Avoid using mutable default arguments. Use None and initialize in the function: `def add_item(item, items=None): items = items or []`</span>
<span class="linenos"> 25</span><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 26</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 27</span><span class="sd">Name: NON_DESCRIPTIVE_NAME</span>
<span class="linenos"> 28</span><span class="sd">Description: Variable names should clearly indicate their purpose or content.</span>
<span class="linenos"> 29</span><span class="sd">Example code:</span>
<span class="linenos"> 30</span><span class="sd">```python</span>
<span class="linenos"> 31</span><span class="sd">def process(lst):</span>
<span class="linenos"> 32</span><span class="sd">    res = []</span>
<span class="linenos"> 33</span><span class="sd">    for i in lst:</span>
<span class="linenos"> 34</span><span class="sd">        res.append(i * 2)</span>
<span class="linenos"> 35</span><span class="sd">    return res</span>
<span class="linenos"> 36</span><span class="sd">```</span>
<span class="linenos"> 37</span><span class="sd">Example comment:</span>
<span class="linenos"> 38</span><span class="sd">[BOT] NON_DESCRIPTIVE_NAME: Use more descriptive names: &#39;lst&#39; could be &#39;numbers&#39;, &#39;res&#39; could be &#39;doubled_numbers&#39;, &#39;i&#39; could be &#39;number&#39;</span>
<span class="linenos"> 39</span><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 40</span><span class="p">]</span>
<span class="linenos"> 41</span>
<span class="linenos"> 42</span><span class="n">CONCATENATED_CHECKS</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">---</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">check</span> <span class="k">for</span> <span class="n">check</span> <span class="ow">in</span> <span class="n">PR_BOT_CHECKS</span><span class="p">)</span>
<span class="linenos"> 43</span>
<span class="linenos"> 44</span><span class="n">PROMPT_TEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;You are a very experienced code reviewer. You are given a git diff on a file: {{filename}}</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span><span class="s2">## Context</span>
<span class="linenos"> 47</span><span class="s2">The git diff contains all changes of a single file. All lines are prepended with their number. Lines without line number where removed from the file.</span>
<span class="linenos"> 48</span><span class="s2">After the line number, a line that was changed has a &quot;+&quot; before the code. All lines without a &quot;+&quot; are just here for context, you will not comment on them.</span>
<span class="linenos"> 49</span>
<span class="linenos"> 50</span><span class="s2">## Input</span>
<span class="linenos"> 51</span><span class="s2">### Code diff</span>
<span class="linenos"> 52</span><span class="s2">{{diff}}</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span><span class="s2">## Task</span>
<span class="linenos"> 55</span><span class="s2">Your task is to review these changes, according to different rules. Only comment lines that were added, so the lines that have a + just after the line number.</span>
<span class="linenos"> 56</span><span class="s2">The rules are the following:</span>
<span class="linenos"> 57</span>
<span class="linenos"> 58</span><span class="s2">{{checks}}</span>
<span class="linenos"> 59</span>
<span class="linenos"> 60</span><span class="s2">### Reponse Format</span>
<span class="linenos"> 61</span><span class="s2">You need to return a review as a json as follows:</span>
<span class="linenos"> 62</span><span class="s2">```json</span>
<span class="linenos"> 63</span><span class="s2">[</span>
<span class="linenos"> 64</span><span class="s2">    {</span>
<span class="linenos"> 65</span><span class="s2">        &quot;content&quot;: &quot;the comment as a text&quot;,</span>
<span class="linenos"> 66</span><span class="s2">        &quot;suggestion&quot;: &quot;if the change you propose is a single line, then put here the single line rewritten that includes your proposal change. IMPORTANT: a single line, which will erase the current line. Put empty string if no suggestion of if the suggestion is more than a single line&quot;,</span>
<span class="linenos"> 67</span><span class="s2">        &quot;line&quot;: &quot;line number where the comment applies&quot;</span>
<span class="linenos"> 68</span><span class="s2">    },</span>
<span class="linenos"> 69</span><span class="s2">    …</span>
<span class="linenos"> 70</span><span class="s2">]</span>
<span class="linenos"> 71</span><span class="s2">```</span>
<span class="linenos"> 72</span><span class="s2">Please use triple backticks ``` to delimitate your JSON list of comments. Don&#39;t output more than 5 comments, only comment the most relevant sections.</span>
<span class="linenos"> 73</span><span class="s2">If there are no comments and the code seems fine, just output an empty JSON list.&quot;&quot;&quot;</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos"> 77</span><span class="k">def</span><span class="w"> </span><span class="nf">format_git_diff</span><span class="p">(</span><span class="n">diff_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 78</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 79</span><span class="sd">    Formats a git diff by adding line numbers to each line except removal lines.</span>
<span class="linenos"> 80</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span>    <span class="k">def</span><span class="w"> </span><span class="nf">pad_number</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 83</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Right-align a number with specified width using space padding.&quot;&quot;&quot;</span>
<span class="linenos"> 84</span>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
<span class="linenos"> 85</span>
<span class="linenos"> 86</span>    <span class="n">LINE_NUMBER_WIDTH</span> <span class="o">=</span> <span class="mi">5</span>
<span class="linenos"> 87</span>    <span class="n">PADDING_WIDTH</span> <span class="o">=</span> <span class="n">LINE_NUMBER_WIDTH</span> <span class="o">+</span> <span class="mi">1</span>
<span class="linenos"> 88</span>    <span class="n">current_line_number</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos"> 89</span>    <span class="n">formatted_lines</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">diff_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
<span class="linenos"> 92</span>        <span class="c1"># Handle diff header lines (e.g., &quot;@@ -1,7 +1,6 @@&quot;)</span>
<span class="linenos"> 93</span>        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;@@&quot;</span><span class="p">):</span>
<span class="linenos"> 94</span>            <span class="k">try</span><span class="p">:</span>
<span class="linenos"> 95</span>                <span class="c1"># Extract the starting line number and line count</span>
<span class="linenos"> 96</span>                <span class="n">_</span><span class="p">,</span> <span class="n">position_info</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@@&quot;</span><span class="p">)</span>
<span class="linenos"> 97</span>                <span class="n">new_file_info</span> <span class="o">=</span> <span class="n">position_info</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># Remove the &#39;+&#39; prefix</span>
<span class="linenos"> 98</span>                <span class="n">start_line</span><span class="p">,</span> <span class="n">line_count</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">new_file_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span>                <span class="n">current_line_number</span> <span class="o">=</span> <span class="n">start_line</span>
<span class="linenos">101</span>                <span class="n">formatted_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="linenos">102</span>                <span class="k">continue</span>
<span class="linenos">103</span>
<span class="linenos">104</span>            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
<span class="linenos">105</span>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid diff header format: </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">106</span>
<span class="linenos">107</span>        <span class="c1"># Handle content lines</span>
<span class="linenos">108</span>        <span class="k">if</span> <span class="n">current_line_number</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">line</span><span class="p">:</span>
<span class="linenos">109</span>            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">):</span>
<span class="linenos">110</span>                <span class="c1"># Add line number for added/context lines</span>
<span class="linenos">111</span>                <span class="n">line_prefix</span> <span class="o">=</span> <span class="n">pad_number</span><span class="p">(</span><span class="n">current_line_number</span><span class="p">,</span> <span class="n">LINE_NUMBER_WIDTH</span><span class="p">)</span>
<span class="linenos">112</span>                <span class="n">formatted_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">line_prefix</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">113</span>                <span class="n">current_line_number</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">114</span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos">115</span>                <span class="c1"># Just add padding for removal lines</span>
<span class="linenos">116</span>                <span class="n">formatted_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">PADDING_WIDTH</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>
<span class="linenos">117</span>
<span class="linenos">118</span>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">formatted_lines</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/flows.html#extractvaluefromjsonstep"><span class="std std-ref">ExtractValueFromJsonStep</span></a> | <a class="reference internal" href="../api/flows.html#mapstep"><span class="std std-ref">MapStep</span></a> |
<a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a> | <a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a> | <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a></p>
<section id="checks-and-llm-instructions">
<h4>Checks and LLM instructions<a class="headerlink" href="#checks-and-llm-instructions" title="Permalink to this heading">#</a></h4>
<p>You will use three simple checks that are shown below. For each check you specify a name, a description of what the LLM should be checking,
as well as a code and expected comment example so that the LLM gets a better understanding of what the task is about.</p>
<p>The prompt uses a simple structure:</p>
<ol class="arabic simple">
<li><p><strong>Role Definition</strong>: Define who/what you want the LLM to act as (e.g., “You are a very experienced code reviewer”).</p></li>
<li><p><strong>Context Section</strong>: Provide relevant background information or specific circumstances that frame the task.</p></li>
<li><p><strong>Input Section</strong>: Specify the exact information, data, or materials that the LLM will be provided with.</p></li>
<li><p><strong>Task Section</strong>: Clearly state what you want the LLM to do with the input provided.</p></li>
<li><p><strong>Response Format Section</strong>: Define how you want the response to be structured or formatted (e.g., bullet points, JSON, with XML tags, and so on).</p></li>
</ol>
<p>The prompts are defined in the array, <code class="docutils literal notranslate"><span class="pre">PR_BOT_CHECKS</span></code>. The individual prompts for the checks are then concatenated into a single string,
<code class="docutils literal notranslate"><span class="pre">CONCATENATED_CHECKS</span></code>, so that it can be used inside the system prompt you will be passing to the LLM.</p>
<p>Define a system prompt, or prompt template, <code class="docutils literal notranslate"><span class="pre">PROMPT_TEMPLATE</span></code>. It contains placeholders for the diff and the checks that will be replaced
when specialising the prompt for each diff.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>How to write high-quality prompts</strong></p>
<p>There is no consensus on what makes the best LLM prompt. However, it is noted that for recent LLMs, a great strategy
to use to prompt an LLM is simply to be very specific about the task to be solved, giving enough context and explaining
potential edge cases to consider.</p>
<p>Given a prompt, try to determine whether giving the set of instructions to an experienced colleague, that has no prior
context about the task, to solve would be sufficient for them to get to the intended result.</p>
</div>
</section>
<section id="diff-formatting-tool">
<h4>Diff formatting tool<a class="headerlink" href="#diff-formatting-tool" title="Permalink to this heading">#</a></h4>
<p>You next need to create a tool using the <a class="reference internal" href="../api/tools.html#servertool"><span class="std std-ref">ServerTool</span></a> to format the diffs in a manner that makes them consumable
by the LLM. A tool, as you will have already seen, is a simple wrapper around a <code class="docutils literal notranslate"><span class="pre">python</span></code> callable that makes it useable within a flow.</p>
<p>The function, <code class="docutils literal notranslate"><span class="pre">format_git_diff</span></code>, in the code above does the work of formatting the diffs.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information about WayFlow tools please read our guide, <a class="reference internal" href="../howtoguides/howto_build_assistants_with_tools.html"><span class="doc">How to use tools</span></a>.</p>
</div>
</section>
</section>
<section id="id1">
<h3>Building the steps and the sub-flow<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>With the prompts and diff formatting tool written you can now build the second sub-flow.
This sub-flow will iterate over the diffs, generated previously, and then use an LLM to generate review comments from them.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore._utils._templating_helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">render_template_partially</span>
<span class="linenos">  2</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnyProperty</span><span class="p">,</span> <span class="n">DictProperty</span><span class="p">,</span> <span class="n">ListProperty</span><span class="p">,</span> <span class="n">StringProperty</span>
<span class="linenos">  3</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos">  4</span>    <span class="n">ExtractValueFromJsonStep</span><span class="p">,</span>
<span class="linenos">  5</span>    <span class="n">MapStep</span><span class="p">,</span>
<span class="linenos">  6</span>    <span class="n">OutputMessageStep</span><span class="p">,</span>
<span class="linenos">  7</span>    <span class="n">PromptExecutionStep</span><span class="p">,</span>
<span class="linenos">  8</span>    <span class="n">ToolExecutionStep</span><span class="p">,</span>
<span class="linenos">  9</span><span class="p">)</span>
<span class="linenos"> 10</span>
<span class="linenos"> 11</span><span class="c1"># IO Variable Names</span>
<span class="linenos"> 12</span><span class="n">DIFF_TO_STRING_IO</span> <span class="o">=</span> <span class="s2">&quot;$diff_to_string&quot;</span>
<span class="linenos"> 13</span><span class="n">DIFF_WITH_LINES_IO</span> <span class="o">=</span> <span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="linenos"> 14</span><span class="n">FILEPATH_IO</span> <span class="o">=</span> <span class="s2">&quot;$filename&quot;</span>
<span class="linenos"> 15</span><span class="n">JSON_COMMENTS_IO</span> <span class="o">=</span> <span class="s2">&quot;$json_comments&quot;</span>
<span class="linenos"> 16</span><span class="n">EXTRACTED_COMMENTS_IO</span> <span class="o">=</span> <span class="s2">&quot;$extracted_comments&quot;</span>
<span class="linenos"> 17</span><span class="n">NESTED_COMMENT_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="linenos"> 18</span><span class="n">FILEPATH_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$filepath_list&quot;</span>
<span class="linenos"> 19</span>
<span class="linenos"> 20</span><span class="c1"># Define the steps</span>
<span class="linenos"> 21</span>
<span class="linenos"> 22</span><span class="c1"># Step 1: Format the diff to a string</span>
<span class="linenos"> 23</span><span class="n">format_diff_to_string_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span>
<span class="linenos"> 24</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;format_diff_to_string&quot;</span><span class="p">,</span>
<span class="linenos"> 25</span>    <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;{{ message | string }}&quot;</span><span class="p">,</span>
<span class="linenos"> 26</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">},</span>
<span class="linenos"> 27</span><span class="p">)</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span><span class="c1"># Step 2: Add lines on the diff using a tool</span>
<span class="linenos"> 30</span><span class="n">add_lines_on_diff_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos"> 31</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;add_lines_on_diff&quot;</span><span class="p">,</span>
<span class="linenos"> 32</span>    <span class="n">tool</span><span class="o">=</span><span class="n">format_git_diff</span><span class="p">,</span>
<span class="linenos"> 33</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;diff_text&quot;</span><span class="p">:</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">},</span>
<span class="linenos"> 34</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">DIFF_WITH_LINES_IO</span><span class="p">},</span>
<span class="linenos"> 35</span><span class="p">)</span>
<span class="linenos"> 36</span>
<span class="linenos"> 37</span><span class="c1"># Step 3: Extract the file path from the diff string using a regular expression</span>
<span class="linenos"> 38</span><span class="n">extract_file_path_step</span> <span class="o">=</span> <span class="n">RegexExtractionStep</span><span class="p">(</span>
<span class="linenos"> 39</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_file_path&quot;</span><span class="p">,</span>
<span class="linenos"> 40</span>    <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;diff --git a/(.+?) b/&quot;</span><span class="p">,</span>
<span class="linenos"> 41</span>    <span class="n">return_first_match_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 42</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">},</span>
<span class="linenos"> 43</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">FILEPATH_IO</span><span class="p">},</span>
<span class="linenos"> 44</span><span class="p">)</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span><span class="c1"># Step 4: Generate comments using a prompt</span>
<span class="linenos"> 47</span><span class="n">generate_comments_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="linenos"> 48</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_comments&quot;</span><span class="p">,</span>
<span class="linenos"> 49</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="n">render_template_partially</span><span class="p">(</span><span class="n">PROMPT_TEMPLATE</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="n">CONCATENATED_CHECKS</span><span class="p">}),</span>
<span class="linenos"> 50</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos"> 51</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;diff&quot;</span><span class="p">:</span> <span class="n">DIFF_WITH_LINES_IO</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">FILEPATH_IO</span><span class="p">},</span>
<span class="linenos"> 52</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">PromptExecutionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">JSON_COMMENTS_IO</span><span class="p">},</span>
<span class="linenos"> 53</span><span class="p">)</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="c1"># Step 5: Extract comments from the JSON output</span>
<span class="linenos"> 56</span><span class="c1"># Define the value type for extracted comments</span>
<span class="linenos"> 57</span><span class="n">comments_valuetype</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">(</span>
<span class="linenos"> 58</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;values&quot;</span><span class="p">,</span>
<span class="linenos"> 59</span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The extracted comments content and line number&quot;</span><span class="p">,</span>
<span class="linenos"> 60</span>    <span class="n">item_type</span><span class="o">=</span><span class="n">DictProperty</span><span class="p">(</span><span class="n">value_type</span><span class="o">=</span><span class="n">AnyProperty</span><span class="p">()),</span>
<span class="linenos"> 61</span><span class="p">)</span>
<span class="linenos"> 62</span><span class="n">extract_comments_from_json_step</span> <span class="o">=</span> <span class="n">ExtractValueFromJsonStep</span><span class="p">(</span>
<span class="linenos"> 63</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_comments_from_json&quot;</span><span class="p">,</span>
<span class="linenos"> 64</span>    <span class="n">output_values</span><span class="o">=</span><span class="p">{</span><span class="n">comments_valuetype</span><span class="p">:</span> <span class="s1">&#39;[.[] | {&quot;content&quot;: .[&quot;content&quot;], &quot;line&quot;: .[&quot;line&quot;]}]&#39;</span><span class="p">},</span>
<span class="linenos"> 65</span>    <span class="n">retry</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 66</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos"> 67</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ExtractValueFromJsonStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="n">JSON_COMMENTS_IO</span><span class="p">},</span>
<span class="linenos"> 68</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="n">EXTRACTED_COMMENTS_IO</span><span class="p">},</span>
<span class="linenos"> 69</span><span class="p">)</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="c1"># Define the sub flow to generate comments for each file diff</span>
<span class="linenos"> 72</span><span class="n">generate_comments_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos"> 73</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Generate review comments flow&quot;</span><span class="p">,</span>
<span class="linenos"> 74</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">format_diff_to_string_step</span><span class="p">,</span>
<span class="linenos"> 75</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos"> 76</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">format_diff_to_string_step</span><span class="p">,</span> <span class="n">add_lines_on_diff_step</span><span class="p">),</span>
<span class="linenos"> 77</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">add_lines_on_diff_step</span><span class="p">,</span> <span class="n">extract_file_path_step</span><span class="p">),</span>
<span class="linenos"> 78</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">extract_file_path_step</span><span class="p">,</span> <span class="n">generate_comments_step</span><span class="p">),</span>
<span class="linenos"> 79</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">generate_comments_step</span><span class="p">,</span> <span class="n">extract_comments_from_json_step</span><span class="p">),</span>
<span class="linenos"> 80</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">extract_comments_from_json_step</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="linenos"> 81</span>    <span class="p">],</span>
<span class="linenos"> 82</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos"> 83</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos"> 84</span>            <span class="n">format_diff_to_string_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">,</span> <span class="n">add_lines_on_diff_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span>
<span class="linenos"> 85</span>        <span class="p">),</span>
<span class="linenos"> 86</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos"> 87</span>            <span class="n">format_diff_to_string_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">,</span> <span class="n">extract_file_path_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span>
<span class="linenos"> 88</span>        <span class="p">),</span>
<span class="linenos"> 89</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos"> 90</span>            <span class="n">add_lines_on_diff_step</span><span class="p">,</span> <span class="n">DIFF_WITH_LINES_IO</span><span class="p">,</span> <span class="n">generate_comments_step</span><span class="p">,</span> <span class="n">DIFF_WITH_LINES_IO</span>
<span class="linenos"> 91</span>        <span class="p">),</span>
<span class="linenos"> 92</span>        <span class="n">DataFlowEdge</span><span class="p">(</span><span class="n">extract_file_path_step</span><span class="p">,</span> <span class="n">FILEPATH_IO</span><span class="p">,</span> <span class="n">generate_comments_step</span><span class="p">,</span> <span class="n">FILEPATH_IO</span><span class="p">),</span>
<span class="linenos"> 93</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos"> 94</span>            <span class="n">generate_comments_step</span><span class="p">,</span>
<span class="linenos"> 95</span>            <span class="n">JSON_COMMENTS_IO</span><span class="p">,</span>
<span class="linenos"> 96</span>            <span class="n">extract_comments_from_json_step</span><span class="p">,</span>
<span class="linenos"> 97</span>            <span class="n">JSON_COMMENTS_IO</span><span class="p">,</span>
<span class="linenos"> 98</span>        <span class="p">),</span>
<span class="linenos"> 99</span>    <span class="p">],</span>
<span class="linenos">100</span><span class="p">)</span>
<span class="linenos">101</span>
<span class="linenos">102</span><span class="c1"># Use the MapStep to apply the sub flow to each file</span>
<span class="linenos">103</span><span class="n">for_each_file_step</span> <span class="o">=</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="linenos">104</span>    <span class="n">flow</span><span class="o">=</span><span class="n">generate_comments_subflow</span><span class="p">,</span>
<span class="linenos">105</span>    <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
<span class="linenos">106</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">FILE_DIFF_LIST_IO</span><span class="p">},</span>
<span class="linenos">107</span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">108</span>        <span class="n">ListProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">,</span> <span class="n">item_type</span><span class="o">=</span><span class="n">AnyProperty</span><span class="p">()),</span>
<span class="linenos">109</span>        <span class="n">ListProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">FILEPATH_LIST_IO</span><span class="p">,</span> <span class="n">item_type</span><span class="o">=</span><span class="n">StringProperty</span><span class="p">()),</span>
<span class="linenos">110</span>    <span class="p">],</span>
<span class="linenos">111</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">EXTRACTED_COMMENTS_IO</span><span class="p">:</span> <span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">,</span> <span class="n">FILEPATH_IO</span><span class="p">:</span> <span class="n">FILEPATH_LIST_IO</span><span class="p">},</span>
<span class="linenos">112</span><span class="p">)</span>
<span class="linenos">113</span>
<span class="linenos">114</span><span class="n">generate_all_comments_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span><span class="n">for_each_file_step</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/flows.html#property"><span class="std std-ref">Property</span></a> | <a class="reference internal" href="../api/flows.html#listproperty"><span class="std std-ref">ListProperty</span></a> | <a class="reference internal" href="../api/flows.html#dictproperty"><span class="std std-ref">DictProperty</span></a> | <a class="reference internal" href="../api/flows.html#stringproperty"><span class="std std-ref">StringProperty</span></a> |
<a class="reference internal" href="../api/flows.html#extractvaluefromjsonstep"><span class="std std-ref">ExtractValueFromJsonStep</span></a> | <a class="reference internal" href="../api/flows.html#mapstep"><span class="std std-ref">MapStep</span></a> | <a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a> | <a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a> | <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a></p>
<p>Take a look at each of the steps used in the sub-flow to get an understanding of what is happening.</p>
<section id="format-diff-to-string-format-diff-to-string-step">
<h4>Format diff to string, <code class="docutils literal notranslate"><span class="pre">format_diff_to_string_step</span></code><a class="headerlink" href="#format-diff-to-string-format-diff-to-string-step" title="Permalink to this heading">#</a></h4>
<p>This step converts the file diff list into a string so that it can be used by the following steps.</p>
<p>This is done with the <code class="docutils literal notranslate"><span class="pre">string</span></code> Jinja filter as follows: <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">message</span> <span class="pre">|</span> <span class="pre">string</span> <span class="pre">}}</span></code>. It uses an <a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a>
to achieve this.</p>
</section>
<section id="add-lines-to-the-diff-add-lines-on-diff-step">
<h4>Add lines to the diff, <code class="docutils literal notranslate"><span class="pre">add_lines_on_diff_step</span></code><a class="headerlink" href="#add-lines-to-the-diff-add-lines-on-diff-step" title="Permalink to this heading">#</a></h4>
<p>This step prefixes the diff with the line numbers required to review comments. It uses a, <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>, to run the
tool that you previously defined in order to do this.</p>
<p>The input to the tool, within the I/O dictionary, is specified using the <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code>. For all these steps, it is important to remember
that the outputs of one step are linked to the inputs of the next.</p>
</section>
<section id="extract-file-path-extract-file-path-step">
<h4>Extract file path, <code class="docutils literal notranslate"><span class="pre">extract_file_path_step</span></code><a class="headerlink" href="#extract-file-path-extract-file-path-step" title="Permalink to this heading">#</a></h4>
<p>This extracts the file path from the diff string. The file path is needed for assigning the review comments. The <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> step
is used to extract the file path from the diff.</p>
<p>The regular expression is applied to the diff string, extracted form the input map using the <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> parameter.</p>
<p>Note: Compared to the <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> used in Part 1, here only the first match is required.</p>
</section>
<section id="generate-comments-generate-comments-step">
<h4>Generate comments, <code class="docutils literal notranslate"><span class="pre">generate_comments_step</span></code><a class="headerlink" href="#generate-comments-generate-comments-step" title="Permalink to this heading">#</a></h4>
<p>This generates comments using the LLM and the prompt template defined earlier. The <a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a> step executes
the prompt with the LLM defined earlier in this tutorial.</p>
<p>Since the list of checks has already been defined, the template can be pre-rendered using the <code class="docutils literal notranslate"><span class="pre">render_template_partially</span></code> method. This renders the parts of the
template that have been provided, while the remaining information is gathered from the I/O dictionary.</p>
</section>
<section id="extract-comments-from-json-extract-comments-from-json-step">
<h4>Extract comments from JSON, <code class="docutils literal notranslate"><span class="pre">extract_comments_from_json_step</span></code><a class="headerlink" href="#extract-comments-from-json-extract-comments-from-json-step" title="Permalink to this heading">#</a></h4>
<p>This extracts the comments and line numbers from the generated LLM output, which is a serialized JSON structure due to the prompt used.
A <a class="reference internal" href="../api/flows.html#extractvaluefromjsonstep"><span class="std std-ref">ExtractValueFromJsonStep</span></a> is used to do the extraction. When creating the step, specify the following in
addition to the usual <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">output_values</span></code>: This defines the <a class="reference external" href="https://jqlang.github.io/jq/">JQ</a> query to extract the comments form the JSON generated by the LLM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">llms</span></code>: An LLM that can be used to help resolve any parsing errors. This is related to <code class="docutils literal notranslate"><span class="pre">retry</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">retry</span></code>: If parsing fails, you may want to retry. This is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, which results in trying to use the LLM to help resolve any such issues.</p></li>
</ul>
</section>
<section id="create-the-sub-flow-generate-comments-subflow">
<h4>Create the sub-flow, <code class="docutils literal notranslate"><span class="pre">generate_comments_subflow</span></code><a class="headerlink" href="#create-the-sub-flow-generate-comments-subflow" title="Permalink to this heading">#</a></h4>
<p>Here you define what steps are in the sub-flow, what the transitions between the steps are and what will be the starting step. This is exactly
the same process you did previously when defining the sub-flow to fetch the PR data.</p>
</section>
<section id="applying-the-comment-generation-to-all-file-diffs">
<h4>Applying the comment generation to all file diffs<a class="headerlink" href="#applying-the-comment-generation-to-all-file-diffs" title="Permalink to this heading">#</a></h4>
<p>Now that you have the sub-flow create, you need to apply it to every file diff. This is done using a <a class="reference internal" href="../api/flows.html#mapstep"><span class="std std-ref">MapStep</span></a>.
<code class="docutils literal notranslate"><span class="pre">MapStep</span></code> takes a sub-flow as input, in this case, the <code class="docutils literal notranslate"><span class="pre">generate_comments_subflow</span></code>, and applies it to an iterable—in this case, the list of file
diffs.</p>
<p>You simply specify:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">flow</span></code>: The sub-flow to map, that is applied to the iterable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unpack_input</span></code>: Defines how to unpack the input. A <a class="reference external" href="https://jqlang.github.io/jq/">JQ</a>  query can be used to transform the input, but in this case, it is kept as a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_mapping</span></code>: Defines what the sub-flow will iterate over. The key, <code class="docutils literal notranslate"><span class="pre">MapStep.ITERATED_INPUT</span></code>, is used to pass in the diffs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code>: Specifies the values to collect from the output generated by applying the sub-flow. In this case, these will be the generated comments and the associated file path.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../api/flows.html#mapstep"><span class="std std-ref">MapStep</span></a> works similarly to how the Python map function works. For more information, see
<a class="reference external" href="https://docs.python.org/3/library/functions.html#map">https://docs.python.org/3/library/functions.html#map</a></p>
</div>
<p>Finally, create the sub-flow to generate all comments using the helper method <code class="docutils literal notranslate"><span class="pre">create_single_step_flow</span></code>.</p>
</section>
</section>
<section id="testing-the-sub-flow">
<h3>Testing the sub-flow<a class="headerlink" href="#testing-the-sub-flow" title="Permalink to this heading">#</a></h3>
<p>You can test the sub-flow by creating a conversation, as shown in the code below, and specifying the inputs as done in, <code class="docutils literal notranslate"><span class="pre">Part</span> <span class="pre">2:</span> <span class="pre">Retrieve</span> <span class="pre">the</span> <span class="pre">PR</span> <span class="pre">diff</span> <span class="pre">information</span></code>.</p>
<p>Since each sub-flow is tested independently, you can reuse the output from the first sub-flow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># we reuse the FILE_DIFF_LIST from the previous test</span>
<span class="linenos"> 2</span><span class="n">test_conversation</span> <span class="o">=</span> <span class="n">generate_all_comments_subflow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="linenos"> 4</span>        <span class="n">FILE_DIFF_LIST_IO</span><span class="p">:</span> <span class="n">FILE_DIFF_LIST</span><span class="p">,</span>
<span class="linenos"> 5</span>    <span class="p">}</span>
<span class="linenos"> 6</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">test_conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">11</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">NESTED_COMMENT_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">]</span>
<span class="linenos">14</span><span class="n">FILEPATH_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">FILEPATH_LIST_IO</span><span class="p">]</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">NESTED_COMMENT_LIST</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="linenos">16</span><span class="nb">print</span><span class="p">(</span><span class="n">FILEPATH_LIST</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="building-the-final-flow">
<h2>Building the final Flow<a class="headerlink" href="#building-the-final-flow" title="Permalink to this heading">#</a></h2>
<p>Congratulations! You have completed the three sub-flows, which, when combined into a single flow, will retrieve the PR diff information,
generate comments on the diffs using an LLM.</p>
<p>You will wire the sub-flows that you have built together by wrapping them in a <a class="reference internal" href="../api/flows.html#flowexecutionstep"><span class="std std-ref">FlowExecutionStep</span></a>. The
<a class="reference internal" href="../api/flows.html#flowexecutionstep"><span class="std std-ref">FlowExecutionSteps</span></a> are then composed into the final combined Flow.</p>
<p>The code for this is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlowExecutionStep</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Steps</span>
<span class="linenos"> 5</span><span class="n">retrieve_diff_flowstep</span> <span class="o">=</span> <span class="n">FlowExecutionStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;retrieve_diff_flowstep&quot;</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="n">retrieve_diff_subflow</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">generate_all_comments_flowstep</span> <span class="o">=</span> <span class="n">FlowExecutionStep</span><span class="p">(</span>
<span class="linenos"> 7</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_comments_flowstep&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span>    <span class="n">flow</span><span class="o">=</span><span class="n">generate_all_comments_subflow</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">pr_bot</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">12</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;PR bot flow&quot;</span><span class="p">,</span>
<span class="linenos">13</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">retrieve_diff_flowstep</span><span class="p">,</span>
<span class="linenos">14</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">15</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">retrieve_diff_flowstep</span><span class="p">,</span> <span class="n">generate_all_comments_flowstep</span><span class="p">),</span>
<span class="linenos">16</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">generate_all_comments_flowstep</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="linenos">17</span>    <span class="p">],</span>
<span class="linenos">18</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">19</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">20</span>            <span class="n">retrieve_diff_flowstep</span><span class="p">,</span>
<span class="linenos">21</span>            <span class="n">FILE_DIFF_LIST_IO</span><span class="p">,</span>
<span class="linenos">22</span>            <span class="n">generate_all_comments_flowstep</span><span class="p">,</span>
<span class="linenos">23</span>            <span class="n">FILE_DIFF_LIST_IO</span><span class="p">,</span>
<span class="linenos">24</span>        <span class="p">)</span>
<span class="linenos">25</span>    <span class="p">],</span>
<span class="linenos">26</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>API Reference:</strong> <a class="reference internal" href="../api/flows.html#flow"><span class="std std-ref">Flow</span></a> | <a class="reference internal" href="../api/flows.html#flowexecutionstep"><span class="std std-ref">FlowExecutionStep</span></a></p>
<section id="testing-the-combined-assistant">
<h3>Testing the combined assistant<a class="headerlink" href="#testing-the-combined-assistant" title="Permalink to this heading">#</a></h3>
<p>You can now run the PR bot end-to-end on your repo or locally.</p>
<p>Set the <code class="docutils literal notranslate"><span class="pre">PATH_TO_DIR</span></code> to the actual path you extracted the sample codebase Git repository to. You can also see how the output of the conversation
is extracted from the <code class="docutils literal notranslate"><span class="pre">execution_status</span></code> object, <code class="docutils literal notranslate"><span class="pre">execution_status.output_values</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Replace the path below with the path to your actual codebase sample git repository.</span>
<span class="linenos"> 2</span><span class="n">PATH_TO_DIR</span> <span class="o">=</span> <span class="s2">&quot;path/to/repository_root&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">pr_bot</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">REPO_DIRPATH_IO</span><span class="p">:</span> <span class="n">PATH_TO_DIR</span><span class="p">})</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos"> 9</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="nb">print</span><span class="p">(</span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">NESTED_COMMENT_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="agent-spec-exporting-loading">
<h2>Agent Spec Exporting/Loading<a class="headerlink" href="#agent-spec-exporting-loading" title="Permalink to this heading">#</a></h2>
<p>You can export the assistant configuration to its Agent Spec configuration using the <code class="docutils literal notranslate"><span class="pre">AgentSpecExporter</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>

<span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">pr_bot</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is what the <strong>Agent Spec representation will look like ↓</strong></p>
<details class="summary-click-here-to-see-the-assistant-configuration">
<summary>Click here to see the assistant configuration.</summary><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">JSON</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9c65246d-a0dd-4ec4-801d-afd640b2488e&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PR bot flow&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;020c885e-6d0b-472a-bb91-246ab70ab1db&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;020c885e-6d0b-472a-bb91-246ab70ab1db&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a5c123ff-c14c-4291-b174-61d61170f187&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;retrieve_diff_flowstep_to_generate_comments_flowstep_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8a10b23a-2d0c-46c4-82ac-e66ad0b9399b&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___to_retrieve_diff_flowstep_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;020c885e-6d0b-472a-bb91-246ab70ab1db&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dac07720-8a5a-4a61-b1e7-50be506ed937&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_flowstep_to_None End node_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;7b12dfed-309b-46ff-8a2d-bb6f2a3154b6&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;retrieve_diff_flowstep_$file_diff_list_to_generate_comments_flowstep_$file_diff_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;51122844-22d3-40a8-b652-1b020ce24945&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___$repo_dirpath_io_to_retrieve_diff_flowstep_$repo_dirpath_io_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;020c885e-6d0b-472a-bb91-246ab70ab1db&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;72aa469c-98cd-4f0d-9496-0aa454373aef&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_flowstep_$filepath_list_to_None End node_$filepath_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eac1b375-1541-41f7-87f3-f3e626cc2c9c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_flowstep_$nested_comment_list_to_None End node_$nested_comment_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0869acb5-4d8f-4b17-b59b-3b915912b628&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;retrieve_diff_flowstep_$raw_pr_diff_to_None End node_$raw_pr_diff_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9fb2ab9e-ece1-4195-8f51-ef618dcb72bb&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;retrieve_diff_flowstep_$file_diff_list_to_None End node_$file_diff_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FlowNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;43d58c76-23a0-4d10-943d-f9c5e0835a7c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_flowstep&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iterated input for the map step&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;subflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f95e0e5d-f573-4e25-9d68-8508371246f9&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flow_028a7dfb__auto&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iterated input for the map step&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;367ae568-317d-42ec-ae70-4c41afe0dbd0&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;367ae568-317d-42ec-ae70-4c41afe0dbd0&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f62aecf-03a1-4e38-b551-8eef0efaf4bb&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;85a2cdff-6ad4-4f58-8d1c-c8deeb05880c&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___to_step_0_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;367ae568-317d-42ec-ae70-4c41afe0dbd0&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;396e218f-225e-4e36-a33c-a176ca77d345&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_0_to_None End node_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f62aecf-03a1-4e38-b551-8eef0efaf4bb&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6c8b8f78-b587-49ff-a401-6262cdafb0ee&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___$file_diff_list_to_step_0_$file_diff_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;367ae568-317d-42ec-ae70-4c41afe0dbd0&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;84d3a783-38c8-4d53-bc0b-4205732d1fbf&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_0_$filepath_list_to_None End node_$filepath_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f62aecf-03a1-4e38-b551-8eef0efaf4bb&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b7ffd4c3-4a03-47f0-95fc-0ba670010729&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_0_$nested_comment_list_to_None End node_$nested_comment_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f62aecf-03a1-4e38-b551-8eef0efaf4bb&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedMapNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f127a297-842d-4d17-bc89-4704019458d7&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;step_0&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iterated input for the map step&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">&quot;next&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;iterated_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$extracted_comments&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;$filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;flow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3da67cce-b8de-40be-bb8d-e1edead178f0&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Generate review comments flow&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The extracted comments content and line number&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                    </span><span class="nt">&quot;key_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the generated text&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the first extracted value using the regex \&quot;diff --git a/(.+?) b/\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e20f5870-d594-4089-9fcd-08146232910d&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e20f5870-d594-4089-9fcd-08146232910d&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;becf6951-96fd-4152-97d0-4a4eff042a29&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format_diff_to_string_to_add_lines_on_diff_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c197b0d5-8002-4910-ae8d-61f97f1f8f26&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add_lines_on_diff_to_extract_file_path_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;406e0670-cc49-4da4-8d15-8c1c320193e8&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_file_path_to_generate_comments_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e54eb347-2e6c-42c4-a7d6-a42c8059bdf3&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_to_extract_comments_from_json_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ebe5e60b-2724-4b51-b287-79f3e8e7fdd1&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___to_format_diff_to_string_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e20f5870-d594-4089-9fcd-08146232910d&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;98e7631e-7206-4ba9-b5b0-eb308ac89c0f&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_comments_from_json_to_None End node_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ab8ed6de-3ea7-424e-a830-bca10ac57a32&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format_diff_to_string_$diff_to_string_to_add_lines_on_diff_$diff_to_string_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3caaa171-9b4b-44df-8ebd-4d060329f91a&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format_diff_to_string_$diff_to_string_to_extract_file_path_$diff_to_string_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cdf0945b-5a96-42ff-b410-f7c56b5f8e45&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add_lines_on_diff_$diff_with_lines_to_generate_comments_$diff_with_lines_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ca6ed62b-6f6a-405f-9f16-5e1304de6608&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_file_path_$filename_to_generate_comments_$filename_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dec4b4bb-56c9-445a-a282-9d095ff6038e&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_$json_comments_to_extract_comments_from_json_$json_comments_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;611478d7-281a-4587-81e6-97e8c745da53&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep___message_to_format_diff_to_string_message_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e20f5870-d594-4089-9fcd-08146232910d&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;227ae098-0baf-4fe8-9615-094bb386c9a9&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_comments_from_json_$extracted_comments_to_None End node_$extracted_comments_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6e25b4d8-5656-471b-8ffa-1fe8cfffbc05&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments_$json_comments_to_None End node_$json_comments_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fdbf1eeb-0278-4dc8-b897-c924937a1692&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add_lines_on_diff_$diff_with_lines_to_None End node_$diff_with_lines_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3b6bcba7-635b-45fa-b450-cf0a15dae463&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_file_path_$filename_to_None End node_$filename_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2f95704b-4cc1-4983-8a20-e39c79a94e01&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format_diff_to_string_$diff_to_string_to_None End node_$diff_to_string_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedToolNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6000ee3f-ac80-4937-b36c-94fd65cdcda4&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add_lines_on_diff&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;next&quot;</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;tool&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ServerTool&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e936566f-7a25-40f3-9434-3e740a7bfb02&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format_git_diff&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Formats a git diff by adding line numbers to each line except removal lines.&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                      </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;diff_text&quot;</span>
<span class="w">                      </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                      </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">                      </span><span class="p">}</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;diff_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;tool_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;raise_exceptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginOutputMessageNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f0fb3ab4-a950-43b6-a583-6f0044f18c7f&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format_diff_to_string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;next&quot;</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;expose_message_as_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ message | string }}&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;output_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;message_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AGENT&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;rephrase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginRegexNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f6dc822-9352-47ae-9b48-173402a334fe&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_file_path&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raw text to extract information from&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the first extracted value using the regex \&quot;diff --git a/(.+?) b/\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;next&quot;</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;regex_pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;diff --git a/(.+?) b/&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;return_first_match_only&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedLlmNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0ce752d7-3ef1-481b-bb01-c7081ef86103&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_comments&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;filename\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;diff\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the generated text&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;next&quot;</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;llm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VllmConfig&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fb043839-1e69-404c-a178-d8c3de0bfe20&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;default_generation_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_API_URL&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLAMA_MODEL_ID&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;prompt_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are a very experienced code reviewer. You are given a git diff on a file: {{ filename }}\n\n## Context\nThe git diff contains all changes of a single file. All lines are prepended with their number. Lines without line number where removed from the file.\nAfter the line number, a line that was changed has a \&quot;+\&quot; before the code. All lines without a \&quot;+\&quot; are just here for context, you will not comment on them.\n\n## Input\n### Code diff\n{{ diff }}\n\n## Task\nYour task is to review these changes, according to different rules. Only comment lines that were added, so the lines that have a + just after the line number.\nThe rules are the following:\n\n\nName: TODO_WITHOUT_TICKET\nDescription: TODO comments should reference a ticket number for tracking.\nExample code:\n```python\n# TODO: Add validation here\ndef process_user_input(data):\n    return data\n```\nExample comment:\n[BOT] TODO_WITHOUT_TICKET: TODO comment should reference a ticket number for tracking (e.g., \&quot;TODO: Add validation here (TICKET-1234)\&quot;).\n\n\n---\n\n\nName: MUTABLE_DEFAULT_ARGUMENT\nDescription: Using mutable objects as default arguments can lead to unexpected behavior.\nExample code:\n```python\ndef add_item(item, items=[]):\n    items.append(item)\n    return items\n```\nExample comment:\n[BOT] MUTABLE_DEFAULT_ARGUMENT: Avoid using mutable default arguments. Use None and initialize in the function: `def add_item(item, items=None): items = items or []`\n\n\n---\n\n\nName: NON_DESCRIPTIVE_NAME\nDescription: Variable names should clearly indicate their purpose or content.\nExample code:\n```python\ndef process(lst):\n    res = []\n    for i in lst:\n        res.append(i * 2)\n    return res\n```\nExample comment:\n[BOT] NON_DESCRIPTIVE_NAME: Use more descriptive names: &#39;lst&#39; could be &#39;numbers&#39;, &#39;res&#39; could be &#39;doubled_numbers&#39;, &#39;i&#39; could be &#39;number&#39;\n\n\n### Reponse Format\nYou need to return a review as a json as follows:\n```json\n[\n    {\n        \&quot;content\&quot;: \&quot;the comment as a text\&quot;,\n        \&quot;suggestion\&quot;: \&quot;if the change you propose is a single line, then put here the single line rewritten that includes your proposal change. IMPORTANT: a single line, which will erase the current line. Put empty string if no suggestion of if the suggestion is more than a single line\&quot;,\n        \&quot;line\&quot;: \&quot;line number where the comment applies\&quot;\n    },\n    \u2026\n]\n```\nPlease use triple backticks ``` to delimitate your JSON list of comments. Don&#39;t output more than 5 comments, only comment the most relevant sections.\nIf there are no comments and the code seems fine, just output an empty JSON list.&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;diff&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;prompt_template_object&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;send_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginExtractNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48057b9c-bee7-4286-baf5-625b6f1a6f1a&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_comments_from_json&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raw text to extract information from&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The extracted comments content and line number&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                        </span><span class="nt">&quot;key_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                      </span><span class="p">},</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;next&quot;</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;output_values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[.[] | {\&quot;content\&quot;: .[\&quot;content\&quot;], \&quot;line\&quot;: .[\&quot;line\&quot;]}]&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;e20f5870-d594-4089-9fcd-08146232910d&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e20f5870-d594-4089-9fcd-08146232910d&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep__&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;next&quot;</span>
<span class="w">                  </span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;39f36227-8910-414c-8b6b-517c0d65b0d8&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;None End node&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;End node representing all transitions to None in the WayFlow flow&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                  </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The extracted comments content and line number&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                        </span><span class="nt">&quot;key_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                      </span><span class="p">},</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the generated text&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the first extracted value using the regex \&quot;diff --git a/(.+?) b/\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The extracted comments content and line number&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                        </span><span class="nt">&quot;key_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                      </span><span class="p">},</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$extracted_comments&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the generated text&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$json_comments&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the first extracted value using the regex \&quot;diff --git a/(.+?) b/\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filename&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the message added to the messages list&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$diff_to_string&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">                  </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;next&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;unpack_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;parallel_execution&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;367ae568-317d-42ec-ae70-4c41afe0dbd0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;367ae568-317d-42ec-ae70-4c41afe0dbd0&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep__&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iterated input for the map step&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iterated input for the map step&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;message\&quot; input variable for the template&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">&quot;next&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;6f62aecf-03a1-4e38-b551-8eef0efaf4bb&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6f62aecf-03a1-4e38-b551-8eef0efaf4bb&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;None End node&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;End node representing all transitions to None in the WayFlow flow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;next&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FlowNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47e367be-4d74-49dc-ac3b-89bb97ffa7df&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;retrieve_diff_flowstep&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;subflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9e7aed22-876c-4c32-9d44-20ee7ceb3771&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Retrieve PR diff flow&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;start_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4fcb7ebe-325b-446d-a46b-59187c30e260&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4fcb7ebe-325b-446d-a46b-59187c30e260&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dd0e56ab-1267-4345-9f59-ecc053baf2af&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;control_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;60dc14b8-d9b9-4aec-a958-9f3676848f48&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_step_to_get_pr_diff_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4fcb7ebe-325b-446d-a46b-59187c30e260&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;500f97de-78b1-42e0-944c-0375dfca734e&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_pr_diff_to_extract_into_list_of_file_diff_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ControlFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;22d0cf0d-8edb-4b04-8f54-a234f5705360&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_into_list_of_file_diff_to_None End node_control_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;from_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;from_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;to_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dd0e56ab-1267-4345-9f59-ecc053baf2af&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;data_flow_connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;106e3740-de45-4472-8168-2873ae1dbc82&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_step_$repo_dirpath_io_to_get_pr_diff_$repo_dirpath_io_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4fcb7ebe-325b-446d-a46b-59187c30e260&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a32cbb1c-eafe-4138-80e2-2cf2e1248312&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_pr_diff_$raw_pr_diff_to_extract_into_list_of_file_diff_$raw_pr_diff_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3ef5dcf4-acdf-4962-8df6-07b53f249e18&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_pr_diff_$raw_pr_diff_to_None End node_$raw_pr_diff_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dd0e56ab-1267-4345-9f59-ecc053baf2af&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataFlowEdge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;08cbca39-e591-4cf4-9057-ae67938d9557&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_into_list_of_file_diff_$file_diff_list_to_None End node_$file_diff_list_data_flow_edge&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;source_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;source_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;$component_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dd0e56ab-1267-4345-9f59-ecc053baf2af&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;destination_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;$referenced_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedToolNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5c73da9c-6ba9-44ce-aab1-212a78d0a720&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_pr_diff&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">&quot;next&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;tool&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ServerTool&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;275aaf19-cdd4-4ed7-a436-e53f922cd740&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local_get_pr_diff_tool&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;# docs-skiprow\nRetrieves code diff with a git command given the  # docs-skiprow\npath to the repository root folder.  # docs-skiprow&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;repo_dirpath&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool_output&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;repo_dirpath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;tool_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;raise_exceptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;4fcb7ebe-325b-446d-a46b-59187c30e260&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4fcb7ebe-325b-446d-a46b-59187c30e260&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">&quot;next&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PluginRegexNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cf841053-2414-48b6-ba6d-0f0f5e11044c&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extract_into_list_of_file_diff&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raw text to extract information from&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">&quot;next&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;input_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;output_mapping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;regex_pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;return_first_match_only&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;component_plugin_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NodesPlugin&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;component_plugin_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.0.dev0&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;dd0e56ab-1267-4345-9f59-ecc053baf2af&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dd0e56ab-1267-4345-9f59-ecc053baf2af&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;None End node&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;End node representing all transitions to None in the WayFlow flow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;next&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;020c885e-6d0b-472a-bb91-246ab70ab1db&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;020c885e-6d0b-472a-bb91-246ab70ab1db&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__StartStep__&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;__metadata_info__&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;next&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;component_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EndNode&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a544af64-e63b-4ccf-9ab0-8d25cdbc0b93&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;None End node&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;End node representing all transitions to None in the WayFlow flow&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$filepath_list&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the list of extracted value using the regex \&quot;(diff --git[\\s\\S]*?)(?=diff --git|$)\&quot; from the raw input&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$file_diff_list&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;branches&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nt">&quot;branch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;next&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;agentspec_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;25.4.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9c65246d-a0dd-4ec4-801d-afd640b2488e</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PR bot flow</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">inputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="nt">outputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">  </span><span class="nt">items</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">  </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">  </span><span class="nt">items</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">start_node</span><span class="p">:</span>
<span class="w">  </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">020c885e-6d0b-472a-bb91-246ab70ab1db</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">020c885e-6d0b-472a-bb91-246ab70ab1db</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a5c123ff-c14c-4291-b174-61d61170f187</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retrieve_diff_flowstep_to_generate_comments_flowstep_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8a10b23a-2d0c-46c4-82ac-e66ad0b9399b</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___to_retrieve_diff_flowstep_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">020c885e-6d0b-472a-bb91-246ab70ab1db</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dac07720-8a5a-4a61-b1e7-50be506ed937</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_flowstep_to_None End node_control_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="w">  </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7b12dfed-309b-46ff-8a2d-bb6f2a3154b6</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retrieve_diff_flowstep_$file_diff_list_to_generate_comments_flowstep_$file_diff_list_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">51122844-22d3-40a8-b652-1b020ce24945</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___$repo_dirpath_io_to_retrieve_diff_flowstep_$repo_dirpath_io_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">020c885e-6d0b-472a-bb91-246ab70ab1db</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">72aa469c-98cd-4f0d-9496-0aa454373aef</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_flowstep_$filepath_list_to_None End node_$filepath_list_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eac1b375-1541-41f7-87f3-f3e626cc2c9c</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_flowstep_$nested_comment_list_to_None End node_$nested_comment_list_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0869acb5-4d8f-4b17-b59b-3b915912b628</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retrieve_diff_flowstep_$raw_pr_diff_to_None End node_$raw_pr_diff_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9fb2ab9e-ece1-4195-8f51-ef618dcb72bb</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retrieve_diff_flowstep_$file_diff_list_to_None End node_$file_diff_list_data_flow_edge</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="w">  </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">  </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">    </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="w">  </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FlowNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">43d58c76-23a0-4d10-943d-f9c5e0835a7c</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_flowstep</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iterated input for the map step</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">subflow</span><span class="p">:</span>
<span class="w">      </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f95e0e5d-f573-4e25-9d68-8508371246f9</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flow_028a7dfb__auto</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iterated input for the map step</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">          </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">      </span><span class="nt">start_node</span><span class="p">:</span>
<span class="w">        </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">367ae568-317d-42ec-ae70-4c41afe0dbd0</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">367ae568-317d-42ec-ae70-4c41afe0dbd0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f62aecf-03a1-4e38-b551-8eef0efaf4bb</span>
<span class="w">      </span><span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">85a2cdff-6ad4-4f58-8d1c-c8deeb05880c</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___to_step_0_control_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">          </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">367ae568-317d-42ec-ae70-4c41afe0dbd0</span>
<span class="w">        </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">396e218f-225e-4e36-a33c-a176ca77d345</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_0_to_None End node_control_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">        </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f62aecf-03a1-4e38-b551-8eef0efaf4bb</span>
<span class="w">      </span><span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6c8b8f78-b587-49ff-a401-6262cdafb0ee</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___$file_diff_list_to_step_0_$file_diff_list_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">          </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">367ae568-317d-42ec-ae70-4c41afe0dbd0</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">84d3a783-38c8-4d53-bc0b-4205732d1fbf</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_0_$filepath_list_to_None End node_$filepath_list_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f62aecf-03a1-4e38-b551-8eef0efaf4bb</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b7ffd4c3-4a03-47f0-95fc-0ba670010729</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_0_$nested_comment_list_to_None End node_$nested_comment_list_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f62aecf-03a1-4e38-b551-8eef0efaf4bb</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">      </span><span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">        </span><span class="nt">f127a297-842d-4d17-bc89-4704019458d7</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtendedMapNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f127a297-842d-4d17-bc89-4704019458d7</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step_0</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iterated input for the map step</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">          </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">iterated_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">          </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">$extracted_comments</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">            </span><span class="nt">$filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">          </span><span class="nt">flow</span><span class="p">:</span>
<span class="w">            </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3da67cce-b8de-40be-bb8d-e1edead178f0</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generate review comments flow</span>
<span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">            </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">              </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">            </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">            </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The extracted comments content and line number</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">              </span><span class="nt">items</span><span class="p">:</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">                </span><span class="nt">additionalProperties</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">key_type</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the generated text</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the first extracted value using the regex &quot;diff --git a/(.+?)</span>
<span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">b/&quot; from the raw input</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">              </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">            </span><span class="nt">start_node</span><span class="p">:</span>
<span class="w">              </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e20f5870-d594-4089-9fcd-08146232910d</span>
<span class="w">            </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e20f5870-d594-4089-9fcd-08146232910d</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">            </span><span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">becf6951-96fd-4152-97d0-4a4eff042a29</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">format_diff_to_string_to_add_lines_on_diff_control_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">              </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c197b0d5-8002-4910-ae8d-61f97f1f8f26</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add_lines_on_diff_to_extract_file_path_control_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">              </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">406e0670-cc49-4da4-8d15-8c1c320193e8</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_file_path_to_generate_comments_control_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">              </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e54eb347-2e6c-42c4-a7d6-a42c8059bdf3</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_to_extract_comments_from_json_control_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">              </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ebe5e60b-2724-4b51-b287-79f3e8e7fdd1</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___to_format_diff_to_string_control_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e20f5870-d594-4089-9fcd-08146232910d</span>
<span class="w">              </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">98e7631e-7206-4ba9-b5b0-eb308ac89c0f</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_comments_from_json_to_None End node_control_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span>
<span class="w">              </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">            </span><span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ab8ed6de-3ea7-424e-a830-bca10ac57a32</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">format_diff_to_string_$diff_to_string_to_add_lines_on_diff_$diff_to_string_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3caaa171-9b4b-44df-8ebd-4d060329f91a</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">format_diff_to_string_$diff_to_string_to_extract_file_path_$diff_to_string_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cdf0945b-5a96-42ff-b410-f7c56b5f8e45</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add_lines_on_diff_$diff_with_lines_to_generate_comments_$diff_with_lines_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca6ed62b-6f6a-405f-9f16-5e1304de6608</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_file_path_$filename_to_generate_comments_$filename_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dec4b4bb-56c9-445a-a282-9d095ff6038e</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_$json_comments_to_extract_comments_from_json_$json_comments_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">611478d7-281a-4587-81e6-97e8c745da53</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep___message_to_format_diff_to_string_message_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e20f5870-d594-4089-9fcd-08146232910d</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">227ae098-0baf-4fe8-9615-094bb386c9a9</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_comments_from_json_$extracted_comments_to_None End node_$extracted_comments_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6e25b4d8-5656-471b-8ffa-1fe8cfffbc05</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments_$json_comments_to_None End node_$json_comments_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fdbf1eeb-0278-4dc8-b897-c924937a1692</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add_lines_on_diff_$diff_with_lines_to_None End node_$diff_with_lines_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3b6bcba7-635b-45fa-b450-cf0a15dae463</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_file_path_$filename_to_None End node_$filename_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2f95704b-4cc1-4983-8a20-e39c79a94e01</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">format_diff_to_string_$diff_to_string_to_None End node_$diff_to_string_data_flow_edge</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">              </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">              </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">              </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">              </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">            </span><span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">              </span><span class="nt">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtendedToolNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000ee3f-ac80-4937-b36c-94fd65cdcda4</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add_lines_on_diff</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">                </span><span class="nt">tool</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerTool</span>
<span class="w">                  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e936566f-7a25-40f3-9434-3e740a7bfb02</span>
<span class="w">                  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">format_git_diff</span>
<span class="w">                  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Formats a git diff by adding line numbers to each line</span>
<span class="w">                    </span><span class="l l-Scalar l-Scalar-Plain">except removal lines.</span>
<span class="w">                  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                  </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">diff_text</span>
<span class="w">                  </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">                </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">diff_text</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">tool_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">                </span><span class="nt">raise_exceptions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">                </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">                </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">              </span><span class="nt">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginOutputMessageNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f0fb3ab4-a950-43b6-a583-6f0044f18c7f</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">format_diff_to_string</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">                </span><span class="nt">expose_message_as_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">                </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">                </span><span class="nt">input_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">output_message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">message_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AGENT</span>
<span class="w">                </span><span class="nt">rephrase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">                </span><span class="nt">llm_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">                </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">                </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">              </span><span class="nt">6f6dc822-9352-47ae-9b48-173402a334fe</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginRegexNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f6dc822-9352-47ae-9b48-173402a334fe</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_file_path</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">raw text to extract information from</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the first extracted value using the regex &quot;diff --git</span>
<span class="w">                    </span><span class="l l-Scalar l-Scalar-Plain">a/(.+?) b/&quot; from the raw input</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">                  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">                </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">                </span><span class="nt">regex_pattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">diff --git a/(.+?) b/</span>
<span class="w">                </span><span class="nt">return_first_match_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">                </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">              </span><span class="nt">0ce752d7-3ef1-481b-bb01-c7081ef86103</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtendedLlmNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0ce752d7-3ef1-481b-bb01-c7081ef86103</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_comments</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;filename&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;diff&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the generated text</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">                </span><span class="nt">llm_config</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VllmConfig</span>
<span class="w">                  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fb043839-1e69-404c-a178-d8c3de0bfe20</span>
<span class="w">                  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_MODEL_ID</span>
<span class="w">                  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">                  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                  </span><span class="nt">default_generation_parameters</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">                  </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_API_URL</span>
<span class="w">                  </span><span class="nt">model_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LLAMA_MODEL_ID</span>
<span class="w">                </span><span class="nt">prompt_template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;You</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">very</span><span class="nv"> </span><span class="s">experienced</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">reviewer.</span><span class="nv"> </span><span class="s">You</span><span class="nv"> </span><span class="s">are\</span>
<span class="w">                  </span><span class="s">\ given</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">git</span><span class="nv"> </span><span class="s">diff</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">file:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">filename</span><span class="nv"> </span><span class="s">}}\n\n##</span><span class="nv"> </span><span class="s">Context\nThe\</span>
<span class="w">                  </span><span class="s">\ git</span><span class="nv"> </span><span class="s">diff</span><span class="nv"> </span><span class="s">contains</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">changes</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">file.</span><span class="nv"> </span><span class="s">All</span><span class="nv"> </span><span class="s">lines</span><span class="nv"> </span><span class="s">are\</span>
<span class="w">                  </span><span class="s">\ prepended</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">their</span><span class="nv"> </span><span class="s">number.</span><span class="nv"> </span><span class="s">Lines</span><span class="nv"> </span><span class="s">without</span><span class="nv"> </span><span class="s">line</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">where</span><span class="nv"> </span><span class="s">removed\</span>
<span class="w">                  </span><span class="s">\ from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">file.\nAfter</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">line</span><span class="nv"> </span><span class="s">number,</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">line</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">was</span><span class="nv"> </span><span class="s">changed\</span>
<span class="w">                  </span><span class="s">\ has</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">\&quot;+\&quot;</span><span class="nv"> </span><span class="s">before</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">code.</span><span class="nv"> </span><span class="s">All</span><span class="nv"> </span><span class="s">lines</span><span class="nv"> </span><span class="s">without</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">\&quot;+\&quot;</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">just\</span>
<span class="w">                  </span><span class="s">\ here</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">context,</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">comment</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">them.\n\n##</span><span class="nv"> </span><span class="s">Input\n\</span>
<span class="w">                  </span><span class="s">###</span><span class="nv"> </span><span class="s">Code</span><span class="nv"> </span><span class="s">diff\n{{</span><span class="nv"> </span><span class="s">diff</span><span class="nv"> </span><span class="s">}}\n\n##</span><span class="nv"> </span><span class="s">Task\nYour</span><span class="nv"> </span><span class="s">task</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">review</span><span class="nv"> </span><span class="s">these\</span>
<span class="w">                  </span><span class="s">\ changes,</span><span class="nv"> </span><span class="s">according</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">different</span><span class="nv"> </span><span class="s">rules.</span><span class="nv"> </span><span class="s">Only</span><span class="nv"> </span><span class="s">comment</span><span class="nv"> </span><span class="s">lines</span><span class="nv"> </span><span class="s">that\</span>
<span class="w">                  </span><span class="s">\ were</span><span class="nv"> </span><span class="s">added,</span><span class="nv"> </span><span class="s">so</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">lines</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">just</span><span class="nv"> </span><span class="s">after</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">line</span><span class="nv"> </span><span class="s">number.\n\</span>
<span class="w">                  </span><span class="s">The</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following:\n\n\nName:</span><span class="nv"> </span><span class="s">TODO_WITHOUT_TICKET\nDescription:\</span>
<span class="w">                  </span><span class="s">\ TODO</span><span class="nv"> </span><span class="s">comments</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">reference</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">ticket</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">tracking.\n\</span>
<span class="w">                  </span><span class="s">Example</span><span class="nv"> </span><span class="s">code:\n```python\n#</span><span class="nv"> </span><span class="s">TODO:</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">validation</span><span class="nv"> </span><span class="s">here\ndef</span><span class="nv"> </span><span class="s">process_user_input(data):\n\</span>
<span class="w">                  </span><span class="s">\ </span><span class="nv">   </span><span class="s">return</span><span class="nv"> </span><span class="s">data\n```\nExample</span><span class="nv"> </span><span class="s">comment:\n[BOT]</span><span class="nv"> </span><span class="s">TODO_WITHOUT_TICKET:\</span>
<span class="w">                  </span><span class="s">\ TODO</span><span class="nv"> </span><span class="s">comment</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">reference</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">ticket</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">tracking</span><span class="nv"> </span><span class="s">(e.g.,\</span>
<span class="w">                  </span><span class="s">\ \&quot;TODO:</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">validation</span><span class="nv"> </span><span class="s">here</span><span class="nv"> </span><span class="s">(TICKET-1234)\&quot;).\n\n\n---\n\n\nName:\</span>
<span class="w">                  </span><span class="s">\ MUTABLE_DEFAULT_ARGUMENT\nDescription:</span><span class="nv"> </span><span class="s">Using</span><span class="nv"> </span><span class="s">mutable</span><span class="nv"> </span><span class="s">objects</span><span class="nv"> </span><span class="s">as\</span>
<span class="w">                  </span><span class="s">\ default</span><span class="nv"> </span><span class="s">arguments</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">lead</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">unexpected</span><span class="nv"> </span><span class="s">behavior.\nExample</span><span class="nv"> </span><span class="s">code:\n\</span>
<span class="w">                  </span><span class="s">```python\ndef</span><span class="nv"> </span><span class="s">add_item(item,</span><span class="nv"> </span><span class="s">items=[]):\n</span><span class="nv">    </span><span class="s">items.append(item)\n\</span>
<span class="w">                  </span><span class="s">\ </span><span class="nv">   </span><span class="s">return</span><span class="nv"> </span><span class="s">items\n```\nExample</span><span class="nv"> </span><span class="s">comment:\n[BOT]</span><span class="nv"> </span><span class="s">MUTABLE_DEFAULT_ARGUMENT:\</span>
<span class="w">                  </span><span class="s">\ Avoid</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">mutable</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">arguments.</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">None</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">initialize\</span>
<span class="w">                  </span><span class="s">\ in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">function:</span><span class="nv"> </span><span class="s">`def</span><span class="nv"> </span><span class="s">add_item(item,</span><span class="nv"> </span><span class="s">items=None):</span><span class="nv"> </span><span class="s">items</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">items\</span>
<span class="w">                  </span><span class="s">\ or</span><span class="nv"> </span><span class="s">[]`\n\n\n---\n\n\nName:</span><span class="nv"> </span><span class="s">NON_DESCRIPTIVE_NAME\nDescription:\</span>
<span class="w">                  </span><span class="s">\ Variable</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">clearly</span><span class="nv"> </span><span class="s">indicate</span><span class="nv"> </span><span class="s">their</span><span class="nv"> </span><span class="s">purpose</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">content.\n\</span>
<span class="w">                  </span><span class="s">Example</span><span class="nv"> </span><span class="s">code:\n```python\ndef</span><span class="nv"> </span><span class="s">process(lst):\n</span><span class="nv">    </span><span class="s">res</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">[]\n</span><span class="nv">    </span><span class="s">for\</span>
<span class="w">                  </span><span class="s">\ i</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">lst:\n</span><span class="nv">        </span><span class="s">res.append(i</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">2)\n</span><span class="nv">    </span><span class="s">return</span><span class="nv"> </span><span class="s">res\n```\nExample\</span>
<span class="w">                  </span><span class="s">\ comment:\n[BOT]</span><span class="nv"> </span><span class="s">NON_DESCRIPTIVE_NAME:</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">descriptive</span><span class="nv"> </span><span class="s">names:\</span>
<span class="w">                  </span><span class="s">\ &#39;lst&#39;</span><span class="nv"> </span><span class="s">could</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">&#39;numbers&#39;,</span><span class="nv"> </span><span class="s">&#39;res&#39;</span><span class="nv"> </span><span class="s">could</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">&#39;doubled_numbers&#39;,</span><span class="nv"> </span><span class="s">&#39;i&#39;\</span>
<span class="w">                  </span><span class="s">\ could</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">&#39;number&#39;\n\n\n###</span><span class="nv"> </span><span class="s">Reponse</span><span class="nv"> </span><span class="s">Format\nYou</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">return\</span>
<span class="w">                  </span><span class="s">\ a</span><span class="nv"> </span><span class="s">review</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">json</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">follows:\n```json\n[\n</span><span class="nv">    </span><span class="s">{\n</span><span class="nv">        </span><span class="s">\&quot;\</span>
<span class="w">                  </span><span class="s">content\&quot;:</span><span class="nv"> </span><span class="s">\&quot;the</span><span class="nv"> </span><span class="s">comment</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">text\&quot;,\n</span><span class="nv">        </span><span class="s">\&quot;suggestion\&quot;:</span><span class="nv"> </span><span class="s">\&quot;\</span>
<span class="w">                  </span><span class="s">if</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">change</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">propose</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">line,</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">put</span><span class="nv"> </span><span class="s">here</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">single\</span>
<span class="w">                  </span><span class="s">\ line</span><span class="nv"> </span><span class="s">rewritten</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">includes</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">proposal</span><span class="nv"> </span><span class="s">change.</span><span class="nv"> </span><span class="s">IMPORTANT:\</span>
<span class="w">                  </span><span class="s">\ a</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">line,</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">erase</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">current</span><span class="nv"> </span><span class="s">line.</span><span class="nv"> </span><span class="s">Put</span><span class="nv"> </span><span class="s">empty</span><span class="nv"> </span><span class="s">string\</span>
<span class="w">                  </span><span class="s">\ if</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">suggestion</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">suggestion</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">than</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">line\&quot;\</span>
<span class="w">                  </span><span class="s">,\n</span><span class="nv">        </span><span class="s">\&quot;line\&quot;:</span><span class="nv"> </span><span class="s">\&quot;line</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">where</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">comment</span><span class="nv"> </span><span class="s">applies\&quot;\n\</span>
<span class="w">                  </span><span class="s">\ </span><span class="nv">   </span><span class="s">},\n</span><span class="nv">    </span><span class="se">\u2026</span><span class="s">\n]\n```\nPlease</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">triple</span><span class="nv"> </span><span class="s">backticks</span><span class="nv"> </span><span class="s">```</span><span class="nv"> </span><span class="s">to\</span>
<span class="w">                  </span><span class="s">\ delimitate</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">JSON</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">comments.</span><span class="nv"> </span><span class="s">Don&#39;t</span><span class="nv"> </span><span class="s">output</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">than\</span>
<span class="w">                  </span><span class="s">\ 5</span><span class="nv"> </span><span class="s">comments,</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">comment</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">most</span><span class="nv"> </span><span class="s">relevant</span><span class="nv"> </span><span class="s">sections.\nIf</span><span class="nv"> </span><span class="s">there\</span>
<span class="w">                  </span><span class="s">\ are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">comments</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">seems</span><span class="nv"> </span><span class="s">fine,</span><span class="nv"> </span><span class="s">just</span><span class="nv"> </span><span class="s">output</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">empty\</span>
<span class="w">                  </span><span class="s">\ JSON</span><span class="nv"> </span><span class="s">list.&quot;</span>
<span class="w">                </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">diff</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">                  </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">                </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">                </span><span class="nt">prompt_template_object</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">                </span><span class="nt">send_message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">                </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">                </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">              </span><span class="nt">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginExtractNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48057b9c-bee7-4286-baf5-625b6f1a6f1a</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_comments_from_json</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">raw text to extract information from</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The extracted comments content and line number</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">                  </span><span class="nt">items</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">                    </span><span class="nt">additionalProperties</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                    </span><span class="nt">key_type</span><span class="p">:</span>
<span class="w">                      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">                </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">                </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">                </span><span class="nt">output_values</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;[.[]</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">{&quot;content&quot;:</span><span class="nv"> </span><span class="s">.[&quot;content&quot;],</span><span class="nv"> </span><span class="s">&quot;line&quot;:</span><span class="nv"> </span><span class="s">.[&quot;line&quot;]}]&#39;</span>
<span class="w">                </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">                </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">              </span><span class="nt">e20f5870-d594-4089-9fcd-08146232910d</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e20f5870-d594-4089-9fcd-08146232910d</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep__</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">              </span><span class="nt">39f36227-8910-414c-8b6b-517c0d65b0d8</span><span class="p">:</span>
<span class="w">                </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39f36227-8910-414c-8b6b-517c0d65b0d8</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None End node</span>
<span class="w">                </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">End node representing all transitions to None in the</span>
<span class="w">                  </span><span class="l l-Scalar l-Scalar-Plain">WayFlow flow</span>
<span class="w">                </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The extracted comments content and line number</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">                  </span><span class="nt">items</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">                    </span><span class="nt">additionalProperties</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                    </span><span class="nt">key_type</span><span class="p">:</span>
<span class="w">                      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the generated text</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the first extracted value using the regex &quot;diff --git</span>
<span class="w">                    </span><span class="l l-Scalar l-Scalar-Plain">a/(.+?) b/&quot; from the raw input</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">                  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The extracted comments content and line number</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">                  </span><span class="nt">items</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">                    </span><span class="nt">additionalProperties</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">                    </span><span class="nt">key_type</span><span class="p">:</span>
<span class="w">                      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$extracted_comments</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the generated text</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$json_comments</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_with_lines</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the first extracted value using the regex &quot;diff --git</span>
<span class="w">                    </span><span class="l l-Scalar l-Scalar-Plain">a/(.+?) b/&quot; from the raw input</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filename</span>
<span class="w">                  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the message added to the messages list</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">                  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$diff_to_string</span>
<span class="w">                </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">                </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">          </span><span class="nt">unpack_input</span><span class="p">:</span>
<span class="w">            </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">          </span><span class="nt">parallel_execution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">          </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">          </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">        </span><span class="nt">367ae568-317d-42ec-ae70-4c41afe0dbd0</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">367ae568-317d-42ec-ae70-4c41afe0dbd0</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep__</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iterated input for the map step</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iterated input for the map step</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;message&quot;</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">template&#39;</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">        </span><span class="nt">6f62aecf-03a1-4e38-b551-8eef0efaf4bb</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6f62aecf-03a1-4e38-b551-8eef0efaf4bb</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None End node</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">End node representing all transitions to None in the WayFlow</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">flow</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">          </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">  </span><span class="nt">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FlowNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47e367be-4d74-49dc-ac3b-89bb97ffa7df</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retrieve_diff_flowstep</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">    </span><span class="nt">subflow</span><span class="p">:</span>
<span class="w">      </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9e7aed22-876c-4c32-9d44-20ee7ceb3771</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Retrieve PR diff flow</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">start_node</span><span class="p">:</span>
<span class="w">        </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4fcb7ebe-325b-446d-a46b-59187c30e260</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4fcb7ebe-325b-446d-a46b-59187c30e260</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cf841053-2414-48b6-ba6d-0f0f5e11044c</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dd0e56ab-1267-4345-9f59-ecc053baf2af</span>
<span class="w">      </span><span class="nt">control_flow_connections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60dc14b8-d9b9-4aec-a958-9f3676848f48</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_step_to_get_pr_diff_control_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">          </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4fcb7ebe-325b-446d-a46b-59187c30e260</span>
<span class="w">        </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500f97de-78b1-42e0-944c-0375dfca734e</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_pr_diff_to_extract_into_list_of_file_diff_control_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">          </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">        </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cf841053-2414-48b6-ba6d-0f0f5e11044c</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ControlFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22d0cf0d-8edb-4b04-8f54-a234f5705360</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_into_list_of_file_diff_to_None End node_control_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">from_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cf841053-2414-48b6-ba6d-0f0f5e11044c</span>
<span class="w">        </span><span class="nt">from_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">to_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dd0e56ab-1267-4345-9f59-ecc053baf2af</span>
<span class="w">      </span><span class="nt">data_flow_connections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">106e3740-de45-4472-8168-2873ae1dbc82</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_step_$repo_dirpath_io_to_get_pr_diff_$repo_dirpath_io_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">          </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4fcb7ebe-325b-446d-a46b-59187c30e260</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a32cbb1c-eafe-4138-80e2-2cf2e1248312</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_pr_diff_$raw_pr_diff_to_extract_into_list_of_file_diff_$raw_pr_diff_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">          </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cf841053-2414-48b6-ba6d-0f0f5e11044c</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3ef5dcf4-acdf-4962-8df6-07b53f249e18</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_pr_diff_$raw_pr_diff_to_None End node_$raw_pr_diff_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dd0e56ab-1267-4345-9f59-ecc053baf2af</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFlowEdge</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">08cbca39-e591-4cf4-9057-ae67938d9557</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_into_list_of_file_diff_$file_diff_list_to_None End node_$file_diff_list_data_flow_edge</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">        </span><span class="nt">source_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cf841053-2414-48b6-ba6d-0f0f5e11044c</span>
<span class="w">        </span><span class="nt">source_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">        </span><span class="nt">destination_node</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$component_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dd0e56ab-1267-4345-9f59-ecc053baf2af</span>
<span class="w">        </span><span class="nt">destination_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">      </span><span class="nt">$referenced_components</span><span class="p">:</span>
<span class="w">        </span><span class="nt">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExtendedToolNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5c73da9c-6ba9-44ce-aab1-212a78d0a720</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_pr_diff</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">          </span><span class="nt">tool</span><span class="p">:</span>
<span class="w">            </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerTool</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">275aaf19-cdd4-4ed7-a436-e53f922cd740</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local_get_pr_diff_tool</span>
<span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#</span><span class="nv"> </span><span class="s">docs-skiprow</span>

<span class="w">              </span><span class="s">Retrieves</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">diff</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">git</span><span class="nv"> </span><span class="s">command</span><span class="nv"> </span><span class="s">given</span><span class="nv"> </span><span class="s">the</span><span class="nv">  </span><span class="s">#</span><span class="nv"> </span><span class="s">docs-skiprow</span>

<span class="w">              </span><span class="s">path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">repository</span><span class="nv"> </span><span class="s">root</span><span class="nv"> </span><span class="s">folder.</span><span class="nv">  </span><span class="s">#</span><span class="nv"> </span><span class="s">docs-skiprow&#39;</span>
<span class="w">            </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">              </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">            </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repo_dirpath</span>
<span class="w">            </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_output</span>
<span class="w">          </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">repo_dirpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">          </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">tool_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">          </span><span class="nt">raise_exceptions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">          </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">        </span><span class="nt">4fcb7ebe-325b-446d-a46b-59187c30e260</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4fcb7ebe-325b-446d-a46b-59187c30e260</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start_step</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">        </span><span class="nt">cf841053-2414-48b6-ba6d-0f0f5e11044c</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PluginRegexNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cf841053-2414-48b6-ba6d-0f0f5e11044c</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">extract_into_list_of_file_diff</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">raw text to extract information from</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">            </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">          </span><span class="nt">input_mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">          </span><span class="nt">output_mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">          </span><span class="nt">regex_pattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(diff --git[\s\S]*?)(?=diff --git|$)</span>
<span class="w">          </span><span class="nt">return_first_match_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">          </span><span class="nt">component_plugin_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodesPlugin</span>
<span class="w">          </span><span class="nt">component_plugin_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.0.dev0</span>
<span class="w">        </span><span class="nt">dd0e56ab-1267-4345-9f59-ecc053baf2af</span><span class="p">:</span>
<span class="w">          </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">          </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dd0e56ab-1267-4345-9f59-ecc053baf2af</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None End node</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">End node representing all transitions to None in the WayFlow</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">flow</span>
<span class="w">          </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">          </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">            </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">          </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">            </span><span class="nt">items</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">            </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">          </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">          </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">  </span><span class="nt">020c885e-6d0b-472a-bb91-246ab70ab1db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StartNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">020c885e-6d0b-472a-bb91-246ab70ab1db</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__StartStep__</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">__metadata_info__</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$repo_dirpath_io</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="w">  </span><span class="nt">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span><span class="p">:</span>
<span class="w">    </span><span class="nt">component_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EndNode</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a544af64-e63b-4ccf-9ab0-8d25cdbc0b93</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None End node</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">End node representing all transitions to None in the WayFlow flow</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$filepath_list</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$nested_comment_list</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$raw_pr_diff</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">the list of extracted value using the regex &quot;(diff --git[\s\S]*?)(?=diff</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">--git|$)&quot; from the raw input</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$file_diff_list</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">next</span>
<span class="nt">agentspec_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.4.1</span>
</pre></div>
</div>
</div></div>
</details><p>You can then load the configuration back to an assistant using the <code class="docutils literal notranslate"><span class="pre">AgentSpecLoader</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>

<span class="n">tool_registry</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;local_get_pr_diff_tool&quot;</span><span class="p">:</span> <span class="n">local_get_pr_diff_tool</span><span class="p">,</span>
    <span class="s2">&quot;format_git_diff&quot;</span><span class="p">:</span> <span class="n">format_git_diff</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">assistant</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">(</span><span class="n">tool_registry</span><span class="o">=</span><span class="n">tool_registry</span><span class="p">)</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide uses the following extension/plugin Agent Spec components:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PluginOutputMessageNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PluginExtractNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PluginRegexNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExtendedLlmNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExtendedToolNode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExtendedMapNode</span></code></p></li>
</ul>
<p>See the list of available Agent Spec extension/plugin components in the <a class="reference internal" href="../api/agentspec.html"><span class="doc">API Reference</span></a></p>
</div>
</section>
<section id="recap">
<h2>Recap<a class="headerlink" href="#recap" title="Permalink to this heading">#</a></h2>
<p>In this tutorial you learned how to build a simple PR bot using WayFlow Flows, and learned:</p>
<ul class="simple">
<li><p>How to use core steps such as the <a class="reference internal" href="../api/flows.html#outputmessagestep"><span class="std std-ref">OutputMessageStep</span></a> and <a class="reference internal" href="../api/flows.html#promptexecutionstep"><span class="std std-ref">PromptExecutionStep</span></a>.</p></li>
<li><p>How to build and execute tools using the <a class="reference internal" href="../api/tools.html#servertool"><span class="std std-ref">ServerTool</span></a> and the <a class="reference internal" href="../api/flows.html#toolexecutionstep"><span class="std std-ref">ToolExecutionStep</span></a>.</p></li>
<li><p>How to extract information using the <a class="reference internal" href="../api/flows.html#regexextractionstep"><span class="std std-ref">RegexExtractionStep</span></a> and the <a class="reference internal" href="../api/flows.html#extractvaluefromjsonstep"><span class="std std-ref">ExtractValueFromJsonStep</span></a>.</p></li>
<li><p>How to apply a sub flow over an iterable data using the <a class="reference internal" href="../api/flows.html#mapstep"><span class="std std-ref">MapStep</span></a>.</p></li>
</ul>
<p>Finally, you learned how to structure code when building assistant as code and how to execute and combine sub flows to build complex assistant.</p>
<p>This is an example of the kind of fully featured tool that you can build with WayFlow.</p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>Now that you learned how to build a PR reviewing assistant, you may want to check our other guides such as:</p>
<ul class="simple">
<li><p><a class="reference internal" href="basic_agent.html"><span class="doc">Build a Simple Agent</span></a></p></li>
<li><p><a class="reference internal" href="../howtoguides/catching_exceptions.html"><span class="doc">How to Catch Exceptions in Flows</span></a></p></li>
</ul>
</section>
<section id="full-code">
<h2>Full Code<a class="headerlink" href="#full-code" title="Permalink to this heading">#</a></h2>
<p>Click on the card at the <a class="reference internal" href="#top-simple-code-review-assistant"><span class="std std-ref">top of this page</span></a> to download the full code
for this guide or copy the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Copyright © 2025 Oracle and/or its affiliates.</span>
<span class="linenos">  2</span><span class="c1">#</span>
<span class="linenos">  3</span><span class="c1"># This software is under the Universal Permissive License</span>
<span class="linenos">  4</span><span class="c1"># %%[markdown]</span>
<span class="linenos">  5</span><span class="c1"># Tutorial - Build a Simple Code Review Assistant</span>
<span class="linenos">  6</span><span class="c1"># -----------------------------------------------</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="c1"># How to use:</span>
<span class="linenos">  9</span><span class="c1"># Create a new Python virtual environment and install the latest WayFlow version.</span>
<span class="linenos"> 10</span><span class="c1"># ```bash</span>
<span class="linenos"> 11</span><span class="c1"># python -m venv venv-wayflowcore</span>
<span class="linenos"> 12</span><span class="c1"># source venv-wayflowcore/bin/activate</span>
<span class="linenos"> 13</span><span class="c1"># pip install --upgrade pip</span>
<span class="linenos"> 14</span><span class="c1"># pip install &quot;wayflowcore==26.1&quot; </span>
<span class="linenos"> 15</span><span class="c1"># ```</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="c1"># You can now run the script</span>
<span class="linenos"> 18</span><span class="c1"># 1. As a Python file:</span>
<span class="linenos"> 19</span><span class="c1"># ```bash</span>
<span class="linenos"> 20</span><span class="c1"># python usecase_prbot.py</span>
<span class="linenos"> 21</span><span class="c1"># ```</span>
<span class="linenos"> 22</span><span class="c1"># 2. As a Notebook (in VSCode):</span>
<span class="linenos"> 23</span><span class="c1"># When viewing the file,</span>
<span class="linenos"> 24</span><span class="c1">#  - press the keys Ctrl + Enter to run the selected cell</span>
<span class="linenos"> 25</span><span class="c1">#  - or Shift + Enter to run the selected cell and move to the cell below# (UPL) 1.0 (LICENSE-UPL or https://oss.oracle.com/licenses/upl) or Apache License</span>
<span class="linenos"> 26</span><span class="c1"># 2.0 (LICENSE-APACHE or http://www.apache.org/licenses/LICENSE-2.0), at your option.</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span><span class="c1"># nosec</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="kn">from</span><span class="w"> </span><span class="nn">types</span><span class="w"> </span><span class="kn">import</span> <span class="n">MethodType</span>
<span class="linenos"> 32</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span>
<span class="linenos"> 35</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 36</span><span class="c1">## Define the LLM</span>
<span class="linenos"> 37</span>
<span class="linenos"> 38</span><span class="c1"># %%</span>
<span class="linenos"> 39</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">VllmModel</span>
<span class="linenos"> 40</span>
<span class="linenos"> 41</span><span class="n">llm</span> <span class="o">=</span> <span class="n">VllmModel</span><span class="p">(</span>
<span class="linenos"> 42</span>    <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-8B-Instruct&quot;</span><span class="p">,</span>
<span class="linenos"> 43</span>    <span class="n">host_port</span><span class="o">=</span><span class="s2">&quot;VLLM_HOST_PORT&quot;</span><span class="p">,</span>
<span class="linenos"> 44</span><span class="p">)</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 47</span><span class="c1">## Define the tool that retrieves the PR diff</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="c1"># %%</span>
<span class="linenos"> 50</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
<span class="linenos"> 51</span>
<span class="linenos"> 52</span>
<span class="linenos"> 53</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos"> 54</span><span class="k">def</span><span class="w"> </span><span class="nf">local_get_pr_diff_tool</span><span class="p">(</span><span class="n">repo_dirpath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 55</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 56</span><span class="sd">    Retrieves code diff with a git command given the</span>
<span class="linenos"> 57</span><span class="sd">    path to the repository root folder.</span>
<span class="linenos"> 58</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 59</span>    <span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="linenos"> 60</span>
<span class="linenos"> 61</span>    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
<span class="linenos"> 62</span>        <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;diff&quot;</span><span class="p">,</span> <span class="s2">&quot;HEAD&quot;</span><span class="p">],</span>
<span class="linenos"> 63</span>        <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 64</span>        <span class="n">cwd</span><span class="o">=</span><span class="n">repo_dirpath</span><span class="p">,</span>
<span class="linenos"> 65</span>        <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 66</span>    <span class="p">)</span>
<span class="linenos"> 67</span>    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos"> 68</span>
<span class="linenos"> 69</span>
<span class="linenos"> 70</span><span class="c1"># %%[markdown]</span>
<span class="linenos"> 71</span><span class="c1">## Define a mocked PR diff</span>
<span class="linenos"> 72</span>
<span class="linenos"> 73</span><span class="c1"># %%</span>
<span class="linenos"> 74</span><span class="n">MOCK_DIFF</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 75</span><span class="s2">diff --git src://calculators/utils.py dst://calculators/utils.py</span>
<span class="linenos"> 76</span><span class="s2">index 12345678..90123456 100644</span>
<span class="linenos"> 77</span><span class="s2">--- src://calculators/utils.py</span>
<span class="linenos"> 78</span><span class="s2">+++ dst://calculators/utils.py</span>
<span class="linenos"> 79</span><span class="s2">@@ -10,6 +10,15 @@</span>
<span class="linenos"> 80</span>
<span class="linenos"> 81</span><span class="s2"> def calculate_total(data):</span>
<span class="linenos"> 82</span><span class="s2">     # TODO: implement tax calculation</span>
<span class="linenos"> 83</span><span class="s2">     return data</span>
<span class="linenos"> 84</span>
<span class="linenos"> 85</span><span class="s2">+def get_items(items=[]):</span>
<span class="linenos"> 86</span><span class="s2">+    result = []</span>
<span class="linenos"> 87</span><span class="s2">+    for item in items:</span>
<span class="linenos"> 88</span><span class="s2">+        result.append(item * 2)</span>
<span class="linenos"> 89</span><span class="s2">+    return result</span>
<span class="linenos"> 90</span><span class="s2">+</span>
<span class="linenos"> 91</span><span class="s2">+def process_numbers(numbers):</span>
<span class="linenos"> 92</span><span class="s2">+    res = []</span>
<span class="linenos"> 93</span><span class="s2">+    for x in numbers:</span>
<span class="linenos"> 94</span><span class="s2">+        res.append(x + 1)</span>
<span class="linenos"> 95</span><span class="s2">+    return res</span>
<span class="linenos"> 96</span><span class="s2">+</span>
<span class="linenos"> 97</span><span class="s2"> def calculate_average(numbers):</span>
<span class="linenos"> 98</span><span class="s2">     return sum(numbers) / len(numbers)</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span>
<span class="linenos">101</span><span class="s2">diff --git src://example/utils.py dst://example/utils.py</span>
<span class="linenos">102</span><span class="s2">index 000000000..123456789</span>
<span class="linenos">103</span><span class="s2">--- /dev/null</span>
<span class="linenos">104</span><span class="s2">+++ dst://example/utils.py</span>
<span class="linenos">105</span><span class="s2">@@ -0,0 +1,20 @@</span>
<span class="linenos">106</span><span class="s2">+# Copyright © 2024 Oracle and/or its affiliates.</span>
<span class="linenos">107</span><span class="s2">+</span>
<span class="linenos">108</span><span class="s2">+def calculate_sum(numbers=[]):</span>
<span class="linenos">109</span><span class="s2">+    total = 0</span>
<span class="linenos">110</span><span class="s2">+    for num in numbers:</span>
<span class="linenos">111</span><span class="s2">+        total += num</span>
<span class="linenos">112</span><span class="s2">+    return total</span>
<span class="linenos">113</span><span class="s2">+</span>
<span class="linenos">114</span><span class="s2">+</span>
<span class="linenos">115</span><span class="s2">+def process_data(data):</span>
<span class="linenos">116</span><span class="s2">+    # TODO: Handle exceptions here</span>
<span class="linenos">117</span><span class="s2">+    result = data * 2</span>
<span class="linenos">118</span><span class="s2">+    return result</span>
<span class="linenos">119</span><span class="s2">+</span>
<span class="linenos">120</span><span class="s2">+</span>
<span class="linenos">121</span><span class="s2">+def main():</span>
<span class="linenos">122</span><span class="s2">+    numbers = [1, 2, 3, 4, 5]</span>
<span class="linenos">123</span><span class="s2">+    result = calculate_sum(numbers)</span>
<span class="linenos">124</span><span class="s2">+    print(&quot;Sum:&quot;, result)</span>
<span class="linenos">125</span><span class="s2">+    data = 10</span>
<span class="linenos">126</span><span class="s2">+    processed_data = process_data(data)</span>
<span class="linenos">127</span><span class="s2">+    print(&quot;Processed Data:&quot;, processed_data)</span>
<span class="linenos">128</span><span class="s2">+</span>
<span class="linenos">129</span><span class="s2">+</span>
<span class="linenos">130</span><span class="s2">+if __name__ == &quot;__main__&quot;:</span>
<span class="linenos">131</span><span class="s2">+    main()</span>
<span class="linenos">132</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos">133</span>
<span class="linenos">134</span>
<span class="linenos">135</span>
<span class="linenos">136</span><span class="c1"># %%[markdown]</span>
<span class="linenos">137</span><span class="c1">## Create the flow that retrieves the diff of a PR</span>
<span class="linenos">138</span>
<span class="linenos">139</span><span class="c1"># %%</span>
<span class="linenos">140</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="linenos">141</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="linenos">142</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="linenos">143</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="linenos">144</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">RegexExtractionStep</span><span class="p">,</span> <span class="n">StartStep</span><span class="p">,</span> <span class="n">ToolExecutionStep</span>
<span class="linenos">145</span>
<span class="linenos">146</span><span class="c1"># IO Variable Names</span>
<span class="linenos">147</span><span class="n">REPO_DIRPATH_IO</span> <span class="o">=</span> <span class="s2">&quot;$repo_dirpath_io&quot;</span>
<span class="linenos">148</span><span class="n">PR_DIFF_IO</span> <span class="o">=</span> <span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="linenos">149</span><span class="n">FILE_DIFF_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$file_diff_list&quot;</span>
<span class="linenos">150</span>
<span class="linenos">151</span><span class="c1"># Define the steps</span>
<span class="linenos">152</span>
<span class="linenos">153</span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span> <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">REPO_DIRPATH_IO</span><span class="p">)])</span>
<span class="linenos">154</span>
<span class="linenos">155</span><span class="c1"># Step 1: Retrieve the pull request diff using the local tool</span>
<span class="linenos">156</span><span class="n">get_pr_diff_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos">157</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;get_pr_diff&quot;</span><span class="p">,</span>
<span class="linenos">158</span>    <span class="n">tool</span><span class="o">=</span><span class="n">local_get_pr_diff_tool</span><span class="p">,</span>
<span class="linenos">159</span>    <span class="n">raise_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">160</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;repo_dirpath&quot;</span><span class="p">:</span> <span class="n">REPO_DIRPATH_IO</span><span class="p">},</span>
<span class="linenos">161</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">PR_DIFF_IO</span><span class="p">},</span>
<span class="linenos">162</span><span class="p">)</span>
<span class="linenos">163</span>
<span class="linenos">164</span><span class="c1"># Step 2: Extract the file diffs from the raw diff using a regular expression</span>
<span class="linenos">165</span><span class="n">extract_into_list_of_file_diff_step</span> <span class="o">=</span> <span class="n">RegexExtractionStep</span><span class="p">(</span>
<span class="linenos">166</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_into_list_of_file_diff&quot;</span><span class="p">,</span>
<span class="linenos">167</span>    <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;(diff --git[\s\S]*?)(?=diff --git|$)&quot;</span><span class="p">,</span>
<span class="linenos">168</span>    <span class="n">return_first_match_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">169</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="n">PR_DIFF_IO</span><span class="p">},</span>
<span class="linenos">170</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">FILE_DIFF_LIST_IO</span><span class="p">},</span>
<span class="linenos">171</span><span class="p">)</span>
<span class="linenos">172</span>
<span class="linenos">173</span><span class="c1"># Define the sub flow</span>
<span class="linenos">174</span><span class="n">retrieve_diff_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">175</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Retrieve PR diff flow&quot;</span><span class="p">,</span>
<span class="linenos">176</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="linenos">177</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">178</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">),</span>
<span class="linenos">179</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="linenos">180</span>            <span class="n">source_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">extract_into_list_of_file_diff_step</span>
<span class="linenos">181</span>        <span class="p">),</span>
<span class="linenos">182</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">extract_into_list_of_file_diff_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="linenos">183</span>    <span class="p">],</span>
<span class="linenos">184</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">185</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">186</span>            <span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="linenos">187</span>            <span class="n">source_output</span><span class="o">=</span><span class="n">REPO_DIRPATH_IO</span><span class="p">,</span>
<span class="linenos">188</span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">,</span>
<span class="linenos">189</span>            <span class="n">destination_input</span><span class="o">=</span><span class="n">REPO_DIRPATH_IO</span><span class="p">,</span>
<span class="linenos">190</span>        <span class="p">),</span>
<span class="linenos">191</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">192</span>            <span class="n">source_step</span><span class="o">=</span><span class="n">get_pr_diff_step</span><span class="p">,</span>
<span class="linenos">193</span>            <span class="n">source_output</span><span class="o">=</span><span class="n">PR_DIFF_IO</span><span class="p">,</span>
<span class="linenos">194</span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">extract_into_list_of_file_diff_step</span><span class="p">,</span>
<span class="linenos">195</span>            <span class="n">destination_input</span><span class="o">=</span><span class="n">PR_DIFF_IO</span><span class="p">,</span>
<span class="linenos">196</span>        <span class="p">),</span>
<span class="linenos">197</span>    <span class="p">],</span>
<span class="linenos">198</span><span class="p">)</span>
<span class="linenos">199</span>
<span class="linenos">200</span>
<span class="linenos">201</span><span class="c1"># %%[markdown]</span>
<span class="linenos">202</span><span class="c1">## Alternative step that retrieves the PR diff through an API call</span>
<span class="linenos">203</span>
<span class="linenos">204</span><span class="c1"># %%</span>
<span class="linenos">205</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ApiCallStep</span>
<span class="linenos">206</span>
<span class="linenos">207</span><span class="c1"># IO Variable Names</span>
<span class="linenos">208</span><span class="n">USER_PROVIDED_TOKEN_IO</span> <span class="o">=</span> <span class="s2">&quot;$user_provided_token&quot;</span>
<span class="linenos">209</span><span class="n">REPO_WORKSPACE_IO</span> <span class="o">=</span> <span class="s2">&quot;$repo_workspace&quot;</span>
<span class="linenos">210</span><span class="n">REPO_SLUG_IO</span> <span class="o">=</span> <span class="s2">&quot;$repo_slug&quot;</span>
<span class="linenos">211</span><span class="n">PULL_REQUEST_ID_IO</span> <span class="o">=</span> <span class="s2">&quot;$pull_request_id&quot;</span>
<span class="linenos">212</span><span class="n">PR_DIFF_IO</span> <span class="o">=</span> <span class="s2">&quot;$raw_pr_diff&quot;</span>
<span class="linenos">213</span>
<span class="linenos">214</span><span class="n">get_pr_diff_step</span> <span class="o">=</span> <span class="n">ApiCallStep</span><span class="p">(</span>
<span class="linenos">215</span>    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://example.com/projects/{{workspace}}/repos/{{repo_slug}}/pull-requests/{{pr_id}}.diff&quot;</span><span class="p">,</span>
<span class="linenos">216</span>    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
<span class="linenos">217</span>    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer {{token}}&quot;</span><span class="p">},</span>
<span class="linenos">218</span>    <span class="n">ignore_bad_http_requests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">219</span>    <span class="n">num_retry_on_bad_http_request</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">220</span>    <span class="n">store_response</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">221</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">222</span>        <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">USER_PROVIDED_TOKEN_IO</span><span class="p">,</span>
<span class="linenos">223</span>        <span class="s2">&quot;workspace&quot;</span><span class="p">:</span> <span class="n">REPO_WORKSPACE_IO</span><span class="p">,</span>
<span class="linenos">224</span>        <span class="s2">&quot;repo_slug&quot;</span><span class="p">:</span> <span class="n">REPO_SLUG_IO</span><span class="p">,</span>
<span class="linenos">225</span>        <span class="s2">&quot;pr_id&quot;</span><span class="p">:</span> <span class="n">PULL_REQUEST_ID_IO</span><span class="p">,</span>
<span class="linenos">226</span>    <span class="p">},</span>
<span class="linenos">227</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ApiCallStep</span><span class="o">.</span><span class="n">HTTP_RESPONSE</span><span class="p">:</span> <span class="n">PR_DIFF_IO</span><span class="p">},</span>
<span class="linenos">228</span><span class="p">)</span>
<span class="linenos">229</span>
<span class="linenos">230</span>
<span class="linenos">231</span><span class="c1"># %%[markdown]</span>
<span class="linenos">232</span><span class="c1">## Test the flow that retrieves the PR diff</span>
<span class="linenos">233</span>
<span class="linenos">234</span><span class="c1"># %%</span>
<span class="linenos">235</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.executors.executionstatus</span><span class="w"> </span><span class="kn">import</span> <span class="n">FinishedStatus</span>
<span class="linenos">236</span>
<span class="linenos">237</span><span class="c1"># Replace the path below with the path to your actual codebase sample git repository.</span>
<span class="linenos">238</span><span class="n">PATH_TO_DIR</span> <span class="o">=</span> <span class="s2">&quot;path/to/repository_root&quot;</span>
<span class="linenos">239</span>
<span class="linenos">240</span><span class="n">test_conversation</span> <span class="o">=</span> <span class="n">retrieve_diff_subflow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="linenos">241</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">242</span>        <span class="n">REPO_DIRPATH_IO</span><span class="p">:</span> <span class="n">PATH_TO_DIR</span><span class="p">,</span>
<span class="linenos">243</span>    <span class="p">}</span>
<span class="linenos">244</span><span class="p">)</span>
<span class="linenos">245</span>
<span class="linenos">246</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">test_conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">247</span>
<span class="linenos">248</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">249</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">250</span>
<span class="linenos">251</span><span class="n">FILE_DIFF_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">FILE_DIFF_LIST_IO</span><span class="p">]</span>
<span class="linenos">252</span>
<span class="linenos">253</span><span class="nb">print</span><span class="p">(</span><span class="n">FILE_DIFF_LIST</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="linenos">254</span>
<span class="linenos">255</span>
<span class="linenos">256</span><span class="c1"># %%[markdown]</span>
<span class="linenos">257</span><span class="c1">## Define the tool that formats the diff for the LLM</span>
<span class="linenos">258</span>
<span class="linenos">259</span><span class="c1"># %%</span>
<span class="linenos">260</span><span class="n">PR_BOT_CHECKS</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">261</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">262</span><span class="sd">Name: TODO_WITHOUT_TICKET</span>
<span class="linenos">263</span><span class="sd">Description: TODO comments should reference a ticket number for tracking.</span>
<span class="linenos">264</span><span class="sd">Example code:</span>
<span class="linenos">265</span><span class="sd">```python</span>
<span class="linenos">266</span><span class="sd"># TODO: Add validation here</span>
<span class="linenos">267</span><span class="sd">def process_user_input(data):</span>
<span class="linenos">268</span><span class="sd">    return data</span>
<span class="linenos">269</span><span class="sd">```</span>
<span class="linenos">270</span><span class="sd">Example comment:</span>
<span class="linenos">271</span><span class="sd">[BOT] TODO_WITHOUT_TICKET: TODO comment should reference a ticket number for tracking (e.g., &quot;TODO: Add validation here (TICKET-1234)&quot;).</span>
<span class="linenos">272</span><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos">273</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">274</span><span class="sd">Name: MUTABLE_DEFAULT_ARGUMENT</span>
<span class="linenos">275</span><span class="sd">Description: Using mutable objects as default arguments can lead to unexpected behavior.</span>
<span class="linenos">276</span><span class="sd">Example code:</span>
<span class="linenos">277</span><span class="sd">```python</span>
<span class="linenos">278</span><span class="sd">def add_item(item, items=[]):</span>
<span class="linenos">279</span><span class="sd">    items.append(item)</span>
<span class="linenos">280</span><span class="sd">    return items</span>
<span class="linenos">281</span><span class="sd">```</span>
<span class="linenos">282</span><span class="sd">Example comment:</span>
<span class="linenos">283</span><span class="sd">[BOT] MUTABLE_DEFAULT_ARGUMENT: Avoid using mutable default arguments. Use None and initialize in the function: `def add_item(item, items=None): items = items or []`</span>
<span class="linenos">284</span><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos">285</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">286</span><span class="sd">Name: NON_DESCRIPTIVE_NAME</span>
<span class="linenos">287</span><span class="sd">Description: Variable names should clearly indicate their purpose or content.</span>
<span class="linenos">288</span><span class="sd">Example code:</span>
<span class="linenos">289</span><span class="sd">```python</span>
<span class="linenos">290</span><span class="sd">def process(lst):</span>
<span class="linenos">291</span><span class="sd">    res = []</span>
<span class="linenos">292</span><span class="sd">    for i in lst:</span>
<span class="linenos">293</span><span class="sd">        res.append(i * 2)</span>
<span class="linenos">294</span><span class="sd">    return res</span>
<span class="linenos">295</span><span class="sd">```</span>
<span class="linenos">296</span><span class="sd">Example comment:</span>
<span class="linenos">297</span><span class="sd">[BOT] NON_DESCRIPTIVE_NAME: Use more descriptive names: &#39;lst&#39; could be &#39;numbers&#39;, &#39;res&#39; could be &#39;doubled_numbers&#39;, &#39;i&#39; could be &#39;number&#39;</span>
<span class="linenos">298</span><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span>
<span class="linenos">299</span><span class="p">]</span>
<span class="linenos">300</span>
<span class="linenos">301</span><span class="n">CONCATENATED_CHECKS</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">---</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">check</span> <span class="k">for</span> <span class="n">check</span> <span class="ow">in</span> <span class="n">PR_BOT_CHECKS</span><span class="p">)</span>
<span class="linenos">302</span>
<span class="linenos">303</span><span class="n">PROMPT_TEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;You are a very experienced code reviewer. You are given a git diff on a file: {{filename}}</span>
<span class="linenos">304</span>
<span class="linenos">305</span><span class="s2">## Context</span>
<span class="linenos">306</span><span class="s2">The git diff contains all changes of a single file. All lines are prepended with their number. Lines without line number where removed from the file.</span>
<span class="linenos">307</span><span class="s2">After the line number, a line that was changed has a &quot;+&quot; before the code. All lines without a &quot;+&quot; are just here for context, you will not comment on them.</span>
<span class="linenos">308</span>
<span class="linenos">309</span><span class="s2">## Input</span>
<span class="linenos">310</span><span class="s2">### Code diff</span>
<span class="linenos">311</span><span class="s2">{{diff}}</span>
<span class="linenos">312</span>
<span class="linenos">313</span><span class="s2">## Task</span>
<span class="linenos">314</span><span class="s2">Your task is to review these changes, according to different rules. Only comment lines that were added, so the lines that have a + just after the line number.</span>
<span class="linenos">315</span><span class="s2">The rules are the following:</span>
<span class="linenos">316</span>
<span class="linenos">317</span><span class="s2">{{checks}}</span>
<span class="linenos">318</span>
<span class="linenos">319</span><span class="s2">### Reponse Format</span>
<span class="linenos">320</span><span class="s2">You need to return a review as a json as follows:</span>
<span class="linenos">321</span><span class="s2">```json</span>
<span class="linenos">322</span><span class="s2">[</span>
<span class="linenos">323</span><span class="s2">    {</span>
<span class="linenos">324</span><span class="s2">        &quot;content&quot;: &quot;the comment as a text&quot;,</span>
<span class="linenos">325</span><span class="s2">        &quot;suggestion&quot;: &quot;if the change you propose is a single line, then put here the single line rewritten that includes your proposal change. IMPORTANT: a single line, which will erase the current line. Put empty string if no suggestion of if the suggestion is more than a single line&quot;,</span>
<span class="linenos">326</span><span class="s2">        &quot;line&quot;: &quot;line number where the comment applies&quot;</span>
<span class="linenos">327</span><span class="s2">    },</span>
<span class="linenos">328</span><span class="s2">    …</span>
<span class="linenos">329</span><span class="s2">]</span>
<span class="linenos">330</span><span class="s2">```</span>
<span class="linenos">331</span><span class="s2">Please use triple backticks ``` to delimitate your JSON list of comments. Don&#39;t output more than 5 comments, only comment the most relevant sections.</span>
<span class="linenos">332</span><span class="s2">If there are no comments and the code seems fine, just output an empty JSON list.&quot;&quot;&quot;</span>
<span class="linenos">333</span>
<span class="linenos">334</span>
<span class="linenos">335</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos">336</span><span class="k">def</span><span class="w"> </span><span class="nf">format_git_diff</span><span class="p">(</span><span class="n">diff_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos">337</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">338</span><span class="sd">    Formats a git diff by adding line numbers to each line except removal lines.</span>
<span class="linenos">339</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">340</span>
<span class="linenos">341</span>    <span class="k">def</span><span class="w"> </span><span class="nf">pad_number</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos">342</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Right-align a number with specified width using space padding.&quot;&quot;&quot;</span>
<span class="linenos">343</span>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
<span class="linenos">344</span>
<span class="linenos">345</span>    <span class="n">LINE_NUMBER_WIDTH</span> <span class="o">=</span> <span class="mi">5</span>
<span class="linenos">346</span>    <span class="n">PADDING_WIDTH</span> <span class="o">=</span> <span class="n">LINE_NUMBER_WIDTH</span> <span class="o">+</span> <span class="mi">1</span>
<span class="linenos">347</span>    <span class="n">current_line_number</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">348</span>    <span class="n">formatted_lines</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">349</span>
<span class="linenos">350</span>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">diff_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
<span class="linenos">351</span>        <span class="c1"># Handle diff header lines (e.g., &quot;@@ -1,7 +1,6 @@&quot;)</span>
<span class="linenos">352</span>        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;@@&quot;</span><span class="p">):</span>
<span class="linenos">353</span>            <span class="k">try</span><span class="p">:</span>
<span class="linenos">354</span>                <span class="c1"># Extract the starting line number and line count</span>
<span class="linenos">355</span>                <span class="n">_</span><span class="p">,</span> <span class="n">position_info</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@@&quot;</span><span class="p">)</span>
<span class="linenos">356</span>                <span class="n">new_file_info</span> <span class="o">=</span> <span class="n">position_info</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># Remove the &#39;+&#39; prefix</span>
<span class="linenos">357</span>                <span class="n">start_line</span><span class="p">,</span> <span class="n">line_count</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">new_file_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
<span class="linenos">358</span>
<span class="linenos">359</span>                <span class="n">current_line_number</span> <span class="o">=</span> <span class="n">start_line</span>
<span class="linenos">360</span>                <span class="n">formatted_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="linenos">361</span>                <span class="k">continue</span>
<span class="linenos">362</span>
<span class="linenos">363</span>            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
<span class="linenos">364</span>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid diff header format: </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">365</span>
<span class="linenos">366</span>        <span class="c1"># Handle content lines</span>
<span class="linenos">367</span>        <span class="k">if</span> <span class="n">current_line_number</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">line</span><span class="p">:</span>
<span class="linenos">368</span>            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">):</span>
<span class="linenos">369</span>                <span class="c1"># Add line number for added/context lines</span>
<span class="linenos">370</span>                <span class="n">line_prefix</span> <span class="o">=</span> <span class="n">pad_number</span><span class="p">(</span><span class="n">current_line_number</span><span class="p">,</span> <span class="n">LINE_NUMBER_WIDTH</span><span class="p">)</span>
<span class="linenos">371</span>                <span class="n">formatted_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">line_prefix</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">372</span>                <span class="n">current_line_number</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">373</span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos">374</span>                <span class="c1"># Just add padding for removal lines</span>
<span class="linenos">375</span>                <span class="n">formatted_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">PADDING_WIDTH</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>
<span class="linenos">376</span>
<span class="linenos">377</span>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">formatted_lines</span><span class="p">)</span>
<span class="linenos">378</span>
<span class="linenos">379</span>
<span class="linenos">380</span><span class="c1"># %%[markdown]</span>
<span class="linenos">381</span><span class="c1">## Create the flow that generates review comments</span>
<span class="linenos">382</span>
<span class="linenos">383</span><span class="c1"># %%</span>
<span class="linenos">384</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore._utils._templating_helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">render_template_partially</span>
<span class="linenos">385</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnyProperty</span><span class="p">,</span> <span class="n">DictProperty</span><span class="p">,</span> <span class="n">ListProperty</span><span class="p">,</span> <span class="n">StringProperty</span>
<span class="linenos">386</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos">387</span>    <span class="n">ExtractValueFromJsonStep</span><span class="p">,</span>
<span class="linenos">388</span>    <span class="n">MapStep</span><span class="p">,</span>
<span class="linenos">389</span>    <span class="n">OutputMessageStep</span><span class="p">,</span>
<span class="linenos">390</span>    <span class="n">PromptExecutionStep</span><span class="p">,</span>
<span class="linenos">391</span>    <span class="n">ToolExecutionStep</span><span class="p">,</span>
<span class="linenos">392</span><span class="p">)</span>
<span class="linenos">393</span>
<span class="linenos">394</span><span class="c1"># IO Variable Names</span>
<span class="linenos">395</span><span class="n">DIFF_TO_STRING_IO</span> <span class="o">=</span> <span class="s2">&quot;$diff_to_string&quot;</span>
<span class="linenos">396</span><span class="n">DIFF_WITH_LINES_IO</span> <span class="o">=</span> <span class="s2">&quot;$diff_with_lines&quot;</span>
<span class="linenos">397</span><span class="n">FILEPATH_IO</span> <span class="o">=</span> <span class="s2">&quot;$filename&quot;</span>
<span class="linenos">398</span><span class="n">JSON_COMMENTS_IO</span> <span class="o">=</span> <span class="s2">&quot;$json_comments&quot;</span>
<span class="linenos">399</span><span class="n">EXTRACTED_COMMENTS_IO</span> <span class="o">=</span> <span class="s2">&quot;$extracted_comments&quot;</span>
<span class="linenos">400</span><span class="n">NESTED_COMMENT_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$nested_comment_list&quot;</span>
<span class="linenos">401</span><span class="n">FILEPATH_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$filepath_list&quot;</span>
<span class="linenos">402</span>
<span class="linenos">403</span><span class="c1"># Define the steps</span>
<span class="linenos">404</span>
<span class="linenos">405</span><span class="c1"># Step 1: Format the diff to a string</span>
<span class="linenos">406</span><span class="n">format_diff_to_string_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span>
<span class="linenos">407</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;format_diff_to_string&quot;</span><span class="p">,</span>
<span class="linenos">408</span>    <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;{{ message | string }}&quot;</span><span class="p">,</span>
<span class="linenos">409</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">},</span>
<span class="linenos">410</span><span class="p">)</span>
<span class="linenos">411</span>
<span class="linenos">412</span><span class="c1"># Step 2: Add lines on the diff using a tool</span>
<span class="linenos">413</span><span class="n">add_lines_on_diff_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos">414</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;add_lines_on_diff&quot;</span><span class="p">,</span>
<span class="linenos">415</span>    <span class="n">tool</span><span class="o">=</span><span class="n">format_git_diff</span><span class="p">,</span>
<span class="linenos">416</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;diff_text&quot;</span><span class="p">:</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">},</span>
<span class="linenos">417</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">DIFF_WITH_LINES_IO</span><span class="p">},</span>
<span class="linenos">418</span><span class="p">)</span>
<span class="linenos">419</span>
<span class="linenos">420</span><span class="c1"># Step 3: Extract the file path from the diff string using a regular expression</span>
<span class="linenos">421</span><span class="n">extract_file_path_step</span> <span class="o">=</span> <span class="n">RegexExtractionStep</span><span class="p">(</span>
<span class="linenos">422</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_file_path&quot;</span><span class="p">,</span>
<span class="linenos">423</span>    <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;diff --git a/(.+?) b/&quot;</span><span class="p">,</span>
<span class="linenos">424</span>    <span class="n">return_first_match_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">425</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">},</span>
<span class="linenos">426</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">RegexExtractionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">FILEPATH_IO</span><span class="p">},</span>
<span class="linenos">427</span><span class="p">)</span>
<span class="linenos">428</span>
<span class="linenos">429</span><span class="c1"># Step 4: Generate comments using a prompt</span>
<span class="linenos">430</span><span class="n">generate_comments_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="linenos">431</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_comments&quot;</span><span class="p">,</span>
<span class="linenos">432</span>    <span class="n">prompt_template</span><span class="o">=</span><span class="n">render_template_partially</span><span class="p">(</span><span class="n">PROMPT_TEMPLATE</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="n">CONCATENATED_CHECKS</span><span class="p">}),</span>
<span class="linenos">433</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">434</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;diff&quot;</span><span class="p">:</span> <span class="n">DIFF_WITH_LINES_IO</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">FILEPATH_IO</span><span class="p">},</span>
<span class="linenos">435</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">PromptExecutionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">JSON_COMMENTS_IO</span><span class="p">},</span>
<span class="linenos">436</span><span class="p">)</span>
<span class="linenos">437</span>
<span class="linenos">438</span><span class="c1"># Step 5: Extract comments from the JSON output</span>
<span class="linenos">439</span><span class="c1"># Define the value type for extracted comments</span>
<span class="linenos">440</span><span class="n">comments_valuetype</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">(</span>
<span class="linenos">441</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;values&quot;</span><span class="p">,</span>
<span class="linenos">442</span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The extracted comments content and line number&quot;</span><span class="p">,</span>
<span class="linenos">443</span>    <span class="n">item_type</span><span class="o">=</span><span class="n">DictProperty</span><span class="p">(</span><span class="n">value_type</span><span class="o">=</span><span class="n">AnyProperty</span><span class="p">()),</span>
<span class="linenos">444</span><span class="p">)</span>
<span class="linenos">445</span><span class="n">extract_comments_from_json_step</span> <span class="o">=</span> <span class="n">ExtractValueFromJsonStep</span><span class="p">(</span>
<span class="linenos">446</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_comments_from_json&quot;</span><span class="p">,</span>
<span class="linenos">447</span>    <span class="n">output_values</span><span class="o">=</span><span class="p">{</span><span class="n">comments_valuetype</span><span class="p">:</span> <span class="s1">&#39;[.[] | {&quot;content&quot;: .[&quot;content&quot;], &quot;line&quot;: .[&quot;line&quot;]}]&#39;</span><span class="p">},</span>
<span class="linenos">448</span>    <span class="n">retry</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">449</span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="linenos">450</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ExtractValueFromJsonStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="n">JSON_COMMENTS_IO</span><span class="p">},</span>
<span class="linenos">451</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="n">EXTRACTED_COMMENTS_IO</span><span class="p">},</span>
<span class="linenos">452</span><span class="p">)</span>
<span class="linenos">453</span>
<span class="linenos">454</span><span class="c1"># Define the sub flow to generate comments for each file diff</span>
<span class="linenos">455</span><span class="n">generate_comments_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">456</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Generate review comments flow&quot;</span><span class="p">,</span>
<span class="linenos">457</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">format_diff_to_string_step</span><span class="p">,</span>
<span class="linenos">458</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">459</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">format_diff_to_string_step</span><span class="p">,</span> <span class="n">add_lines_on_diff_step</span><span class="p">),</span>
<span class="linenos">460</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">add_lines_on_diff_step</span><span class="p">,</span> <span class="n">extract_file_path_step</span><span class="p">),</span>
<span class="linenos">461</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">extract_file_path_step</span><span class="p">,</span> <span class="n">generate_comments_step</span><span class="p">),</span>
<span class="linenos">462</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">generate_comments_step</span><span class="p">,</span> <span class="n">extract_comments_from_json_step</span><span class="p">),</span>
<span class="linenos">463</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">extract_comments_from_json_step</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="linenos">464</span>    <span class="p">],</span>
<span class="linenos">465</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">466</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">467</span>            <span class="n">format_diff_to_string_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">,</span> <span class="n">add_lines_on_diff_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span>
<span class="linenos">468</span>        <span class="p">),</span>
<span class="linenos">469</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">470</span>            <span class="n">format_diff_to_string_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span><span class="p">,</span> <span class="n">extract_file_path_step</span><span class="p">,</span> <span class="n">DIFF_TO_STRING_IO</span>
<span class="linenos">471</span>        <span class="p">),</span>
<span class="linenos">472</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">473</span>            <span class="n">add_lines_on_diff_step</span><span class="p">,</span> <span class="n">DIFF_WITH_LINES_IO</span><span class="p">,</span> <span class="n">generate_comments_step</span><span class="p">,</span> <span class="n">DIFF_WITH_LINES_IO</span>
<span class="linenos">474</span>        <span class="p">),</span>
<span class="linenos">475</span>        <span class="n">DataFlowEdge</span><span class="p">(</span><span class="n">extract_file_path_step</span><span class="p">,</span> <span class="n">FILEPATH_IO</span><span class="p">,</span> <span class="n">generate_comments_step</span><span class="p">,</span> <span class="n">FILEPATH_IO</span><span class="p">),</span>
<span class="linenos">476</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">477</span>            <span class="n">generate_comments_step</span><span class="p">,</span>
<span class="linenos">478</span>            <span class="n">JSON_COMMENTS_IO</span><span class="p">,</span>
<span class="linenos">479</span>            <span class="n">extract_comments_from_json_step</span><span class="p">,</span>
<span class="linenos">480</span>            <span class="n">JSON_COMMENTS_IO</span><span class="p">,</span>
<span class="linenos">481</span>        <span class="p">),</span>
<span class="linenos">482</span>    <span class="p">],</span>
<span class="linenos">483</span><span class="p">)</span>
<span class="linenos">484</span>
<span class="linenos">485</span><span class="c1"># Use the MapStep to apply the sub flow to each file</span>
<span class="linenos">486</span><span class="n">for_each_file_step</span> <span class="o">=</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="linenos">487</span>    <span class="n">flow</span><span class="o">=</span><span class="n">generate_comments_subflow</span><span class="p">,</span>
<span class="linenos">488</span>    <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
<span class="linenos">489</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">FILE_DIFF_LIST_IO</span><span class="p">},</span>
<span class="linenos">490</span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">491</span>        <span class="n">ListProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">,</span> <span class="n">item_type</span><span class="o">=</span><span class="n">AnyProperty</span><span class="p">()),</span>
<span class="linenos">492</span>        <span class="n">ListProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">FILEPATH_LIST_IO</span><span class="p">,</span> <span class="n">item_type</span><span class="o">=</span><span class="n">StringProperty</span><span class="p">()),</span>
<span class="linenos">493</span>    <span class="p">],</span>
<span class="linenos">494</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">EXTRACTED_COMMENTS_IO</span><span class="p">:</span> <span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">,</span> <span class="n">FILEPATH_IO</span><span class="p">:</span> <span class="n">FILEPATH_LIST_IO</span><span class="p">},</span>
<span class="linenos">495</span><span class="p">)</span>
<span class="linenos">496</span>
<span class="linenos">497</span><span class="n">generate_all_comments_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span><span class="n">for_each_file_step</span><span class="p">])</span>
<span class="linenos">498</span>
<span class="linenos">499</span>
<span class="linenos">500</span><span class="c1"># %%[markdown]</span>
<span class="linenos">501</span><span class="c1">## Test the flow that generates review comments</span>
<span class="linenos">502</span>
<span class="linenos">503</span><span class="c1"># %%</span>
<span class="linenos">504</span><span class="c1"># we reuse the FILE_DIFF_LIST from the previous test</span>
<span class="linenos">505</span><span class="n">test_conversation</span> <span class="o">=</span> <span class="n">generate_all_comments_subflow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="linenos">506</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">507</span>        <span class="n">FILE_DIFF_LIST_IO</span><span class="p">:</span> <span class="n">FILE_DIFF_LIST</span><span class="p">,</span>
<span class="linenos">508</span>    <span class="p">}</span>
<span class="linenos">509</span><span class="p">)</span>
<span class="linenos">510</span>
<span class="linenos">511</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">test_conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">512</span>
<span class="linenos">513</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">514</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">515</span>
<span class="linenos">516</span><span class="n">NESTED_COMMENT_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">]</span>
<span class="linenos">517</span><span class="n">FILEPATH_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">FILEPATH_LIST_IO</span><span class="p">]</span>
<span class="linenos">518</span><span class="nb">print</span><span class="p">(</span><span class="n">NESTED_COMMENT_LIST</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="linenos">519</span><span class="nb">print</span><span class="p">(</span><span class="n">FILEPATH_LIST</span><span class="p">)</span>
<span class="linenos">520</span>
<span class="linenos">521</span>
<span class="linenos">522</span>
<span class="linenos">523</span><span class="c1"># %%[markdown]</span>
<span class="linenos">524</span><span class="c1">## Create tool that formats the review comments</span>
<span class="linenos">525</span>
<span class="linenos">526</span><span class="c1"># %%</span>
<span class="linenos">527</span><span class="nd">@tool</span><span class="p">(</span><span class="n">description_mode</span><span class="o">=</span><span class="s2">&quot;only_docstring&quot;</span><span class="p">)</span>
<span class="linenos">528</span><span class="k">def</span><span class="w"> </span><span class="nf">flatten_information</span><span class="p">(</span>
<span class="linenos">529</span>    <span class="n">nested_comments_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span> <span class="n">filepath_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="linenos">530</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="linenos">531</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Flattens information from comments and filepaths.&quot;&quot;&quot;</span>
<span class="linenos">532</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nested_comments_list</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filepath_list</span><span class="p">):</span>
<span class="linenos">533</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="linenos">534</span>            <span class="sa">f</span><span class="s2">&quot;Inconsistent list lengths (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">nested_comments_list</span><span class="p">)</span><span class="si">=}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">filepath_list</span><span class="p">)</span><span class="si">=}</span><span class="s2">)&quot;</span>
<span class="linenos">535</span>        <span class="p">)</span>
<span class="linenos">536</span>
<span class="linenos">537</span>    <span class="n">result</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">538</span>    <span class="k">for</span> <span class="n">comments_list</span><span class="p">,</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">nested_comments_list</span><span class="p">,</span> <span class="n">filepath_list</span><span class="p">):</span>
<span class="linenos">539</span>        <span class="k">for</span> <span class="n">comment_dict</span> <span class="ow">in</span> <span class="n">comments_list</span><span class="p">:</span>
<span class="linenos">540</span>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<span class="linenos">541</span>                <span class="p">{</span>
<span class="linenos">542</span>                    <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">comment_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
<span class="linenos">543</span>                    <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">filepath</span><span class="p">,</span>
<span class="linenos">544</span>                <span class="p">}</span>
<span class="linenos">545</span>            <span class="p">)</span>
<span class="linenos">546</span>
<span class="linenos">547</span>    <span class="k">return</span> <span class="n">result</span>
<span class="linenos">548</span>
<span class="linenos">549</span>
<span class="linenos">550</span><span class="c1"># %%[markdown]</span>
<span class="linenos">551</span><span class="c1">## Create flow that posts review comments to bitbucket</span>
<span class="linenos">552</span>
<span class="linenos">553</span><span class="c1"># %%</span>
<span class="linenos">554</span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="linenos">555</span>
<span class="linenos">556</span><span class="c1"># IO Values</span>
<span class="linenos">557</span><span class="n">PR_POST_URL_IO</span> <span class="o">=</span> <span class="s2">&quot;$pr_post_url&quot;</span>
<span class="linenos">558</span><span class="n">FLATTENED_COMMENT_LIST_IO</span> <span class="o">=</span> <span class="s2">&quot;$flattened_comment_list&quot;</span>
<span class="linenos">559</span><span class="n">FINAL_HTTP_CODES_IO</span> <span class="o">=</span> <span class="s2">&quot;$http_codes&quot;</span>
<span class="linenos">560</span>
<span class="linenos">561</span><span class="c1"># Define the steps</span>
<span class="linenos">562</span>
<span class="linenos">563</span><span class="c1"># Step 1: Flatten the generated comments into a list of comments</span>
<span class="linenos">564</span><span class="n">flatten_nested_comments_list_step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="linenos">565</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flatten_nested_comment_list&quot;</span><span class="p">,</span>
<span class="linenos">566</span>    <span class="n">tool</span><span class="o">=</span><span class="n">flatten_information</span><span class="p">,</span>
<span class="linenos">567</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">568</span>        <span class="s2">&quot;nested_comments_list&quot;</span><span class="p">:</span> <span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">,</span>
<span class="linenos">569</span>        <span class="s2">&quot;filepath_list&quot;</span><span class="p">:</span> <span class="n">FILEPATH_LIST_IO</span><span class="p">,</span>
<span class="linenos">570</span>    <span class="p">},</span>
<span class="linenos">571</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">FLATTENED_COMMENT_LIST_IO</span><span class="p">},</span>
<span class="linenos">572</span><span class="p">)</span>
<span class="linenos">573</span>
<span class="linenos">574</span><span class="c1"># Step 2: Post the comments to bitbucket</span>
<span class="linenos">575</span><span class="n">post_comment_step</span> <span class="o">=</span> <span class="n">ApiCallStep</span><span class="p">(</span>
<span class="linenos">576</span>    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://example.com/rest/api/latest/projects/{{workspace}}/repos/{{repo_slug}}/pull-requests/{{pr_id}}/comments?diffType=EFFECTIVE&amp;markup=true&amp;avatarSize=48&quot;</span><span class="p">,</span>
<span class="linenos">577</span>    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
<span class="linenos">578</span>    <span class="n">json_body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="linenos">579</span>        <span class="p">{</span>
<span class="linenos">580</span>            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;{{content}}&quot;</span><span class="p">,</span>
<span class="linenos">581</span>            <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;NORMAL&quot;</span><span class="p">,</span>
<span class="linenos">582</span>            <span class="s2">&quot;anchor&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">583</span>                <span class="s2">&quot;diffType&quot;</span><span class="p">:</span> <span class="s2">&quot;EFFECTIVE&quot;</span><span class="p">,</span>
<span class="linenos">584</span>                <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;{{path}}&quot;</span><span class="p">,</span>
<span class="linenos">585</span>                <span class="s2">&quot;lineType&quot;</span><span class="p">:</span> <span class="s2">&quot;ADDED&quot;</span><span class="p">,</span>
<span class="linenos">586</span>                <span class="s2">&quot;line&quot;</span><span class="p">:</span> <span class="s2">&quot;{{line | int}}&quot;</span><span class="p">,</span>
<span class="linenos">587</span>                <span class="s2">&quot;fileType&quot;</span><span class="p">:</span> <span class="s2">&quot;TO&quot;</span><span class="p">,</span>
<span class="linenos">588</span>            <span class="p">},</span>
<span class="linenos">589</span>        <span class="p">}</span>
<span class="linenos">590</span>    <span class="p">),</span>
<span class="linenos">591</span>    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span> <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer {{token}}&quot;</span><span class="p">},</span>
<span class="linenos">592</span>    <span class="n">ignore_bad_http_requests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">593</span>    <span class="n">num_retry_on_bad_http_request</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">594</span>    <span class="n">store_response</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">595</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">596</span>        <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">USER_PROVIDED_TOKEN_IO</span><span class="p">,</span>
<span class="linenos">597</span>        <span class="s2">&quot;workspace&quot;</span><span class="p">:</span> <span class="n">REPO_WORKSPACE_IO</span><span class="p">,</span>
<span class="linenos">598</span>        <span class="s2">&quot;repo_slug&quot;</span><span class="p">:</span> <span class="n">REPO_SLUG_IO</span><span class="p">,</span>
<span class="linenos">599</span>        <span class="s2">&quot;pr_id&quot;</span><span class="p">:</span> <span class="n">PULL_REQUEST_ID_IO</span><span class="p">,</span>
<span class="linenos">600</span>    <span class="p">},</span>
<span class="linenos">601</span><span class="p">)</span>
<span class="linenos">602</span>
<span class="linenos">603</span><span class="n">post_comments_mapstep</span> <span class="o">=</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="linenos">604</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;post_comment&quot;</span><span class="p">,</span>
<span class="linenos">605</span>    <span class="n">flow</span><span class="o">=</span><span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span><span class="n">post_comment_step</span><span class="p">]),</span>
<span class="linenos">606</span>    <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;.content&quot;</span><span class="p">,</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span> <span class="s2">&quot;.line&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;.path&quot;</span><span class="p">},</span>
<span class="linenos">607</span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">FLATTENED_COMMENT_LIST_IO</span><span class="p">},</span>
<span class="linenos">608</span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">ApiCallStep</span><span class="o">.</span><span class="n">HTTP_STATUS_CODE</span><span class="p">],</span>
<span class="linenos">609</span>    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ApiCallStep</span><span class="o">.</span><span class="n">HTTP_STATUS_CODE</span><span class="p">:</span> <span class="n">FINAL_HTTP_CODES_IO</span><span class="p">},</span>
<span class="linenos">610</span><span class="p">)</span>
<span class="linenos">611</span>
<span class="linenos">612</span><span class="n">post_comments_subflow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">613</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Post comments to PR flow&quot;</span><span class="p">,</span>
<span class="linenos">614</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">flatten_nested_comments_list_step</span><span class="p">,</span>
<span class="linenos">615</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">616</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">flatten_nested_comments_list_step</span><span class="p">,</span> <span class="n">post_comments_mapstep</span><span class="p">),</span>
<span class="linenos">617</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">post_comments_mapstep</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="linenos">618</span>    <span class="p">],</span>
<span class="linenos">619</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">620</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">621</span>            <span class="n">flatten_nested_comments_list_step</span><span class="p">,</span>
<span class="linenos">622</span>            <span class="n">FLATTENED_COMMENT_LIST_IO</span><span class="p">,</span>
<span class="linenos">623</span>            <span class="n">post_comments_mapstep</span><span class="p">,</span>
<span class="linenos">624</span>            <span class="n">FLATTENED_COMMENT_LIST_IO</span><span class="p">,</span>
<span class="linenos">625</span>        <span class="p">)</span>
<span class="linenos">626</span>    <span class="p">],</span>
<span class="linenos">627</span><span class="p">)</span>
<span class="linenos">628</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.step</span><span class="w"> </span><span class="kn">import</span> <span class="n">StepResult</span>
<span class="linenos">629</span>
<span class="linenos">630</span>
<span class="linenos">631</span><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_mock_api_post_step_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">conversation</span><span class="p">):</span>
<span class="linenos">632</span>    <span class="n">output_values</span> <span class="o">=</span> <span class="p">{</span><span class="n">ApiCallStep</span><span class="o">.</span><span class="n">HTTP_RESPONSE</span><span class="p">:</span> <span class="n">MOCK_DIFF</span><span class="p">,</span> <span class="n">ApiCallStep</span><span class="o">.</span><span class="n">HTTP_STATUS_CODE</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="linenos">633</span>    <span class="k">return</span> <span class="n">StepResult</span><span class="p">(</span>
<span class="linenos">634</span>        <span class="n">outputs</span><span class="o">=</span><span class="n">output_values</span><span class="p">,</span>
<span class="linenos">635</span>    <span class="p">)</span>
<span class="linenos">636</span>
<span class="linenos">637</span>
<span class="linenos">638</span><span class="n">post_comment_step</span><span class="o">.</span><span class="n">invoke_async</span> <span class="o">=</span> <span class="n">MethodType</span><span class="p">(</span><span class="n">_mock_api_post_step_invoke</span><span class="p">,</span> <span class="n">post_comment_step</span><span class="p">)</span>
<span class="linenos">639</span>
<span class="linenos">640</span>
<span class="linenos">641</span><span class="c1"># %%[markdown]</span>
<span class="linenos">642</span><span class="c1">## Test flow that posts review comments</span>
<span class="linenos">643</span>
<span class="linenos">644</span><span class="c1"># %%</span>
<span class="linenos">645</span><span class="c1"># we reuse the NESTED_COMMENT_LIST and FILEPATH_LIST from the previous test</span>
<span class="linenos">646</span>
<span class="linenos">647</span><span class="n">test_conversation</span> <span class="o">=</span> <span class="n">post_comments_subflow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="linenos">648</span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">649</span>        <span class="n">USER_PROVIDED_TOKEN_IO</span><span class="p">:</span> <span class="s2">&quot;MY_TOKEN&quot;</span><span class="p">,</span>
<span class="linenos">650</span>        <span class="n">REPO_WORKSPACE_IO</span><span class="p">:</span> <span class="s2">&quot;MY_REPO_WORKSPACE&quot;</span><span class="p">,</span>
<span class="linenos">651</span>        <span class="n">REPO_SLUG_IO</span><span class="p">:</span> <span class="s2">&quot;MY_REPO_SLUG&quot;</span><span class="p">,</span>
<span class="linenos">652</span>        <span class="n">PULL_REQUEST_ID_IO</span><span class="p">:</span> <span class="s2">&quot;MY_REPO_ID&quot;</span><span class="p">,</span>
<span class="linenos">653</span>        <span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">:</span> <span class="n">NESTED_COMMENT_LIST</span><span class="p">,</span>
<span class="linenos">654</span>        <span class="n">FILEPATH_LIST_IO</span><span class="p">:</span> <span class="n">FILEPATH_LIST</span><span class="p">,</span>
<span class="linenos">655</span>    <span class="p">}</span>
<span class="linenos">656</span><span class="p">)</span>
<span class="linenos">657</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">test_conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">658</span>
<span class="linenos">659</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">660</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">661</span>
<span class="linenos">662</span><span class="n">FINAL_HTTP_CODES</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">FINAL_HTTP_CODES_IO</span><span class="p">]</span>
<span class="linenos">663</span><span class="nb">print</span><span class="p">(</span><span class="n">FINAL_HTTP_CODES</span><span class="p">)</span>
<span class="linenos">664</span>
<span class="linenos">665</span>
<span class="linenos">666</span><span class="c1"># %%[markdown]</span>
<span class="linenos">667</span><span class="c1">## Create flow that performs the review</span>
<span class="linenos">668</span>
<span class="linenos">669</span><span class="c1"># %%</span>
<span class="linenos">670</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlowExecutionStep</span>
<span class="linenos">671</span>
<span class="linenos">672</span>
<span class="linenos">673</span><span class="c1"># Steps</span>
<span class="linenos">674</span><span class="n">retrieve_diff_flowstep</span> <span class="o">=</span> <span class="n">FlowExecutionStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;retrieve_diff_flowstep&quot;</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="n">retrieve_diff_subflow</span><span class="p">)</span>
<span class="linenos">675</span><span class="n">generate_all_comments_flowstep</span> <span class="o">=</span> <span class="n">FlowExecutionStep</span><span class="p">(</span>
<span class="linenos">676</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_comments_flowstep&quot;</span><span class="p">,</span>
<span class="linenos">677</span>    <span class="n">flow</span><span class="o">=</span><span class="n">generate_all_comments_subflow</span><span class="p">,</span>
<span class="linenos">678</span><span class="p">)</span>
<span class="linenos">679</span>
<span class="linenos">680</span><span class="n">pr_bot</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="linenos">681</span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;PR bot flow&quot;</span><span class="p">,</span>
<span class="linenos">682</span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">retrieve_diff_flowstep</span><span class="p">,</span>
<span class="linenos">683</span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">684</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">retrieve_diff_flowstep</span><span class="p">,</span> <span class="n">generate_all_comments_flowstep</span><span class="p">),</span>
<span class="linenos">685</span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">generate_all_comments_flowstep</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="linenos">686</span>    <span class="p">],</span>
<span class="linenos">687</span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">688</span>        <span class="n">DataFlowEdge</span><span class="p">(</span>
<span class="linenos">689</span>            <span class="n">retrieve_diff_flowstep</span><span class="p">,</span>
<span class="linenos">690</span>            <span class="n">FILE_DIFF_LIST_IO</span><span class="p">,</span>
<span class="linenos">691</span>            <span class="n">generate_all_comments_flowstep</span><span class="p">,</span>
<span class="linenos">692</span>            <span class="n">FILE_DIFF_LIST_IO</span><span class="p">,</span>
<span class="linenos">693</span>        <span class="p">)</span>
<span class="linenos">694</span>    <span class="p">],</span>
<span class="linenos">695</span><span class="p">)</span>
<span class="linenos">696</span>
<span class="linenos">697</span>
<span class="linenos">698</span><span class="c1"># %%[markdown]</span>
<span class="linenos">699</span><span class="c1">## Tests flow that performs the review</span>
<span class="linenos">700</span>
<span class="linenos">701</span><span class="c1"># %%</span>
<span class="linenos">702</span><span class="c1"># Replace the path below with the path to your actual codebase sample git repository.</span>
<span class="linenos">703</span><span class="n">PATH_TO_DIR</span> <span class="o">=</span> <span class="s2">&quot;path/to/repository_root&quot;</span>
<span class="linenos">704</span>
<span class="linenos">705</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">pr_bot</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">REPO_DIRPATH_IO</span><span class="p">:</span> <span class="n">PATH_TO_DIR</span><span class="p">})</span>
<span class="linenos">706</span>
<span class="linenos">707</span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="linenos">708</span>
<span class="linenos">709</span><span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">execution_status</span><span class="p">,</span> <span class="n">FinishedStatus</span><span class="p">):</span>
<span class="linenos">710</span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected status type&quot;</span><span class="p">)</span>
<span class="linenos">711</span>
<span class="linenos">712</span><span class="nb">print</span><span class="p">(</span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">)</span>
<span class="linenos">713</span>
<span class="linenos">714</span><span class="n">NESTED_COMMENT_LIST</span> <span class="o">=</span> <span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">NESTED_COMMENT_LIST_IO</span><span class="p">]</span>
<span class="linenos">715</span>
<span class="linenos">716</span>
<span class="linenos">717</span><span class="c1"># %%[markdown]</span>
<span class="linenos">718</span><span class="c1">## Export config to Agent Spec</span>
<span class="linenos">719</span>
<span class="linenos">720</span><span class="c1"># %%</span>
<span class="linenos">721</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecExporter</span>
<span class="linenos">722</span>
<span class="linenos">723</span><span class="n">serialized_assistant</span> <span class="o">=</span> <span class="n">AgentSpecExporter</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">pr_bot</span><span class="p">)</span>
<span class="linenos">724</span>
<span class="linenos">725</span>
<span class="linenos">726</span><span class="c1"># %%[markdown]</span>
<span class="linenos">727</span><span class="c1">## Load Agent Spec config</span>
<span class="linenos">728</span>
<span class="linenos">729</span><span class="c1"># %%</span>
<span class="linenos">730</span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agentspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentSpecLoader</span>
<span class="linenos">731</span>
<span class="linenos">732</span><span class="n">tool_registry</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">733</span>    <span class="s2">&quot;local_get_pr_diff_tool&quot;</span><span class="p">:</span> <span class="n">local_get_pr_diff_tool</span><span class="p">,</span>
<span class="linenos">734</span>    <span class="s2">&quot;format_git_diff&quot;</span><span class="p">:</span> <span class="n">format_git_diff</span><span class="p">,</span>
<span class="linenos">735</span><span class="p">}</span>
<span class="linenos">736</span>
<span class="linenos">737</span><span class="n">assistant</span> <span class="o">=</span> <span class="n">AgentSpecLoader</span><span class="p">(</span><span class="n">tool_registry</span><span class="o">=</span><span class="n">tool_registry</span><span class="p">)</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">serialized_assistant</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-the-task">Introduction to the task</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-imports-and-llm-configuration">Part 1: Imports and LLM configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-retrieve-the-pr-diff-information">Part 2: Retrieve the PR diff information</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-a-tool">Build a tool</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-steps-and-the-sub-flow">Building the steps and the sub-flow</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-pr-diff-get-pr-diff-step">Get the PR diff, <code class="docutils literal notranslate"><span class="pre">get_pr_diff_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-file-diffs-into-a-list-extract-into-list-of-file-diff-step">Extract file diffs into a list, <code class="docutils literal notranslate"><span class="pre">extract_into_list_of_file_diff_step</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-a-flow">Defining a Flow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-flow">Testing the flow</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-review-the-list-of-diffs">Part 3: Review the list of diffs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-the-tools-and-checks">Build the tools and checks</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#checks-and-llm-instructions">Checks and LLM instructions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#diff-formatting-tool">Diff formatting tool</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Building the steps and the sub-flow</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#format-diff-to-string-format-diff-to-string-step">Format diff to string, <code class="docutils literal notranslate"><span class="pre">format_diff_to_string_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-lines-to-the-diff-add-lines-on-diff-step">Add lines to the diff, <code class="docutils literal notranslate"><span class="pre">add_lines_on_diff_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-file-path-extract-file-path-step">Extract file path, <code class="docutils literal notranslate"><span class="pre">extract_file_path_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-comments-generate-comments-step">Generate comments, <code class="docutils literal notranslate"><span class="pre">generate_comments_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-comments-from-json-extract-comments-from-json-step">Extract comments from JSON, <code class="docutils literal notranslate"><span class="pre">extract_comments_from_json_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-sub-flow-generate-comments-subflow">Create the sub-flow, <code class="docutils literal notranslate"><span class="pre">generate_comments_subflow</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-comment-generation-to-all-file-diffs">Applying the comment generation to all file diffs</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-sub-flow">Testing the sub-flow</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-final-flow">Building the final Flow</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-combined-assistant">Testing the combined assistant</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agent-spec-exporting-loading">Agent Spec Exporting/Loading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recap">Recap</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#full-code">Full Code</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=dba54f56160742ef5599"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=dba54f56160742ef5599"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>