


<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Flows &#8212; wayflowcore 25.4.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css-style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/core.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'core/api/flows';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://oracle.github.io/wayflow/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '25.4.2';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
  <script src="../../_static/announcement.js"></script>

    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Agents" href="agent.html" />
    <link rel="prev" title="Events" href="events.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="25.4" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="wayflowcore 25.4.2 documentation - Home"/>
    <img src="../../_static/logo-dark.svg" class="logo__image only-dark pst-js-only" alt="wayflowcore 25.4.2 documentation - Home"/>
  
  
</a></div>
    
      <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials &amp; Use Cases</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/basic_agent.html">Build a Simple Conversational Assistant with Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/basic_flow.html">Build a Simple Fixed-flow Assistant with Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/usecase_prbot.html">Build a Simple Code Review Assistant</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howtoguides/index.html">How-to Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/io_descriptors.html">Change Input and Output Descriptors of Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_async.html">Use Asynchronous APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/agents.html">Create a ReAct Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_imagecontent.html">How to Send Images to LLMs and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_ociagent.html">Use OCI Generative AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_prompttemplate.html">Use Templates for Advanced Prompting Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_userinputinflows.html">Ask for User Input in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/conditional_flows.html">Create Conditional Transitions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/promptexecutionstep.html">Do Structured LLM Generation in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_userconfirmation.html">Add User Confirmation to a Tool Call Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/catching_exceptions.html">Catch Exceptions in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mapstep.html">Do Map and Reduce Operations in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_agents_in_flows.html">Use Agents in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_multiagent.html">Build a Hierarchical Multi-Agent System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_swarm.html">Build a Swarm of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_managerworkers.html">Build a ManagerWorkers of Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_build_assistants_with_tools.html">Build Assistants with Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_multiple_output_tool.html">Create Tools with Multiple Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/create_a_tool_from_a_flow.html">Convert Flows to Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_mcp.html">Connect MCP tools to Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_remote_tool_expired_token.html">Do Remote API Calls with Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_execute_agentspec_with_wayflowcore.html">Load and Execute an Agent Spec Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_serdeser.html">Serialize and Deserialize Flows and Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_serialize_conversations.html">Serialize and Deserialize Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/generation_config.html">Specify the Generation Configuration when Using LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/llm_from_different_providers.html">Use LLM from Different LLM Sources and Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/installing_ollama.html">Install and Use Ollama</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_tracing.html">Enable Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_datastores.html">Connect Assistants to Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/embeddingmodels_from_different_providers.html">Use Embedding Models from Different Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_evaluation.html">How to Evaluate WayFlow Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_conversation_evaluation.html">How to Evaluate Assistant Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtoguides/howto_variable.html">Use Variables for Shared State in Flows</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">API Reference</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="agentspec.html">Agent Spec Adapters</a></li>

<li class="toctree-l2"><a class="reference internal" href="conversation.html">Conversations</a></li>
<li class="toctree-l2"><a class="reference internal" href="llmmodels.html">LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="agent.html">Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="embeddingmodels.html">Embedding Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextproviders.html">Context Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="interrupts.html">Execution Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="prompttemplate.html">PromptTemplates</a></li>
<li class="toctree-l2"><a class="reference internal" href="serialization.html">Serialization/Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastores.html">Datastores</a></li>
<li class="toctree-l2"><a class="reference internal" href="warnings.html">Warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/reference_sheet.html">Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">For Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">WayFlow</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Flows</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="flows">
<h1>Flows<a class="headerlink" href="#flows" title="Permalink to this heading">#</a></h1>
<p>This page presents all APIs and classes related to flows and steps in WayFlow.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
<a class="reference internal" href="../../_images/agentspec-icon.svg"><img alt="agentspec-icon" src="../../_images/agentspec-icon.svg" width="100px" /></a></div>
<p class="sd-card-text">Visit the Agent Spec API Documentation to learn more about Flow Components.</p>
</div>
<a class="sd-stretched-link sd-hide-link-text reference external" href="https://oracle.github.io/agent-spec/api/flows.html"><span>Agent Spec - Flows API Reference</span></a></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Click the button above ↑ to visit the <a class="reference external" href="https://oracle.github.io/agent-spec/index.html">Agent Spec Documentation</a></p>
</div>
<section id="flows-steps">
<h2>Flows &amp; Steps<a class="headerlink" href="#flows-steps" title="Permalink to this heading">#</a></h2>
<span class="target" id="flow"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.flow.</span></span><span class="sig-name descname"><span class="pre">Flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_flow_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_flow_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_providers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin_step_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow" title="Permalink to this definition">#</a></dt>
<dd><p>Represents a conversational assistant that defines the flow of a conversation.</p>
<p>The flow consists of a set of steps (states) and possible transitions between steps.
Transitions are validated to ensure compliance with expected scenarios.
The flow can have arbitrary loops, and each step can indicate whether it should be followed by
a direct execution of the next step or yielding back to the user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A flow has input and output descriptors, describing what values the flow requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input descriptors of the flow are resolved
automatically based on the shape of the flow. This means that we consider an input descriptor of the flow
all input descriptors that are defined in the <code class="docutils literal notranslate"><span class="pre">StartStep</span></code>.</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">StartStep</span></code> is provided for the flow, the input descriptors of the step are resolved
automatically based on the shape of the flow. They consist of all input descriptors of its steps that are
not linked with a <code class="docutils literal notranslate"><span class="pre">data_flow_edge</span></code> to an output descriptor of another step in this flow.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one. If some of them are missing,
they won’t be exposed as inputs of the flow.</p>
<p>When starting a conversation with a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>, you need to pass an input for each input_descriptor of
the flow using <code class="docutils literal notranslate"><span class="pre">flow.start_conversation(inputs=&lt;INPUTS&gt;)</span></code>.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the flow will auto-detect all outputs that are
produced in any path in this flow. This means that we consider an output descriptor of the flow all output
descriptors that were produced when reaching any of the <code class="docutils literal notranslate"><span class="pre">CompleteStep</span></code> / steps transitioning to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one. If some of them are missing,
they won’t be exposed as outputs of the flow.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
the flow will not work if they don’t have default values.</p>
<p><strong>Branches</strong></p>
<p>Flows sometimes can have different paths, and finish in different <code class="docutils literal notranslate"><span class="pre">CompleteStep</span></code>. Each name of a <code class="docutils literal notranslate"><span class="pre">CompleteStep</span></code> in the flow
will be exposed as a different end of the flow (or branch).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>steps</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>Step</em></a><em>] </em><em>| </em><em>None</em>) – Dictionary of steps linking names with stateless instances of steps.</p></li>
<li><p><strong>begin_step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>Step</em></a><em> | </em><em>None</em>) – First step of the flow.</p></li>
<li><p><strong>data_flow_edges</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.dataconnection.DataFlowEdge" title="wayflowcore.dataconnection.DataFlowEdge"><em>DataFlowEdge</em></a><em>] </em><em>| </em><em>None</em>) – Data flow edges indicate which outputs that step or context provider produce are passed
to the next steps in the Flow.</p></li>
<li><p><strong>control_flow_edges</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.controlconnection.ControlFlowEdge" title="wayflowcore.controlconnection.ControlFlowEdge"><em>ControlFlowEdge</em></a><em>] </em><em>| </em><em>None</em>) – Control flow edges indicate transitions between each steps.</p></li>
<li><p><strong>context_providers</strong> (<em>List</em><em>[</em><a class="reference internal" href="contextproviders.html#wayflowcore.contextproviders.contextprovider.ContextProvider" title="wayflowcore.contextproviders.contextprovider.ContextProvider"><em>ContextProvider</em></a><em>] </em><em>| </em><em>None</em>) – List of objects that add context to specific steps.</p></li>
<li><p><strong>variables</strong> (<em>List</em><em>[</em><a class="reference internal" href="variables.html#wayflowcore.variable.Variable" title="wayflowcore.variable.Variable"><em>Variable</em></a><em>] </em><em>| </em><em>None</em>) – <p>List of variables for the flow, whose values are visible per conversation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Variables</span></code> defined in this list must have unique names. Whenever a flow starts
a new converstation, a variable store is created with keys being the flow’s
variables and values being the variables’ default values.</p>
</div>
</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – name of the agent, used for composition</p></li>
<li><p><strong>description</strong> (<em>str</em>) – description of the agent, used for composition</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – <p>Input descriptors of the flow. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the flow will resolve the input descriptors automatically in a best effort manner.
.. note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If ``input_descriptors`` are specified, they will override the resolved descriptors but will be matched
by ``name`` against them to check that types can be casted from one another, raising an error if they can&#39;t.
If some expected descriptors are missing from the ``input_descriptors`` (i.e. you forgot to specify one),
a warning will be raised and the flow is not guaranteed to work properly.
</pre></div>
</div>
</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – <p>Output descriptors of the flow. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the flow will resolve the output descriptors automatically in a best effort manner.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> are specified, they will override the resolved descriptors but will be matched
by <code class="docutils literal notranslate"><span class="pre">name</span></code> against them to check that types can be casted from one another, raising an error if they can’t.
If some expected descriptors are missing from the <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> (i.e. you forgot to specify one),
a warning will be raised and the flow is not guaranteed to work properly.</p>
</div>
</p></li>
<li><p><strong>flow_id</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>begin_step_name</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
<li><p><strong>transitions</strong> (<em>Mapping</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>Mapping</em><em>[</em><em>str</em><em>, </em><em>str</em><em> | </em><em>None</em><em>]</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>id</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">OutputMessageStep</span><span class="p">,</span> <span class="n">InputMessageStep</span><span class="p">,</span> <span class="n">StartStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">START_STEP</span> <span class="o">=</span> <span class="s2">&quot;start_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_STEP</span> <span class="o">=</span> <span class="s2">&quot;output_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">USER_NAME</span> <span class="o">=</span> <span class="s2">&quot;$message&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span><span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">USER_NAME</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;Welcome, {{username}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">USER_NAME</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">START_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span><span class="n">START_STEP</span><span class="p">:</span> <span class="n">start_step</span><span class="p">,</span> <span class="n">OUTPUT_STEP</span><span class="p">:</span> <span class="n">output_step</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">output_step</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">output_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">USER_NAME</span><span class="p">:</span> <span class="s2">&quot;User&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;output_message&#39;: &#39;Welcome, User&#39;}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.add_context_providers">
<span class="sig-name descname"><span class="pre">add_context_providers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">providers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow.add_context_providers" title="Permalink to this definition">#</a></dt>
<dd><p>Adds context key value providers to the flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>providers</strong> (<em>List</em><em>[</em><a class="reference internal" href="contextproviders.html#wayflowcore.contextproviders.contextprovider.ContextProvider" title="wayflowcore.contextproviders.contextprovider.ContextProvider"><em>ContextProvider</em></a><em>]</em>) – Context providers to add to the flow.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.as_client_tool">
<span class="sig-name descname"><span class="pre">as_client_tool</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow.as_client_tool" title="Permalink to this definition">#</a></dt>
<dd><p>Converts this flow into a client tool</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="tools.html#wayflowcore.tools.clienttools.ClientTool" title="wayflowcore.tools.clienttools.ClientTool">ClientTool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.as_server_tool">
<span class="sig-name descname"><span class="pre">as_server_tool</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow.as_server_tool" title="Permalink to this definition">#</a></dt>
<dd><p>Converts this flow into a server tool. Can only convert non-yielding flows</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="tools.html#wayflowcore.tools.servertools.ServerTool" title="wayflowcore.tools.servertools.ServerTool">ServerTool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow.clone" title="Permalink to this definition">#</a></dt>
<dd><p>Clones a flow with a different name and description</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>Flow</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.flow_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flow_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#wayflowcore.flow.Flow.flow_id" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.from_steps">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_steps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_flow_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_providers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow.from_steps" title="Permalink to this definition">#</a></dt>
<dd><p>Helper method to create a sequential flow from a list of steps. Each step will be executed in the order
they are passed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>steps</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>Step</em></a><em>]</em>) – the steps to create an assistant from</p></li>
<li><p><strong>data_flow_edges</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.dataconnection.DataFlowEdge" title="wayflowcore.dataconnection.DataFlowEdge"><em>DataFlowEdge</em></a><em>] </em><em>| </em><em>None</em>) – list of data flow edges</p></li>
<li><p><strong>context_providers</strong> (<em>list</em><em>[</em><a class="reference internal" href="contextproviders.html#wayflowcore.contextproviders.contextprovider.ContextProvider" title="wayflowcore.contextproviders.contextprovider.ContextProvider"><em>wayflowcore.contextproviders.contextprovider.ContextProvider</em></a><em>] </em><em>| </em><em>None</em>) – list of context providers</p></li>
<li><p><strong>variables</strong> (<em>List</em><em>[</em><a class="reference internal" href="variables.html#wayflowcore.variable.Variable" title="wayflowcore.variable.Variable"><em>Variable</em></a><em>] </em><em>| </em><em>None</em>) – list of variables</p></li>
<li><p><strong>loop</strong> (<em>bool</em>) – whether the flow should loop back the first step or finish after the last step.</p></li>
<li><p><strong>step_names</strong> (<em>List</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – List of step names. Will default to “step_{idx}” if not passed.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the flow</p></li>
<li><p><strong>description</strong> (<em>str</em>) – Description of the flow</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a flow in one line using this function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s1">&#39;step 1 executes&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s1">&#39;step 2 executes&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s1">&#39;step 3 executes&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.llms">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">llms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><span class="pre">LlmModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.flow.Flow.llms" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.flow.Flow.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the flow might yield back to the user.
<code class="docutils literal notranslate"><span class="pre">True</span></code> if any of the steps in the flow might yield.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.flow.Flow.start_conversation">
<span class="sig-name descname"><span class="pre">start_conversation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversation_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_providers_from_parent_flow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flow.Flow.start_conversation" title="Permalink to this definition">#</a></dt>
<dd><p>Start the conversation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Dictionary of inputs. Keys are the variable identifiers and
values are the actual inputs to start the conversation.</p></li>
<li><p><strong>conversation_id</strong> (<em>str</em><em> | </em><em>None</em>) – Conversation id of the parent conversation.</p></li>
<li><p><strong>messages</strong> (<a class="reference internal" href="conversation.html#wayflowcore.messagelist.MessageList" title="wayflowcore.messagelist.MessageList"><em>MessageList</em></a><em> | </em><em>List</em><em>[</em><a class="reference internal" href="conversation.html#wayflowcore.messagelist.Message" title="wayflowcore.messagelist.Message"><em>Message</em></a><em>] </em><em>| </em><em>None</em>) – List of messages (<code class="docutils literal notranslate"><span class="pre">MessageList</span></code> object) before starting the conversation.</p></li>
<li><p><strong>context_providers_from_parent_flow</strong> (<em>Set</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – Context provider that don’t need to be checked when validating existing inputs.</p></li>
<li><p><strong>nesting_level</strong> (<em>int</em>) – Nesting level of the conversation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A Conversation object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="assistantstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.step.</span></span><span class="sig-name descname"><span class="pre">Step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_static_configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step" title="Permalink to this definition">#</a></dt>
<dd><p>Assistant steps are what get executed by the flow.
They can have custom logic in the <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code> method.
They can act based on input values passed to them, or messages in the messages list.
The messages list should be used to reflect the conversation with the user, i.e.
only things that make sense to show to the user or that were provided by the user.
They should indicate what is the next step upon return.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>llm</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><em>LlmModel</em></a><em> | </em><em>None</em>) – Model that is used when executing the step.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of input descriptors of the step. They will compose the input dictionary that will be passed at <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code> time.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – List of output descriptors of the step. The executor will assume that what is returned by <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code> contains a value for all these descriptors.</p></li>
<li><p><strong>step_static_configuration</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.BRANCH_NEXT">
<span class="sig-name descname"><span class="pre">BRANCH_NEXT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'next'</span></em><a class="headerlink" href="#wayflowcore.steps.step.Step.BRANCH_NEXT" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the branch taken by steps that do not have flow control and just have one transition</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.BRANCH_SELF">
<span class="sig-name descname"><span class="pre">BRANCH_SELF</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'__self__'</span></em><a class="headerlink" href="#wayflowcore.steps.step.Step.BRANCH_SELF" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the branch taken by a step that will come back to itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.get_branches">
<span class="sig-name descname"><span class="pre">get_branches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.get_branches" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the names of the control flow output branches of this step</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.get_static_configuration_descriptors">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_static_configuration_descriptors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.get_static_configuration_descriptors" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, type]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.invoke">
<span class="sig-name descname"><span class="pre">invoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.invoke" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>conversation</strong> (<a class="reference internal" href="conversation.html#wayflowcore.conversation.Conversation" title="wayflowcore.conversation.Conversation"><em>Conversation</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.steps.step.StepResult" title="wayflowcore.steps.step.StepResult"><em>StepResult</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.invoke_async">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invoke_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.invoke_async" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>conversation</strong> (<a class="reference internal" href="conversation.html#wayflowcore.conversation.Conversation" title="wayflowcore.conversation.Conversation"><em>Conversation</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.steps.step.StepResult" title="wayflowcore.steps.step.StepResult"><em>StepResult</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.llms">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">llms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><span class="pre">LlmModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.step.Step.llms" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.step.Step.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step might yield back to the user.
Might be the step directly, or one of the steps it calls.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.remap_inputs">
<span class="sig-name descname"><span class="pre">remap_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.remap_inputs" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.remap_outputs">
<span class="sig-name descname"><span class="pre">remap_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.remap_outputs" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>outputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, type]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.sub_flow">
<span class="sig-name descname"><span class="pre">sub_flow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.Step.sub_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sub-flow this step implements, if it does.
(e.g. <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code> does execute a sub-flow)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.step.Step.supports_dict_io_with_non_str_keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports_dict_io_with_non_str_keys</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.step.Step.supports_dict_io_with_non_str_keys" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step can accept/return dictionaries with
keys that are not strings as IO.</p>
</dd></dl>

</dd></dl>

<span class="target" id="dataflowedge"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.dataconnection.DataFlowEdge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.dataconnection.</span></span><span class="sig-name descname"><span class="pre">DataFlowEdge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.dataconnection.DataFlowEdge" title="Permalink to this definition">#</a></dt>
<dd><p>A data flow edge specifies how the output of a step or context provider propagates as input of another step.</p>
<p>Note: An output can be propagated as input of several steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>Step</em></a><em> | </em><a class="reference internal" href="contextproviders.html#wayflowcore.contextproviders.contextprovider.ContextProvider" title="wayflowcore.contextproviders.contextprovider.ContextProvider"><em>ContextProvider</em></a>) – The source step or context provider where the data is outputted from.
This can be an instance of either <code class="docutils literal notranslate"><span class="pre">Step</span></code> or <code class="docutils literal notranslate"><span class="pre">ContextProvider</span></code>.</p></li>
<li><p><strong>source_output</strong> (<em>str</em>) – The name of the output generated by the <code class="docutils literal notranslate"><span class="pre">source_step</span></code>.
This is used to identify the specific output data being propagated.</p></li>
<li><p><strong>destination_step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>Step</em></a>) – The destination step where the data is directed to.</p></li>
<li><p><strong>destination_input</strong> (<em>str</em>) – The name of the input in the <code class="docutils literal notranslate"><span class="pre">destination_step</span></code> where the data is propagated to.
This is used to specify how the output data is used as input in the destination step.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FAKE_PROCESSING_STEP</span> <span class="o">=</span> <span class="s2">&quot;processing_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_STEP</span> <span class="o">=</span> <span class="s2">&quot;output_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fake_processing_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;Successfully processed username {{username}}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s1">&#39;{{session_id}}: Received message &quot;{{processing_message}}&quot;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">FAKE_PROCESSING_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="n">FAKE_PROCESSING_STEP</span><span class="p">:</span> <span class="n">fake_processing_step</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">OUTPUT_STEP</span><span class="p">:</span> <span class="n">output_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">transitions</span><span class="o">=</span><span class="p">{</span><span class="n">FAKE_PROCESSING_STEP</span><span class="p">:</span> <span class="p">[</span><span class="n">OUTPUT_STEP</span><span class="p">],</span> <span class="n">OUTPUT_STEP</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]},</span>
<span class="gp">... </span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span><span class="n">fake_processing_step</span><span class="p">,</span> <span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">output_step</span><span class="p">,</span> <span class="s2">&quot;processing_message&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Username#123&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Session#456&quot;</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">last_message</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># last_message.content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Session#456: Received message &quot;Successfully processed username Username#123&quot;</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.dataconnection.DataFlowEdge.destination_input">
<span class="sig-name descname"><span class="pre">destination_input</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#wayflowcore.dataconnection.DataFlowEdge.destination_input" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.dataconnection.DataFlowEdge.destination_step">
<span class="sig-name descname"><span class="pre">destination_step</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><span class="pre">Step</span></a></em><a class="headerlink" href="#wayflowcore.dataconnection.DataFlowEdge.destination_step" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.dataconnection.DataFlowEdge.source_output">
<span class="sig-name descname"><span class="pre">source_output</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#wayflowcore.dataconnection.DataFlowEdge.source_output" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.dataconnection.DataFlowEdge.source_step">
<span class="sig-name descname"><span class="pre">source_step</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><span class="pre">Step</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="contextproviders.html#wayflowcore.contextproviders.contextprovider.ContextProvider" title="wayflowcore.contextproviders.contextprovider.ContextProvider"><span class="pre">ContextProvider</span></a></em><a class="headerlink" href="#wayflowcore.dataconnection.DataFlowEdge.source_step" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="controlflowedge"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.controlconnection.ControlFlowEdge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.controlconnection.</span></span><span class="sig-name descname"><span class="pre">ControlFlowEdge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_branch='next'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.controlconnection.ControlFlowEdge" title="Permalink to this definition">#</a></dt>
<dd><p>A control flow edge specifies how we transition from a step to another</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>wayflowcore.steps.step.Step</em></a>) – Source <code class="docutils literal notranslate"><span class="pre">Step</span></code> to transition from.</p></li>
<li><p><strong>destination_step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>wayflowcore.steps.step.Step</em></a><em> | </em><em>None</em>) – Destination <code class="docutils literal notranslate"><span class="pre">Step</span></code> where the transition is directed to.</p></li>
<li><p><strong>source_branch</strong> (<em>str</em>) – Name of the specific step branch to transition from.
Defaults to <code class="docutils literal notranslate"><span class="pre">Step.BRANCH_NEXT</span></code>.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opening_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;Opening session&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">closing_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s1">&#39;Closing session&quot;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="s2">&quot;open_step&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;open_step&quot;</span><span class="p">:</span> <span class="n">opening_step</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;close_step&quot;</span><span class="p">:</span> <span class="n">closing_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">opening_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">closing_step</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">closing_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">conversation</span><span class="o">.</span><span class="n">get_messages</span><span class="p">())</span>  
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.controlconnection.ControlFlowEdge.destination_step">
<span class="sig-name descname"><span class="pre">destination_step</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><span class="pre">Step</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#wayflowcore.controlconnection.ControlFlowEdge.destination_step" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.controlconnection.ControlFlowEdge.source_branch">
<span class="sig-name descname"><span class="pre">source_branch</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'next'</span></em><a class="headerlink" href="#wayflowcore.controlconnection.ControlFlowEdge.source_branch" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.controlconnection.ControlFlowEdge.source_step">
<span class="sig-name descname"><span class="pre">source_step</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><span class="pre">Step</span></a></em><a class="headerlink" href="#wayflowcore.controlconnection.ControlFlowEdge.source_step" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="task-steps">
<span id="presentstep"></span><h2>Task steps<a class="headerlink" href="#task-steps" title="Permalink to this heading">#</a></h2>
<span class="target" id="agentexecutionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.agentexecutionstep.AgentExecutionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.agentexecutionstep.</span></span><span class="sig-name descname"><span class="pre">AgentExecutionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caller_input_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that executes an agent. If given some outputs, it will ask the agent to return these outputs.
Otherwise, it will never exit the step and allows the user to ask questions to the agent.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the <code class="docutils literal notranslate"><span class="pre">custom_instruction</span></code> template of the <code class="docutils literal notranslate"><span class="pre">Agent</span></code>, with one input descriptor per variable in the template,
trying to detect the type of the variable based on how it is used in the template.
See <a class="reference internal" href="#templaterenderingstep"><span class="std std-ref">TemplateRenderingStep</span></a> for concrete examples on how descriptors are
extracted from text prompts.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one. If some of them are missing,
an error will be thrown at the instantiation of the <code class="docutils literal notranslate"><span class="pre">Agent</span></code>.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the step will have the same output descriptors
as its <code class="docutils literal notranslate"><span class="pre">Agent</span></code>. See <a class="reference internal" href="agent.html#agent"><span class="std std-ref">Agent</span></a> to learn more about how their output descriptors are computed.</p>
<p>If you provide a list of output descriptors, the step will prompt the <code class="docutils literal notranslate"><span class="pre">Agent</span></code> to gather and output
values that will match the expected output descriptors, which means it can either yield to the user or
finish the conversation by outputting the output values. If the <code class="docutils literal notranslate"><span class="pre">Agent</span></code> is not able to generate them,
the values will be filled with their default values if they are specified, or the default values
of their respective types, after the maximum amount of iterations of the <code class="docutils literal notranslate"><span class="pre">Agent</span></code> is reached.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent</strong> (<a class="reference internal" href="agent.html#wayflowcore.agent.Agent" title="wayflowcore.agent.Agent"><em>Agent</em></a><em> | </em><a class="reference internal" href="agent.html#wayflowcore.ociagent.OciAgent" title="wayflowcore.ociagent.OciAgent"><em>OciAgent</em></a>) – Agent that will be used in the step</p></li>
<li><p><strong>caller_input_mode</strong> (<em>CallerInputMode</em><em> | </em><em>None</em>) – Whether the agent is allowed to ask the user questions (CallerInputMode.ALWAYS) or not (CallerInputMode.NEVER).
If set to NEVER, the step won’t be able to yield. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which means it will use the <code class="docutils literal notranslate"><span class="pre">call_input_mode</span></code>
of the underlying agent.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – <p>Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Changing this will change the behavior of the step. If not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the <code class="docutils literal notranslate"><span class="pre">Agent</span></code> will be prompted
to generate the expected outputs and the step will only return when the <code class="docutils literal notranslate"><span class="pre">Agent</span></code> submits values for
all these outputs.</p>
</div>
</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="agent.html#wayflowcore.agent.Agent" title="wayflowcore.agent.Agent"><code class="xref py py-class docutils literal notranslate"><span class="pre">Agent</span></code></a></dt><dd><p>the agent class that will be run inside this step.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Here are some guidelines to ensure the best performance of this step:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">custom_instruction</span></code> of the <cite>Agent</cite>: specify in it what the task is about. Don’t use phrasing of style “You are a helpful assistant …” because our tool calling template contains it. Only specify relevant information for your use-case</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">caller_input_mode</span></code>: if <code class="docutils literal notranslate"><span class="pre">NEVER</span></code>, you might improve performance by reminding the model to only output a single function at a time and not to talk to the user</p></li>
</ol>
<p class="rubric">Examples</p>
<p>To run this example, you need to install <code class="docutils literal notranslate"><span class="pre">duckduckgosearch</span></code> with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">duckduckgo-search</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">IntegerProperty</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">Property</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">StringProperty</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">InputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.agentexecutionstep</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentExecutionStep</span><span class="p">,</span> <span class="n">CallerInputMode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_community.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">DuckDuckGoSearchRun</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_tool</span> <span class="o">=</span> <span class="n">DuckDuckGoSearchRun</span><span class="p">()</span><span class="o">.</span><span class="n">as_tool</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">custom_instruction</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;Your task is to gather the required information for the user: &quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;creation_date, name, CEO, country&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">search_tool</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">InputMessageStep</span><span class="p">(</span><span class="s2">&quot;Which company are you interested in?&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">AgentExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">caller_input_mode</span><span class="o">=</span><span class="n">CallerInputMode</span><span class="o">.</span><span class="n">NEVER</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>            <span class="n">IntegerProperty</span><span class="p">(</span>
<span class="gp">... </span>                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;creation_date&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;year when the company was founded&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">default_value</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>            <span class="p">),</span>
<span class="gp">... </span>            <span class="n">StringProperty</span><span class="p">(</span>
<span class="gp">... </span>                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;official name of the company&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="p">),</span>
<span class="gp">... </span>            <span class="n">StringProperty</span><span class="p">(</span>
<span class="gp">... </span>                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;CEO&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;name of the CEO of the company&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="p">),</span>
<span class="gp">... </span>            <span class="n">StringProperty</span><span class="p">(</span>
<span class="gp">... </span>                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;country where the headquarters are based&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="p">)</span>
<span class="gp">... </span>        <span class="p">]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="s1">&#39;Oracle&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># status.output_values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {&#39;name&#39;: &#39;Oracle&#39;, &#39;creation_date&#39;: 1977, &#39;CEO&#39;: &#39;Safra A. Catz&#39;, &#39;country&#39;: &#39;US&#39;}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.agentexecutionstep.AgentExecutionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.agentexecutionstep.AgentExecutionStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step might yield back to the user.
Might be the step directly, or one of the steps it calls.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.agentexecutionstep.AgentExecutionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="promptexecutionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.promptexecutionstep.PromptExecutionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.promptexecutionstep.</span></span><span class="sig-name descname"><span class="pre">PromptExecutionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt_template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_structured_generation_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">StructuredGenerationMode.JSON_GENERATION</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">send_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to generate text using an LLM and a prompt template.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the <code class="docutils literal notranslate"><span class="pre">prompt_template</span></code>, with one input descriptor per variable in the template, trying to detect
the type of the variable based on how it is used in the template. See
<a class="reference internal" href="#templaterenderingstep"><span class="std std-ref">TemplateRenderingStep</span></a> for concrete examples on how descriptors are extracted
from text prompts.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, this step will have a single output descriptor,
<code class="docutils literal notranslate"><span class="pre">PromptExecutionStep.OUTPUT</span></code>, type <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, which will be the raw text generated by the LLM.</p>
<p>If you provide a list of output descriptors, the <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> will use structured generation
to ensure generating all expected outputs with the right types. If the LLM is not able to generate them,
the values will be filled with their default values if they are specified, or the default values
of their respective types.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt_template</strong> (<em>str</em><em> | </em><a class="reference internal" href="prompttemplate.html#wayflowcore.templates.template.PromptTemplate" title="wayflowcore.templates.template.PromptTemplate"><em>PromptTemplate</em></a>) – <p>Jinja str prompt template to use for generation. See docstring/documentation of the <code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep</span></code>
for concrete examples of how to work with jinja prompts in WayFlow.
Can also be a fully defined PromptTemplate, in which case the arguments of this step will be matched to
the ones of the prompt to make sure they are compatible.
If the PromptTemplate includes a chat history placeholder, this will be populated
automatically by step with the agent, user and tool messages in the conversation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that not all LLMs support native structured generation (which is the default
structured generation mode when simply configuring a <code class="docutils literal notranslate"><span class="pre">PromptTemplate</span></code> with a response
format). For such cases, or to improve the reasoning performed by the model before
generating the structured output, you can use the helper method
<code class="docutils literal notranslate"><span class="pre">adapt_prompt_template_for_json_structured_generation</span></code> to quickly get started with
JSON structured generation. For more complex use-cases, you can check out the
<a class="reference internal" href="../howtoguides/howto_prompttemplate.html#top-howtoprompttemplates"><span class="std std-ref">PromptTemplate how-to guide</span></a>.</p>
</div>
</p></li>
<li><p><strong>llm</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><em>LlmModel</em></a>) – Model that is used when executing the step.</p></li>
<li><p><strong>generation_config</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmgenerationconfig.LlmGenerationConfig" title="wayflowcore.models.llmgenerationconfig.LlmGenerationConfig"><em>LlmGenerationConfig</em></a><em> | </em><em>None</em>) – Optional generation arguments for the LLM generation in this step. See <code class="docutils literal notranslate"><span class="pre">LlmGenerationConfig</span></code> for available parameters.</p></li>
<li><p><strong>send_message</strong> (<em>bool</em>) – Determines whether to send the generated content to the current message list or not. Note that message is still streamed if streaming is not disabled.
By default, the content is only exposed as an output.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – <p>Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If not <code class="docutils literal notranslate"><span class="pre">None</span></code> and doesn’t have a single <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> descriptor, the step will perform
structured generation.</p>
</div>
</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>_structured_generation_mode</strong> (<em>StructuredGenerationMode</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptExecutionStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.models.llmmodelfactory</span><span class="w"> </span><span class="kn">import</span> <span class="n">LlmModelFactory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VLLM_CONFIG</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="s2">&quot;vllm&quot;</span><span class="p">,</span> <span class="s2">&quot;host_port&quot;</span><span class="p">:</span> <span class="n">LLAMA70B_API_ENDPOINT</span><span class="p">,</span> <span class="s2">&quot;model_id&quot;</span><span class="p">:</span> <span class="s2">&quot;/storage/models/Llama-3.1-70B-Instruct&quot;</span><span class="p">,}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm</span> <span class="o">=</span> <span class="n">LlmModelFactory</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">VLLM_CONFIG</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;What is the capital of {{ country }} The answer is among {</span><span class="si">% f</span><span class="s2">or city in cities %}- {{city}}</span><span class="se">\n</span><span class="s2">{</span><span class="si">% e</span><span class="s2">ndfor %}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">input_descriptors</span><span class="p">]</span>
<span class="go">[&#39;country&#39;, &#39;cities&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;Switzerland&#39;</span><span class="p">,</span> <span class="s1">&#39;cities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;bern&#39;</span><span class="p">,</span> <span class="s1">&#39;basel&#39;</span><span class="p">,</span> <span class="s1">&#39;zurich&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">PromptExecutionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.promptexecutionstep.PromptExecutionStep.JSON_CONSTRAINED_GENERATION_PROMPT">
<span class="sig-name descname"><span class="pre">JSON_CONSTRAINED_GENERATION_PROMPT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'At</span> <span class="pre">the</span> <span class="pre">end</span> <span class="pre">of</span> <span class="pre">your</span> <span class="pre">answer,</span> <span class="pre">finish</span> <span class="pre">with</span> <span class="pre">&lt;final_answer&gt;$your_answer$&lt;/final_answer&gt;</span> <span class="pre">with</span> <span class="pre">$your_answer$</span> <span class="pre">being</span> <span class="pre">a</span> <span class="pre">properly</span> <span class="pre">formatted</span> <span class="pre">json</span> <span class="pre">that</span> <span class="pre">is</span> <span class="pre">valid</span> <span class="pre">against</span> <span class="pre">this</span> <span class="pre">JSON</span> <span class="pre">schema:'</span></em><a class="headerlink" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.JSON_CONSTRAINED_GENERATION_PROMPT" title="Permalink to this definition">#</a></dt>
<dd><p>Additional prompt that is appended to the prompt to ask the LLM to generate a json that respects a particular JSON Schema</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.promptexecutionstep.PromptExecutionStep.OUTPUT">
<span class="sig-name descname"><span class="pre">OUTPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'output'</span></em><a class="headerlink" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the output generated by the LLM.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.promptexecutionstep.PromptExecutionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.promptexecutionstep.PromptExecutionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="templaterenderingstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.templaterenderingstep.TemplateRenderingStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.templaterenderingstep.</span></span><span class="sig-name descname"><span class="pre">TemplateRenderingStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to render a template given some inputs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the <code class="docutils literal notranslate"><span class="pre">template</span></code>, with one input descriptor per variable in the template,
trying to detect the type of the variable based on how it is used in the template.
See below for concrete examples on how descriptors are extracted from text prompts.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has one output descriptor, <code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep.OUTPUT</span></code>, of type <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, that
is the text rendered by the step.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – jinja template to format. Any jinja variable appearing in this template will be a required input of
this step. See the example section for concrete examples with WayFlow, or check the reference of
jinja2 at <a class="reference external" href="https://jinja.palletsprojects.com/en/stable/templates">https://jinja.palletsprojects.com/en/stable/templates</a>.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>We provide here some basic examples to work with templates in WayFlow. Any wayflowcore step that takes
jinja2 templates will automatically detect jinja2 variables and add them as the step inputs.</p>
<p><strong>1) Simple variable in a template</strong></p>
<p>To add a variable to a template, you just need to wrap its named between double brackets:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">TemplateRenderingStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TemplateRenderingStep</span><span class="o">.</span><span class="n">format_template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;What is the capital of {{country}}?&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;Switzerland&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&#39;What is the capital of Switzerland?&#39;</span>
</pre></div>
</div>
<p>With simple brackets, the variable will be of type string. The variable will be a required
input of the step.</p>
<p><strong>2) More complex variable in a template</strong></p>
<p>In many cases, we want to format list of objects inside a template. To do this, we can use the for loop syntax
of jinja2:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TemplateRenderingStep</span><span class="o">.</span><span class="n">format_template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;What is the largest capital between &quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;{</span><span class="si">% f</span><span class="s2">or country in countries %}&quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;{{country}}{{ &#39; and &#39; if not loop.last }}&quot;</span>
<span class="gp">... </span>        <span class="s2">&quot;{</span><span class="si">% e</span><span class="s2">ndfor %}?&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;countries&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Switzerland&#39;</span><span class="p">,</span> <span class="s1">&#39;France&#39;</span><span class="p">]},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&#39;What is the largest capital between Switzerland and France?&#39;</span>
</pre></div>
</div>
<p>Here, the detected variable will be <cite>countries</cite> and its type will be any. You can also loop with list of dicts
or objects (see more at <a class="reference external" href="https://jinja.palletsprojects.com/en/stable/templates/#for">https://jinja.palletsprojects.com/en/stable/templates/#for</a>).
The variable will be a required input of the step.</p>
<p><strong>3) Optional variables in a template</strong></p>
<p>Sometimes, you might want to change the template depending on whether a value exist or not (for example,
to include feedback when you generate with an LLM, but you don’t have any feedback at first). In this case,
you can use the if jinja syntax as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TemplateRenderingStep</span><span class="o">.</span><span class="n">format_template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;{</span><span class="si">% i</span><span class="s2">f visited %}Welcome back{</span><span class="si">% e</span><span class="s2">lse %}Welcome{</span><span class="si">% e</span><span class="s2">ndif %}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;visited&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&#39;Welcome&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TemplateRenderingStep</span><span class="o">.</span><span class="n">format_template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;{</span><span class="si">% i</span><span class="s2">f visited %}Welcome back{</span><span class="si">% e</span><span class="s2">lse %}Welcome{</span><span class="si">% e</span><span class="s2">ndif %}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;visited&#39;</span><span class="p">:</span> <span class="s1">&#39;something&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&#39;Welcome back&#39;</span>
</pre></div>
</div>
<p>In this case, the detected variable is of type any and optional and will default to None
if needed in the step.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.OUTPUT">
<span class="sig-name descname"><span class="pre">OUTPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'output'</span></em><a class="headerlink" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the rendered template.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.format_template">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.format_template" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – </p></li>
<li><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="toolexecutionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.toolexecutionstep.</span></span><span class="sig-name descname"><span class="pre">ToolExecutionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to execute a WayFlow tool. This step does not require the use of LLMs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input descriptors will be inferred from
the arguments of the tool, with one input descriptor per argument.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, this step will have the same output descriptors
as the tool. By default, if the tool has a single output, the name will be <code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.TOOL_OUTPUT</span></code>,
of the same type as the return type of the tool, which represents the result returned by the tool.</p>
<p>If you provide a list of output descriptors, each descriptor passed will override the automatically
detected one, in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tool</strong> (<em>Tool</em>) – The tool to be executed.</p></li>
<li><p><strong>raise_exceptions</strong> (<em>bool</em>) – Whether to raise or not exceptions raised by the tool. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, it will put the error message as the result
of the tool if the tool output type is string.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolExecutionStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerTool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">FloatProperty</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_root_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;compute_square_root&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Computes the square root of a number&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number to use&quot;</span><span class="p">)],</span>
<span class="gp">... </span>    <span class="n">func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">FloatProperty</span><span class="p">()]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">ToolExecutionStep</span><span class="p">(</span><span class="n">tool</span><span class="o">=</span><span class="n">square_root_tool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mf">123456789.0</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">)</span>
<span class="go">{&#39;tool_output&#39;: 11111.111060555555}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep.TOOL_OUTPUT">
<span class="sig-name descname"><span class="pre">TOOL_OUTPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'tool_output'</span></em><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.TOOL_OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the result obtained from executing the tool.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep.TOOL_REQUEST_UUID">
<span class="sig-name descname"><span class="pre">TOOL_REQUEST_UUID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'tool_request_uuid'</span></em><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.TOOL_REQUEST_UUID" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for uuid of the tool request (useful when using <code class="docutils literal notranslate"><span class="pre">ClientTool</span></code>)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step might yield back to the user.
Might be the step directly, or one of the steps it calls.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.toolexecutionstep.ToolExecutionStep.supports_dict_io_with_non_str_keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports_dict_io_with_non_str_keys</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.supports_dict_io_with_non_str_keys" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step can accept/return dictionaries with
keys that are not strings as IO.</p>
</dd></dl>

</dd></dl>

<span class="target" id="extractvaluefromjsonstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.</span></span><span class="sig-name descname"><span class="pre">ExtractValueFromJsonStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to extract information from a raw json text. It will first remove any <code class="docutils literal notranslate"><span class="pre">```</span></code> or <code class="docutils literal notranslate"><span class="pre">```json</span></code> delimiters, then load the json,
and outputs all extracted values for which a jq expression was given.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has a single input descriptor:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ExtractValueFromJsonStep.TEXT</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, text to extract the values from.</p></li>
</ul>
<p><strong>Output descriptors</strong></p>
<p>This step can have several output descriptors, one per key in the <code class="docutils literal notranslate"><span class="pre">output_values</span></code> mapping. The type will be <code class="docutils literal notranslate"><span class="pre">AnyProperty()</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_values</strong> (<em>Dict</em><em>[</em><em>str</em><em> | </em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>, </em><em>str</em><em>]</em>) – The keys are either output names of this step or complete <code class="docutils literal notranslate"><span class="pre">Property</span></code>. The values are the jq formulas to extract them from the json detected</p></li>
<li><p><strong>llm</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><em>LlmModel</em></a><em> | </em><em>None</em>) – LLM to correct the json with. By default, no LLM-based correction is applied.</p></li>
<li><p><strong>retry</strong> (<em>bool</em>) – If true, and there was a problem parsing the json, this step will try again to fix it. Defaults to False.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExtractValueFromJsonStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
</pre></div>
</div>
<p>To match some part of the llm output, you might use some regex like:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">ExtractValueFromJsonStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">output_values</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;thought&#39;</span><span class="p">:</span> <span class="s1">&#39;.thought&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;.action.function_name&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">ExtractValueFromJsonStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="s1">&#39;{&quot;thought&quot;:&quot;I should call a tool&quot;, &quot;action&quot;: {&quot;function_name&quot;:&quot;some_tool&quot;, &quot;function_args&quot;: </span><span class="si">{}</span><span class="s1">}}&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;some_tool&quot;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="s1">&#39;thought&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;I should call a tool&quot;</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.TEXT">
<span class="sig-name descname"><span class="pre">TEXT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'text'</span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.TEXT" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the raw json text to be parsed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="regexextractionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.textextractionstep.regexextractionstep.</span></span><span class="sig-name descname"><span class="pre">RegexExtractionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regex_pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_first_match_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to extract information from a raw text using a regular expression (regex). The step returns the first matched text in the regex.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has a single input descriptor:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.TEXT</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, text on which to use the regex pattern</p></li>
</ul>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.OUTPUT</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code> / <code class="docutils literal notranslate"><span class="pre">ListProperty(StringProperty())</span></code>, the matched text / list of texts if <code class="docutils literal notranslate"><span class="pre">return_first_match_only</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>regex_pattern</strong> (<em>str</em><em> | </em><a class="reference internal" href="prompttemplate.html#wayflowcore.outputparser.RegexPattern" title="wayflowcore.outputparser.RegexPattern"><em>RegexPattern</em></a>) – Regex pattern to match the output(s).</p></li>
<li><p><strong>return_first_match_only</strong> (<em>bool</em>) – Whether to return a single match (if several matches are found) or all the matches as a list.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">RegexExtractionStep</span>
</pre></div>
</div>
<p>To match some part of the llm output, you might use some regex like:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">RegexExtractionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;Thought: (.*)\nAction:&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span> 
</pre></div>
</div>
<p>to extract from a Thought: … Action: … REACT pattern. It will return only the first match.</p>
<p>To match all emails present in the text, use for example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">RegexExtractionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;\b\w+@\w+\.\w+&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">return_first_match_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span> 
</pre></div>
</div>
<p>and it will return a list of all emails matched in the text.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.OUTPUT">
<span class="sig-name descname"><span class="pre">OUTPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'output'</span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the result from the regex parsing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.TEXT">
<span class="sig-name descname"><span class="pre">TEXT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'text'</span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.TEXT" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the raw text to be parsed with regex.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<section id="datastore-tasks">
<span id="datastoresteps"></span><h3>Datastore tasks<a class="headerlink" href="#datastore-tasks" title="Permalink to this heading">#</a></h3>
<div class="admonition-on-the-transactional-consistency-of-datastore-tasks admonition">
<p class="admonition-title">On the transactional consistency of datastore tasks</p>
<p>When executing Datastore tasks in a flow, each step will execute one
atomic operation on the datastore (that is, one transaction in
database-backed datastores). Therefore, rolling-back a sequence of
operations in case one or more steps fail during execution is not
supported. Please keep this in mind when designing flows using these
steps.</p>
</div>
<span class="target" id="datastoreliststep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreListStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.datastoresteps.</span></span><span class="sig-name descname"><span class="pre">DatastoreListStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datastore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">where</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack_single_entity_from_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreListStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that can list entities in a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>.</p>
<p>Initialize a new <code class="docutils literal notranslate"><span class="pre">DatastoreListStep</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values
the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, this step has no input descriptor.
However, the <code class="docutils literal notranslate"><span class="pre">collection_name</span></code> and keys and values in the <code class="docutils literal notranslate"><span class="pre">where</span></code>
dictionary can be parametrized with jinja-style variables.
By default, the inferred input descriptors will be of type string,
but this can be overriden with the <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> parameter.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor: <code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.ENTITIES</span></code>,
a list of dictionaries representing the retrieved entities.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore</strong> (<a class="reference internal" href="datastores.html#wayflowcore.datastore.Datastore" title="wayflowcore.datastore.datastore.Datastore"><em>Datastore</em></a>) – Datastore this step operates on</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) – Collection in the datastore manipulated by this step. Can be
parametrized using jinja variables, and the resulting input
descriptors will be inferred by the step.</p></li>
<li><p><strong>where</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filtering to be applied when retrieving entities. The dictionary
is composed of property name and value pairs to filter by
with exact matches. Only entities matching all conditions in
the dictionary will be retrieved. For example, <cite>{“name”: “Fido”,
“breed”: “Golden Retriever”}</cite> will match all <code class="docutils literal notranslate"><span class="pre">Golden</span> <span class="pre">Retriever</span></code>
dogs named <code class="docutils literal notranslate"><span class="pre">Fido</span></code>.</p></li>
<li><p><strong>limit</strong> (<em>int</em><em> | </em><em>None</em>) – Maximum number of entities to list. By default retrieves all entities.</p></li>
<li><p><strong>unpack_single_entity_from_list</strong> (<em>bool</em><em> | </em><em>None</em>) – When limit is set to <cite>1</cite>, one may optionally decide to unpack
the single entity in the list and only return a the
dictionary representing the retrieved entity. This can be
usefule when, e.g., reading a single entity by its ID.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore.inmemory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryDatastore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">IntegerProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.datastoresteps</span><span class="w"> </span><span class="kn">import</span> <span class="n">DatastoreListStep</span>
</pre></div>
</div>
<p>To use this step, you need first need to create a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>. Here, we populate it with dummy data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">properties</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">IntegerProperty</span><span class="p">(),</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="s2">&quot;Empty...&quot;</span><span class="p">)</span> <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span> <span class="o">=</span> <span class="n">InMemoryDatastore</span><span class="p">({</span><span class="s2">&quot;documents&quot;</span><span class="p">:</span> <span class="n">document</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dummy_data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;The rat the cat the dog bit chased escaped.&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;More people have been to Russia than I have.&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span> <span class="n">dummy_data</span><span class="p">)</span>
<span class="go">[{&#39;content&#39;: &#39;The rat the cat the dog bit chased escaped.&#39;, &#39;id&#39;: 2}, {&#39;content&#39;: &#39;More people have been to Russia than I have.&#39;, &#39;id&#39;: 3}]</span>
</pre></div>
</div>
<p>Now you can use this <code class="docutils literal notranslate"><span class="pre">Datastore</span></code> in a <code class="docutils literal notranslate"><span class="pre">DatastoreListStep</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_list_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">DatastoreListStep</span><span class="p">(</span><span class="n">datastore</span><span class="p">,</span> <span class="s2">&quot;documents&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_list_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;entities&#39;: [{&#39;content&#39;: &#39;The rat the cat the dog bit chased escaped.&#39;, &#39;id&#39;: 2}, {&#39;content&#39;: &#39;More people have been to Russia than I have.&#39;, &#39;id&#39;: 3}]}</span>
</pre></div>
</div>
<p>You can parametrize inputs to the step if required; this is done via variable templating.
Other configurations allow you to control the size and type of the output. Note that by
default, all variables you define here are assumed to be of type string; specify the exact
type you need via the <cite>input_descriptors</cite> parameter:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_list_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">DatastoreListStep</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">datastore</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">collection_name</span><span class="o">=</span><span class="s2">&quot;{{entity_to_list}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">where</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{target_id}}&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">unpack_single_entity_from_list</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">IntegerProperty</span><span class="p">(</span><span class="s2">&quot;target_id&quot;</span><span class="p">)]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_list_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">({</span><span class="s2">&quot;entity_to_list&quot;</span><span class="p">:</span> <span class="s2">&quot;documents&quot;</span><span class="p">,</span> <span class="s2">&quot;target_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;entities&#39;: {&#39;content&#39;: &#39;The rat the cat the dog bit chased escaped.&#39;, &#39;id&#39;: 2}}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreListStep.ENTITIES">
<span class="sig-name descname"><span class="pre">ENTITIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'entities'</span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreListStep.ENTITIES" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the entities listed by this step.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreListStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreListStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreListStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreListStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="datastorecreatestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreCreateStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.datastoresteps.</span></span><span class="sig-name descname"><span class="pre">DatastoreCreateStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datastore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that can create a new entity in a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>.</p>
<p>Initialize a new <code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values
the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, this step has a single input descriptor, the new
entity object to be created (<code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.ENTITY</span></code>).
Additionally, the <code class="docutils literal notranslate"><span class="pre">collection_name</span></code> parameter may contain
jinja-style variables that can be used to dynamically configure
which entity is being created by the step.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor: <code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.CREATED_ENTITY</span></code>,
a dictionary representing the newly created entity</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore</strong> (<a class="reference internal" href="datastores.html#wayflowcore.datastore.Datastore" title="wayflowcore.datastore.datastore.Datastore"><em>Datastore</em></a>) – Datastore this step operates on</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) – Collection in the datastore manipulated by this step. Can be
parametrized using jinja variables, and the resulting input
descriptors will be inferred by the step.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore.inmemory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryDatastore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">IntegerProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.datastoresteps</span><span class="w"> </span><span class="kn">import</span> <span class="n">DatastoreCreateStep</span>
</pre></div>
</div>
<p>To use this step, you need first need to create a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">properties</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">IntegerProperty</span><span class="p">(),</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="s2">&quot;Empty...&quot;</span><span class="p">)</span> <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span> <span class="o">=</span> <span class="n">InMemoryDatastore</span><span class="p">({</span><span class="s2">&quot;documents&quot;</span><span class="p">:</span> <span class="n">document</span><span class="p">})</span>
</pre></div>
</div>
<p>Now you can use this <code class="docutils literal notranslate"><span class="pre">Datastore</span></code> in a <code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_create_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">DatastoreCreateStep</span><span class="p">(</span><span class="n">datastore</span><span class="p">,</span> <span class="s2">&quot;documents&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_create_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">({</span><span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;The rat the cat the dog bit chased escaped.&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
<p>Since not all properties of documents are required, we can let the Datastore fill in the rest:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_create_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">DatastoreCreateStep</span><span class="p">(</span><span class="n">datastore</span><span class="p">,</span> <span class="s2">&quot;documents&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_create_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">({</span><span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
<p>You can then finally verify that the entities were indeed created:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s2">&quot;documents&quot;</span><span class="p">)</span>
<span class="go">[{&#39;content&#39;: &#39;The rat the cat the dog bit chased escaped.&#39;, &#39;id&#39;: 0}, {&#39;content&#39;: &#39;Empty...&#39;, &#39;id&#39;: 1}]</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreCreateStep.CREATED_ENTITY">
<span class="sig-name descname"><span class="pre">CREATED_ENTITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'created_entity'</span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.CREATED_ENTITY" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the newly created entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreCreateStep.ENTITY">
<span class="sig-name descname"><span class="pre">ENTITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'entity'</span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.ENTITY" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the entity to be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreCreateStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreCreateStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="datastoreupdatestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreUpdateStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.datastoresteps.</span></span><span class="sig-name descname"><span class="pre">DatastoreUpdateStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datastore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that can update entities in a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>.</p>
<p>Initialize a new <code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values
the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, this step has a single input descriptor, the
dictionary of updates to be made to the entities
(<code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep.UPDATE</span></code>).
Additionally, the <code class="docutils literal notranslate"><span class="pre">collection_name</span></code> and keys and values in the <code class="docutils literal notranslate"><span class="pre">where</span></code>
dictionary can be parametrized with jinja-style variables.
Use this construct sparingly, as there is no special validation
performed on update.
By default, the inferred input descriptors will be of type string,
but this can be overriden with the <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> parameter.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor: <code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.ENTITIES</span></code>,
a list of dictionaries representing the newly updated entities.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore</strong> (<a class="reference internal" href="datastores.html#wayflowcore.datastore.Datastore" title="wayflowcore.datastore.datastore.Datastore"><em>Datastore</em></a>) – Datastore this step operates on</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) – Collection in the datastore manipulated by this step. Can be
parametrized using jinja variables, and the resulting input
descriptors will be inferred by the step.</p></li>
<li><p><strong>where</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Filtering to be applied when updating entities. The dictionary
is composed of property name and value pairs to filter by
with exact matches. Only entities matching all conditions in
the dictionary will be updated. For example, <cite>{“name”: “Fido”,
“breed”: “Golden Retriever”}</cite> will match all <code class="docutils literal notranslate"><span class="pre">Golden</span> <span class="pre">Retriever</span></code>
dogs with name <code class="docutils literal notranslate"><span class="pre">Fido</span></code>.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore.inmemory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryDatastore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">IntegerProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.datastoresteps</span><span class="w"> </span><span class="kn">import</span> <span class="n">DatastoreUpdateStep</span>
</pre></div>
</div>
<p>To use this step, you need first need to create a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>. Here, we populate it with dummy data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">properties</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">IntegerProperty</span><span class="p">(),</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="s2">&quot;Empty...&quot;</span><span class="p">)</span> <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span> <span class="o">=</span> <span class="n">InMemoryDatastore</span><span class="p">({</span><span class="s2">&quot;documents&quot;</span><span class="p">:</span> <span class="n">document</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dummy_data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;The rat the cat the dog bit chased escaped.&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;More people have been to Russia than I have.&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span> <span class="n">dummy_data</span><span class="p">)</span>
<span class="go">[{&#39;content&#39;: &#39;The rat the cat the dog bit chased escaped.&#39;, &#39;id&#39;: 2}, {&#39;content&#39;: &#39;More people have been to Russia than I have.&#39;, &#39;id&#39;: 3}]</span>
</pre></div>
</div>
<p>Now you can use this <code class="docutils literal notranslate"><span class="pre">Datastore</span></code> in a <code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_update_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">DatastoreUpdateStep</span><span class="p">(</span><span class="n">datastore</span><span class="p">,</span> <span class="s2">&quot;documents&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_update_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">({</span><span class="s2">&quot;update&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;A brand new sentence&quot;</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
<p>The output of this step will provide all the entities that were updated during the execution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;entities&#39;: [{&#39;content&#39;: &#39;A brand new sentence&#39;, &#39;id&#39;: 2}]}</span>
</pre></div>
</div>
<p>You can parametrize inputs to the step if required; this is done via variable templating.
Note that by default, all variables you define here are assumed to be of type string; specify
the exact type you need via the <cite>input_descriptors</cite> parameter:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_update_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">DatastoreUpdateStep</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">datastore</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">collection_name</span><span class="o">=</span><span class="s2">&quot;{{entity_to_list}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">where</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{target_id}}&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">IntegerProperty</span><span class="p">(</span><span class="s2">&quot;target_id&quot;</span><span class="p">)]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_update_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s2">&quot;entity_to_list&quot;</span><span class="p">:</span> <span class="s2">&quot;documents&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;target_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;update&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Yet another content&quot;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;entities&#39;: [{&#39;content&#39;: &#39;Yet another content&#39;, &#39;id&#39;: 2}]}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreUpdateStep.ENTITIES">
<span class="sig-name descname"><span class="pre">ENTITIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'entities'</span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.ENTITIES" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the entities listed by this step.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreUpdateStep.UPDATE">
<span class="sig-name descname"><span class="pre">UPDATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'update'</span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.UPDATE" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the dictionary of the updates to be made.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreUpdateStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreUpdateStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="datastoredeletestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreDeleteStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.datastoresteps.</span></span><span class="sig-name descname"><span class="pre">DatastoreDeleteStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datastore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreDeleteStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that can delete entities in a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>.</p>
<p>Initialize a new <code class="docutils literal notranslate"><span class="pre">DatastoreDeleteStep</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values
the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, this step has no input descriptor.
However, the <code class="docutils literal notranslate"><span class="pre">collection_name</span></code> and keys and values in the <code class="docutils literal notranslate"><span class="pre">where</span></code>
dictionary can be parametrized with jinja-style variables.
Use this construct sparingly, as there is no special validation
performed on delete. By default, the inferred input descriptors
will be of type string, but this can be overriden with the
<code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> parameter.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has no output descriptors.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore</strong> (<a class="reference internal" href="datastores.html#wayflowcore.datastore.Datastore" title="wayflowcore.datastore.datastore.Datastore"><em>Datastore</em></a>) – Datastore this step operates on</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) – Collection in the datastore manipulated by this step. Can be
parametrized using jinja variables, and the resulting input
descriptors will be inferred by the step.</p></li>
<li><p><strong>where</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Filtering to be applied when deleting entities. The dictionary
is composed of property name and value pairs to filter by
with exact matches. Only entities matching all conditions in
the dictionary will be deleted. For example, <cite>{“name”: “Fido”,
“breed”: “Golden Retriever”}</cite> will match all <code class="docutils literal notranslate"><span class="pre">Golden</span> <span class="pre">Retriever</span></code>
dogs named <code class="docutils literal notranslate"><span class="pre">Fido</span></code>.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore.inmemory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryDatastore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">IntegerProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.datastoresteps</span><span class="w"> </span><span class="kn">import</span> <span class="n">DatastoreDeleteStep</span>
</pre></div>
</div>
<p>To use this step, you need first need to create a <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>. Here, we populate it with dummy data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">properties</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">IntegerProperty</span><span class="p">(),</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="s2">&quot;Empty...&quot;</span><span class="p">)</span> <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span> <span class="o">=</span> <span class="n">InMemoryDatastore</span><span class="p">({</span><span class="s2">&quot;documents&quot;</span><span class="p">:</span> <span class="n">document</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dummy_data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;The rat the cat the dog bit chased escaped.&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;More people have been to Russia than I have.&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span> <span class="n">dummy_data</span><span class="p">)</span>
<span class="go">[{&#39;content&#39;: &#39;The rat the cat the dog bit chased escaped.&#39;, &#39;id&#39;: 2}, {&#39;content&#39;: &#39;More people have been to Russia than I have.&#39;, &#39;id&#39;: 3}]</span>
</pre></div>
</div>
<p>Now you can use this <code class="docutils literal notranslate"><span class="pre">Datastore</span></code> in a <code class="docutils literal notranslate"><span class="pre">DatastoreDeleteStep</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_delete_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">DatastoreDeleteStep</span><span class="p">(</span><span class="n">datastore</span><span class="p">,</span> <span class="s2">&quot;documents&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_delete_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
<p>You can then verify that the entity was indeed deleted:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s2">&quot;documents&quot;</span><span class="p">)</span>
<span class="go">[{&#39;content&#39;: &#39;More people have been to Russia than I have.&#39;, &#39;id&#39;: 3}]</span>
</pre></div>
</div>
<p>You can parametrize inputs to the step if required; this is done via variable templating.
Note that by default, all variables you define here are assumed to be of type string; specify
the exact type you need via the <cite>input_descriptors</cite> parameter:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_delete_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">DatastoreDeleteStep</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">datastore</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">collection_name</span><span class="o">=</span><span class="s2">&quot;{{entity_to_list}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">where</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{target_id}}&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">IntegerProperty</span><span class="p">(</span><span class="s2">&quot;target_id&quot;</span><span class="p">)]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_delete_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;entity_to_list&quot;</span><span class="p">:</span> <span class="s2">&quot;documents&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;target_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s2">&quot;documents&quot;</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreDeleteStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreDeleteStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreDeleteStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreDeleteStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="datastorequerystep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreQueryStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.datastoresteps.</span></span><span class="sig-name descname"><span class="pre">DatastoreQueryStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datastore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to execute a parameterized SQL query on a relational <code class="docutils literal notranslate"><span class="pre">Datastore</span></code>
(<code class="docutils literal notranslate"><span class="pre">OracleDatabaseDatastore</span></code>), that supports SQL queries (the specific
SQL dialect depends on the database backing the datastore).</p>
<p>This step enables safe, flexible querying of datastores using
parameterized SQL.  Queries must use bind variables (e.g., <cite>:customer_id</cite>).
String templating within queries is forbidden for security reasons;
any such usage raises an error.</p>
<p>Initialize a new <code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values
the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, this step has a single input descriptor.
<code class="docutils literal notranslate"><span class="pre">bind_variables</span></code> is a dictionary mapping variable names in the
SQL query to their value at execution time.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor: <code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep.RESULT</span></code>,
the query result rows, with each row represented as a dictionary
mapping column names to their values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While the input descriptor maps the bound variable name to a
type AnyProperty to offer maximum flexibility, runtime
validation will be performed to assess if the provided values
are valid bind variables, and whether they match the expected
type in the query.
You may override the default input descriptor to specialize
it to the bind variables in your query, to benefit from
additional static validation (see example below).</p>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore</strong> (<em>RelationalDatastore</em>) – The <code class="docutils literal notranslate"><span class="pre">Datastore</span></code> to execute the query against.</p></li>
<li><p><strong>query</strong> (<em>str</em>) – <p>SQL query string using bind variables (e.g., <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">table</span> <span class="pre">WHERE</span> <span class="pre">id</span> <span class="pre">=</span> <span class="pre">:val</span></code>).
String templating/interpolation is forbidden and will raise an exception.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The provided query will be executed with the session user’s privileges
(the user configured in the datastore’s connection config). SQL queries should be
desiged carefully, to ensure their correctness prior to exeuction.</p>
</div>
</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input
descriptors automatically.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically
using its static configuration in a best effort manner.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in
the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in
the conversation input/output dictionary.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Bind variable values are passed in the input as a dictionary with key “bind_variables”.</p></li>
<li><p>Output is always a list of dictionaries (row-oriented).</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore</span><span class="w"> </span><span class="kn">import</span> <span class="n">OracleDatabaseDatastore</span><span class="p">,</span> <span class="n">MTlsOracleDatabaseConnectionConfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.datastoresteps</span><span class="w"> </span><span class="kn">import</span> <span class="n">DatastoreQueryStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.datastore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">FloatProperty</span><span class="p">,</span> <span class="n">ObjectProperty</span><span class="p">,</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">IntegerProperty</span>
</pre></div>
</div>
<p>We start by defining the entity of interest in the datastore. We assume here that an employees table
already exists in the target database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">employees</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="n">IntegerProperty</span><span class="p">(),</span>
<span class="gp">... </span>        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(),</span>
<span class="gp">... </span>        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(),</span>
<span class="gp">... </span>        <span class="s2">&quot;department_name&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(),</span>
<span class="gp">... </span>        <span class="s2">&quot;department_area&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">(),</span>
<span class="gp">... </span>        <span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="mf">0.1</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Next, we can connect to the Oracle Database. For connection configuration options see
<code class="docutils literal notranslate"><span class="pre">OracleDatabaseConnectionConfig</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore</span> <span class="o">=</span> <span class="n">OracleDatabaseDatastore</span><span class="p">({</span><span class="s2">&quot;employees&quot;</span><span class="p">:</span> <span class="n">employees</span><span class="p">},</span> <span class="n">database_connection_config</span><span class="p">)</span>
</pre></div>
</div>
<p>We can create the <code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep</span></code> to execute a query structure that cannot
be modelled, for example, by a <code class="docutils literal notranslate"><span class="pre">DatastoreListStep</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_query_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">DatastoreQueryStep</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">datastore</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;SELECT email, salary FROM employees WHERE department_name = :department OR salary &lt; :salary&quot;</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_query_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">({</span><span class="s2">&quot;bind_variables&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="mi">100000</span><span class="p">,</span> <span class="s2">&quot;department&quot;</span><span class="p">:</span> <span class="s2">&quot;reception&quot;</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">datastore_query_flow</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;result&#39;: [{&#39;email&#39;: &#39;pam@dudemuffin.com&#39;, &#39;salary&#39;: 95000.0}]}</span>
</pre></div>
</div>
<p>To ensure the bind variables will not create any issues at runtime, we may specialize
the default input descriptor to exactly match the types and values of bound variables in
the query:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datastore_query_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">DatastoreQueryStep</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">testing_oracle_data_store_with_data</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;SELECT email, salary FROM employees WHERE department_name = :depname OR salary &lt; :salary&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>            <span class="n">ObjectProperty</span><span class="p">(</span>
<span class="gp">... </span>                <span class="s2">&quot;bind_variables&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>                    <span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(),</span>
<span class="gp">... </span>                    <span class="s2">&quot;depname&quot;</span><span class="p">:</span> <span class="n">StringProperty</span><span class="p">()</span>
<span class="gp">... </span>                <span class="p">}</span>
<span class="gp">... </span>            <span class="p">)</span>
<span class="gp">... </span>        <span class="p">]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Inputs to this step can now be validated before the step is executed:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">datastore_query_flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;bind_variables&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;depname&quot;</span><span class="p">:</span> <span class="s2">&quot;sales&quot;</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">The input passed: `{&#39;salary&#39;: &#39;1&#39;, &#39;depname&#39;: &#39;sales&#39;}` of type `dict` is not of the expected type ...</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreQueryStep.RESULT">
<span class="sig-name descname"><span class="pre">RESULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'result'</span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep.RESULT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the query result (list of dictionaries, one per row).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreQueryStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.datastoresteps.DatastoreQueryStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
</section>
<section id="io-steps">
<h2>IO steps<a class="headerlink" href="#io-steps" title="Permalink to this heading">#</a></h2>
<span class="target" id="inputmessagestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.inputmessagestep.InputMessageStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.inputmessagestep.</span></span><span class="sig-name descname"><span class="pre">InputMessageStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rephrase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.inputmessagestep.InputMessageStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to get an input from the conversation with the user.</p>
<p>The input step prints a message to the user, asks for an answer and returns it as
an output of the step. It places both messages in the messages list so that it is
possible to visualize the conversation, but also returns the user input as an output.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the <code class="docutils literal notranslate"><span class="pre">message_template</span></code>, with one input descriptor per variable in the template,
trying to detect the type of the variable based on how it is used in the template.
See <a class="reference internal" href="#templaterenderingstep"><span class="std std-ref">TemplateRenderingStep</span></a> for concrete examples on how descriptors are
extracted from text prompts.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, this step has one single output descriptor named <code class="docutils literal notranslate"><span class="pre">InputMessageStep.USER_PROVIDED_INPUT</span></code>, of type
<code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, which will be the message generated by the step.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message_template</strong> (<em>str</em><em> | </em><em>None</em>) – The message template to use to ask for more information to the user, in jinja format.
See docstring/documentation of the <code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep</span></code>
for concrete examples of how to work with jinja prompts in WayFlow.
If None, no message is sent to the user.</p></li>
<li><p><strong>rephrase</strong> (<em>bool</em>) – Whether to rephrase the message. Requires <code class="docutils literal notranslate"><span class="pre">llm</span></code> to be set.</p></li>
<li><p><strong>llm</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><em>LlmModel</em></a><em> | </em><em>None</em>) – LLM to use to rephrase the message. Only required if <code class="docutils literal notranslate"><span class="pre">rephrase=True</span></code>.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputMessageStep</span></code></dt><dd><p>Step to output a message to the chat history.</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">InputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">InputMessageStep</span><span class="p">(</span><span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;Please enter a message&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span> <span class="c1"># Yielding back to the user</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span><span class="o">.</span><span class="n">append_user_message</span><span class="p">(</span><span class="s2">&quot;This is a user message.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;user_provided_input&#39;: &#39;This is a user message.&#39;}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.inputmessagestep.InputMessageStep.USER_PROVIDED_INPUT">
<span class="sig-name descname"><span class="pre">USER_PROVIDED_INPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user_provided_input'</span></em><a class="headerlink" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.USER_PROVIDED_INPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the input text provided by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.inputmessagestep.InputMessageStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.inputmessagestep.InputMessageStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates that this step might yield (it always does).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.inputmessagestep.InputMessageStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="outputmessagestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.outputmessagestep.OutputMessageStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.outputmessagestep.</span></span><span class="sig-name descname"><span class="pre">OutputMessageStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'{{</span> <span class="pre">message</span> <span class="pre">}}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">MessageType.AGENT</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rephrase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expose_message_as_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to output a message to the chat history.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the <code class="docutils literal notranslate"><span class="pre">message_template</span></code>, with one input descriptor per variable in the template,
trying to detect the type of the variable based on how it is used in the template.
See <a class="reference internal" href="#templaterenderingstep"><span class="std std-ref">TemplateRenderingStep</span></a> for concrete examples on how descriptors are
extracted from text prompts.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, this step has one single output descriptor named <code class="docutils literal notranslate"><span class="pre">OutputMessageStep.OUTPUT</span></code>, of type
<code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, which will be the message generated by the step.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message_template</strong> (<em>str</em>) – Jinja str prompt template to use to output a message. See docstring/documentation of
the <code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep</span></code> for concrete examples of how to work with jinja prompts
in WayFlow. By default the template is <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">message</span> <span class="pre">}}</span></code>.</p></li>
<li><p><strong>message_type</strong> (<a class="reference internal" href="conversation.html#wayflowcore.messagelist.MessageType" title="wayflowcore.messagelist.MessageType"><em>MessageType</em></a>) – Message type of the message added to the message history.</p></li>
<li><p><strong>rephrase</strong> (<em>bool</em>) – Whether to rephrase the message. Requires <code class="docutils literal notranslate"><span class="pre">llm</span></code> to be set.</p></li>
<li><p><strong>llm</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><em>LlmModel</em></a><em> | </em><em>None</em>) – LLM to use to rephrase the message. Only required if <code class="docutils literal notranslate"><span class="pre">rephrase=True</span></code>.
Whether to rephrase the message. Requires <code class="docutils literal notranslate"><span class="pre">llms</span></code> to be set.</p></li>
<li><p><strong>expose_message_as_output</strong> (<em>bool</em>) – Whether the message generated by this step should appear among the output descriptors</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">InputMessageStep</span></code></dt><dd><p>Step to get an input from the conversation with the user.</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;The user message is `{{user_message}}`&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;user_message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world!&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;output_message&#39;: &#39;The user message is `Hello world!`&#39;}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.outputmessagestep.OutputMessageStep.OUTPUT">
<span class="sig-name descname"><span class="pre">OUTPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'output_message'</span></em><a class="headerlink" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep.OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the output message generated by the <code class="docutils literal notranslate"><span class="pre">OutputMessageStep</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.outputmessagestep.OutputMessageStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.outputmessagestep.OutputMessageStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="getchathistorystep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.getchathistorystep.GetChatHistoryStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.getchathistorystep.</span></span><span class="sig-name descname"><span class="pre">GetChatHistoryStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which_messages=MessageSlice.LAST_MESSAGES</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message_types=(&lt;MessageType.USER:</span> <span class="pre">'USER'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;MessageType.AGENT:</span> <span class="pre">'AGENT'&gt;)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_template=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to get messages from the messages list e.g. last 4 messages and return it as output.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has no input descriptors.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep.CHAT_HISTORY</span></code>: the chat history extract from the conversation, type is either <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code> or <code class="docutils literal notranslate"><span class="pre">ListProperty(item_type=AnyProperty())</span></code> if <code class="docutils literal notranslate"><span class="pre">output_template</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<em>int</em>) – Number of messages to retrieve.</p></li>
<li><p><strong>which_messages</strong> (<em>MessageSlice</em>) – Strategy for which messages to collect. Either <code class="docutils literal notranslate"><span class="pre">last_messages</span></code> or <code class="docutils literal notranslate"><span class="pre">first_messages</span></code>.</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – Number of messages to ignore in the given order. Needs to be a non-negative integer.</p></li>
<li><p><strong>message_types</strong> (<em>Tuple</em><em>[</em><a class="reference internal" href="conversation.html#wayflowcore.messagelist.MessageType" title="wayflowcore.messagelist.MessageType"><em>MessageType</em></a><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – Optional filter to select specific messages. <code class="docutils literal notranslate"><span class="pre">None</span></code> means take all the messages from the history.</p></li>
<li><p><strong>output_template</strong> (<em>str</em><em> | </em><em>None</em>) – Template to format the chat history. If None, this step will return the list of messages. If string,
it will format the <code class="docutils literal notranslate"><span class="pre">chat_history</span></code> messages into this template using jinja2 syntax.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>This step can be used to format the conversation into a string that can be used in a prompt.
For example, if the conversation is:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.messagelist</span><span class="w"> </span><span class="kn">import</span> <span class="n">Message</span><span class="p">,</span> <span class="n">MessageType</span><span class="p">,</span> <span class="n">MessageList</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">GetChatHistoryStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">Message</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s1">&#39;How can I help you?&#39;</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">MessageType</span><span class="o">.</span><span class="n">AGENT</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Message</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s1">&#39;What is the capital of Switzerland?&#39;</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">MessageType</span><span class="o">.</span><span class="n">AGENT</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Message</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s1">&#39;The capital of Switzerland is Bern?&#39;</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">MessageType</span><span class="o">.</span><span class="n">AGENT</span><span class="p">),</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<p>If we want to format the chat history into a string directly in the step:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">GetChatHistoryStep</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{},</span> <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="n">GetChatHistoryStep</span><span class="o">.</span><span class="n">CHAT_HISTORY</span><span class="p">]</span>  
<span class="go">AGENT&gt;&gt;&gt;How can I help you?</span>
<span class="go">USER&gt;&gt;&gt;What is the capital of Switzerland?</span>
<span class="go">AGENT&gt;&gt;&gt;The capital of Switzerland is Bern?</span>
</pre></div>
</div>
<p>If we want to use the chat history in a later step (<code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> for example), we can set the template
of the <code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep</span></code> to None and use the object returned by this step in a later template, similarly to
how it’s used in the default <code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep</span></code> template.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptExecutionStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">GetChatHistoryStep</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">output_template</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_execution_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s1">&#39;{</span><span class="si">% f</span><span class="s1">or m in chat_history -%}&gt;&gt;&gt;{{m.content}}{</span><span class="si">% e</span><span class="s1">ndfor %}&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;chat_history&#39;</span><span class="p">:</span> <span class="n">GetChatHistoryStep</span><span class="o">.</span><span class="n">CHAT_HISTORY</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.getchathistorystep.GetChatHistoryStep.CHAT_HISTORY">
<span class="sig-name descname"><span class="pre">CHAT_HISTORY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'chat_history'</span></em><a class="headerlink" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.CHAT_HISTORY" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the chat history collected by the <code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.getchathistorystep.GetChatHistoryStep.DEFAULT_OUTPUT_TEMPLATE">
<span class="sig-name descname"><span class="pre">DEFAULT_OUTPUT_TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'{%</span> <span class="pre">for</span> <span class="pre">m</span> <span class="pre">in</span> <span class="pre">chat_history</span> <span class="pre">-%}\n{{m.message_type.value}}</span> <span class="pre">&gt;&gt;</span> <span class="pre">{{m.content}}{{</span> <span class="pre">&quot;\n&quot;</span> <span class="pre">if</span> <span class="pre">not</span> <span class="pre">loop.last</span> <span class="pre">}}\n{%-</span> <span class="pre">endfor</span> <span class="pre">%}'</span></em><a class="headerlink" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.DEFAULT_OUTPUT_TEMPLATE" title="Permalink to this definition">#</a></dt>
<dd><p>Default output template to be used to format the chat history.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.getchathistorystep.GetChatHistoryStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.getchathistorystep.GetChatHistoryStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="variablereadstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.variablesteps.variablereadstep.</span></span><span class="sig-name descname"><span class="pre">VariableReadStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to perform a read on a Variable.
This step has no input, and a single output “value”.
These variables are stored in a key-value store distinct from the I/O system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has no input descriptor.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has a single output descriptor:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VariableReadStep.VALUE</span></code>: <code class="docutils literal notranslate"><span class="pre">variable</span> <span class="pre">type</span></code>, the value read from the variable store.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference internal" href="variables.html#wayflowcore.variable.Variable" title="wayflowcore.variable.Variable"><em>Variable</em></a>) – <code class="docutils literal notranslate"><span class="pre">Variable</span></code> to read from.
If the variable refers to a non-existent <code class="docutils literal notranslate"><span class="pre">Variable</span></code> (not passed into the flow), the flow constructor will throw an error.
An exception is raised if the read returns a <code class="docutils literal notranslate"><span class="pre">None</span></code> value.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">VariableReadStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.variable</span><span class="w"> </span><span class="kn">import</span> <span class="n">Variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">ListProperty</span><span class="p">,</span> <span class="n">FloatProperty</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">float_variable</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;float_variable&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">type</span><span class="o">=</span><span class="n">ListProperty</span><span class="p">(</span><span class="n">item_type</span><span class="o">=</span><span class="n">FloatProperty</span><span class="p">()),</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;list of floats variable&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default_value</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_step</span> <span class="o">=</span> <span class="n">VariableReadStep</span><span class="p">(</span><span class="n">variable</span><span class="o">=</span><span class="n">float_variable</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;The variable is {{ variable }}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">read_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">read_step</span><span class="p">,</span> <span class="n">output_step</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">output_step</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span><span class="n">read_step</span><span class="p">,</span> <span class="n">VariableReadStep</span><span class="o">.</span><span class="n">VALUE</span><span class="p">,</span> <span class="n">output_step</span><span class="p">,</span> <span class="s2">&quot;variable&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="n">float_variable</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">last_message</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">last_message</span><span class="o">.</span><span class="n">content</span>
<span class="go">&#39;The variable is [1.0, 2.0, 3.0, 4.0]&#39;</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.VALUE">
<span class="sig-name descname"><span class="pre">VALUE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'value'</span></em><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.VALUE" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the read value from the <code class="docutils literal notranslate"><span class="pre">VariableReadStep</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="variablewritestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.variablesteps.variablewritestep.</span></span><span class="sig-name descname"><span class="pre">VariableWriteStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">VariableWriteOperation.OVERWRITE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to perform a write on a Variable.
This step has no output and a single input, called “value”.
These variables are stored in a key-value store distinct from the I/O system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has a single input descriptor:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VariableWriteStep.VALUE</span></code>: <code class="docutils literal notranslate"><span class="pre">??</span></code>, the value to write in the variable store. Type will be resolved depending on the variable type and the type of variable write operation.</p></li>
</ul>
<p><strong>Output descriptors</strong></p>
<p>This step has no output descriptor.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference internal" href="variables.html#wayflowcore.variable.Variable" title="wayflowcore.variable.Variable"><em>Variable</em></a>) – <code class="docutils literal notranslate"><span class="pre">Variable</span></code> to write to.
If the variable refers to a non-existent Variable (not passed into the flow), the flow construction will throw an error.</p></li>
<li><p><strong>operation</strong> (<a class="reference internal" href="variables.html#wayflowcore.variable.VariableWriteOperation" title="wayflowcore.variable.VariableWriteOperation"><em>VariableWriteOperation</em></a>) – <p>The type of write operation to perform.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">VariableWriteOperation.OVERWRITE</span></code> (or <code class="docutils literal notranslate"><span class="pre">'overwrite'</span></code>) works on any type of variable to replace its value with the incoming value.
<code class="docutils literal notranslate"><span class="pre">VariableWriteOperation.MERGE</span></code> (or <code class="docutils literal notranslate"><span class="pre">'merge'</span></code>) updates a <code class="docutils literal notranslate"><span class="pre">Variable</span></code> of type dict (resp. list),
so that the variable will contain both the existing data stored in the variable along with the new values in the incoming dict (resp. list).
If the operation is <code class="docutils literal notranslate"><span class="pre">MERGE</span></code> but the variable’s value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, it will throw an error,
as a default value should have been provided when constructing the <code class="docutils literal notranslate"><span class="pre">Variable</span></code>.
The <code class="docutils literal notranslate"><span class="pre">VariableWriteOperation.INSERT</span></code> (or <code class="docutils literal notranslate"><span class="pre">'insert'</span></code>) operation can be used to append a single element at the end of a list.</p>
</div>
</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">VariableWriteStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.variable</span><span class="w"> </span><span class="kn">import</span> <span class="n">Variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">ListProperty</span><span class="p">,</span> <span class="n">FloatProperty</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VARIABLE_IO</span> <span class="o">=</span> <span class="s2">&quot;$variable&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ^ how the variable value is stored in the I/O dict</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">float_variable</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;float_variable&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">type</span><span class="o">=</span><span class="n">ListProperty</span><span class="p">(</span><span class="n">item_type</span><span class="o">=</span><span class="n">FloatProperty</span><span class="p">()),</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;list of floats variable&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default_value</span><span class="o">=</span><span class="p">[],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_step</span> <span class="o">=</span> <span class="n">VariableWriteStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">variable</span><span class="o">=</span><span class="n">float_variable</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">VariableWriteStep</span><span class="o">.</span><span class="n">VALUE</span><span class="p">:</span> <span class="n">VARIABLE_IO</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">write_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">write_step</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="n">float_variable</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">VARIABLE_IO</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_variable_value</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">_get_variable_value</span><span class="p">(</span><span class="n">float_variable</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># In practice, the value can be accessed with a VariableReadStep in the flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_variable_value</span>
<span class="go">[1.0, 2.0, 3.0, 4.0]</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.VALUE">
<span class="sig-name descname"><span class="pre">VALUE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'value'</span></em><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.VALUE" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the value to write for the <code class="docutils literal notranslate"><span class="pre">VariableWriteStep</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="constantvaluesstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.ConstantValuesStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.</span></span><span class="sig-name descname"><span class="pre">ConstantValuesStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constant_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.ConstantValuesStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to provide constant values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Output descriptors</strong></p>
<p>The output descriptors of this step are automatically inferred and
generated based on the values and names provided in the configuration.
The supported types are integer, float, boolean and string.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>constant_values</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Dictionary mapping names to constant values.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConstantValuesStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">ConstantValuesStep</span><span class="p">(</span><span class="n">constant_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;PI&quot;</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span> <span class="s2">&quot;PI_string&quot;</span><span class="p">:</span> <span class="s2">&quot;3.14&quot;</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="s2">&quot;PI&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mf">3.14</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span><span class="p">[</span><span class="s2">&quot;PI_string&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;3.14&quot;</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.ConstantValuesStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.ConstantValuesStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.ConstantValuesStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.ConstantValuesStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="flow-steps">
<h2>Flow steps<a class="headerlink" href="#flow-steps" title="Permalink to this heading">#</a></h2>
<span class="target" id="retrystep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.retrystep.</span></span><span class="sig-name descname"><span class="pre">RetryStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">success_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_trials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that can be used to execute a given <code class="docutils literal notranslate"><span class="pre">Flow</span></code> and retries if a success condition
is not met.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the input descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> that this step will run.
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow inputs are resolved.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the outputs descriptors of this step will be
the same as the outputs descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> that this step will run.
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow outputs are resolved.</p>
<p>It also has two additional descriptors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RetryStep.SUCCESS_VAR</span></code>: <code class="docutils literal notranslate"><span class="pre">BooleanProperty()</span></code>, whether the step succeeded or not.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RetryStep.NUM_RETRIES_VAR</span></code>: <code class="docutils literal notranslate"><span class="pre">IntegerProperty()</span></code>, the number of trials the step used to succeed.</p></li>
</ul>
<p><strong>Branches</strong></p>
<p>This step can have several next steps and perform conditional branching based on how the execution went. It has all the
branches exposed by the <code class="docutils literal notranslate"><span class="pre">flow</span></code> it runs (see <a class="reference internal" href="#flowexecutionstep"><span class="std std-ref">FlowExecutionStep</span></a> to learn more about how flow branches are resolved).</p>
<p>It has an additional branch, named <code class="docutils literal notranslate"><span class="pre">RetryStep.BRANCH_FAILURE</span></code>, that is taken in case the step runs out of <code class="docutils literal notranslate"><span class="pre">max_num_trials</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flow</strong> (<a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>Flow</em></a>) – Flow to be executed inside the <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code>.</p></li>
<li><p><strong>success_condition</strong> (<em>str</em>) – Name of the variable in the flow that defines success. The success is evaluated
with <code class="docutils literal notranslate"><span class="pre">bool(flow_output[success_condition])</span></code></p></li>
<li><p><strong>max_num_trials</strong> (<em>int</em>) – <p>Maximum number of times to retry the flow execution. Defaults to 5.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">max_num_trials</span></code> should not exceed <code class="docutils literal notranslate"><span class="pre">MAX_RETRY</span></code> retries.</p>
</div>
</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExtractValueFromJsonStep</span><span class="p">,</span> <span class="n">PromptExecutionStep</span><span class="p">,</span> <span class="n">RetryStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span><span class="p">,</span> <span class="n">BooleanProperty</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span><span class="o">=</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;Please answer whether the following user query is a relevant HR question.&quot;</span>
<span class="gp">... </span>    <span class="s2">&quot;User query: {{user_query}}&quot;</span>
<span class="gp">... </span>    <span class="s1">&#39;Answer with a json containing: {&quot;in_domain&quot;: &quot;false/true as string&quot;, &quot;reason&quot;: &quot;text explaining why its classified this way&quot;}&#39;</span>
<span class="gp">... </span><span class="p">),</span> <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">PromptExecutionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">ExtractValueFromJsonStep</span><span class="o">.</span><span class="n">TEXT</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_step</span> <span class="o">=</span> <span class="n">ExtractValueFromJsonStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">output_values</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;in_domain&#39;</span><span class="p">:</span> <span class="s1">&#39;.in_domain&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;reason&#39;</span><span class="p">:</span> <span class="s1">&#39;.reason&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">BooleanProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="p">):</span> <span class="s1">&#39; has(&quot;reason&quot;)&#39;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_single_step</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">retry_step</span> <span class="o">=</span> <span class="n">RetryStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="o">.</span><span class="n">from_steps</span><span class="p">([</span><span class="n">prompt_step</span><span class="p">,</span> <span class="n">json_step</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">success_condition</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span><span class="p">,</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">run_single_step</span><span class="p">(</span><span class="n">retry_step</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;user_query&#39;</span><span class="p">:</span> <span class="s1">&#39;how many vacation days to I have left?&#39;</span><span class="p">})</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.BRANCH_FAILURE">
<span class="sig-name descname"><span class="pre">BRANCH_FAILURE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'failure'</span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.BRANCH_FAILURE" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the branch taken in case the condition is still not met after the maximum number of trials</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.MAX_RETRY">
<span class="sig-name descname"><span class="pre">MAX_RETRY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.MAX_RETRY" title="Permalink to this definition">#</a></dt>
<dd><p>Global upper limit on the number of retries for the <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.NUM_RETRIES_VAR">
<span class="sig-name descname"><span class="pre">NUM_RETRIES_VAR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'retry_step_num_retries'</span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.NUM_RETRIES_VAR" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the number of retries the retry step took to succeed or exit.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.SUCCESS_VAR">
<span class="sig-name descname"><span class="pre">SUCCESS_VAR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'retry_step_success'</span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.SUCCESS_VAR" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for whether the retry step succeeded in the end or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates that this step might yield if the subflow might.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.retrystep.RetryStep.sub_flow">
<span class="sig-name descname"><span class="pre">sub_flow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.retrystep.RetryStep.sub_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sub-flow this step implements, if it does.
(e.g. <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code> does execute a sub-flow)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a> | None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="catchexceptionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.catchexceptionstep.</span></span><span class="sig-name descname"><span class="pre">CatchExceptionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">except_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catch_all_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Executes a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> inside a step and catches specific potential exceptions.
If no exception is caught, it will transition to the branches of its subflow.
If an exception is caught, it will transition to some specific exception branch has configured in this step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>The input descriptors of this step are the same as the input descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> that this step will run.
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow inputs are resolved.</p>
<p><strong>Output descriptors</strong></p>
<p>The outputs descriptors of this step are the same as the outputs descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> that this step will run.
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow outputs are resolved.</p>
<p>This step also has two additional output descriptors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.EXCEPTION_NAME_OUTPUT_NAME</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, the name of the caught exception if any.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.EXCEPTION_PAYLOAD_OUTPUT_NAME</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, the payload of the caught exception if any.</p></li>
</ul>
<p><strong>Branches</strong></p>
<p>This step can have several next steps depending on how its execution goes. It has the same
next branches as the <code class="docutils literal notranslate"><span class="pre">flow</span></code> it runs, plus some additional branches:</p>
<ul class="simple">
<li><p>all the values of the <code class="docutils literal notranslate"><span class="pre">except_on</span></code> mapping argument, which is taken if a particular exception is caught</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.DEFAULT_EXCEPTION_BRANCH</span></code> in case <code class="docutils literal notranslate"><span class="pre">catch_all_exceptions</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> and another exception is caught.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flow</strong> (<a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>Flow</em></a>) – <code class="docutils literal notranslate"><span class="pre">Flow</span></code> to execute and catch errors from</p></li>
<li><p><strong>except_on</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – Dictionary mapping error class names to the branch name they should transition to.</p></li>
<li><p><strong>catch_all_exceptions</strong> (<em>bool</em>) – Whether to catch any error or just the ones present in the <code class="docutils literal notranslate"><span class="pre">except_on</span></code> parameter.
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the step will transition to <code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.DEFAULT_EXCEPTION_BRANCH</span></code></p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.DEFAULT_EXCEPTION_BRANCH">
<span class="sig-name descname"><span class="pre">DEFAULT_EXCEPTION_BRANCH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default_exception_branch'</span></em><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.DEFAULT_EXCEPTION_BRANCH" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the branch where the step will transition if <code class="docutils literal notranslate"><span class="pre">catch_all_exceptions</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> and an exception was caught.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.EXCEPTION_NAME_OUTPUT_NAME">
<span class="sig-name descname"><span class="pre">EXCEPTION_NAME_OUTPUT_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'exception_name'</span></em><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.EXCEPTION_NAME_OUTPUT_NAME" title="Permalink to this definition">#</a></dt>
<dd><p>Variable containing the name of the caught exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.EXCEPTION_PAYLOAD_OUTPUT_NAME">
<span class="sig-name descname"><span class="pre">EXCEPTION_PAYLOAD_OUTPUT_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'exception_payload_name'</span></em><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.EXCEPTION_PAYLOAD_OUTPUT_NAME" title="Permalink to this definition">#</a></dt>
<dd><p>Variable containing the exception payload. Does not contain any higher-level stacktrace information than the wayflowcore stacktraces.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step might yield back to the user.
It depends on the sub-flow we are executing</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.catchexceptionstep.CatchExceptionStep.sub_flow">
<span class="sig-name descname"><span class="pre">sub_flow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.sub_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sub-flow this step implements, if it does.
(e.g. <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code> does execute a sub-flow)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="flowexecutionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.flowexecutionstep.FlowExecutionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.flowexecutionstep.</span></span><span class="sig-name descname"><span class="pre">FlowExecutionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Executes a flow inside a step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input_descriptors will be automatically inferred
from the input descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> that this step will run.
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow inputs are resolved.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one.
If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>The outputs descriptors of this step are the same as the outputs descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> that this step will run.
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow outputs are resolved.</p>
<p><strong>Branches</strong></p>
<p>This step can have several next steps and perform conditional branching depending on where the <code class="docutils literal notranslate"><span class="pre">flow</span></code> finishes.
This step will have one branch per name of <code class="docutils literal notranslate"><span class="pre">CompleteStep</span></code> present in the <code class="docutils literal notranslate"><span class="pre">flow</span></code>, plus an additional one named
<code class="docutils literal notranslate"><span class="pre">FlowExecutionStep.NEXT_STEP</span></code> if the inside <code class="docutils literal notranslate"><span class="pre">flow</span></code> contains transitions to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flow</strong> (<a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>Flow</em></a>) – <code class="docutils literal notranslate"><span class="pre">Flow</span></code> that the step needs to execute.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FlowExecutionStep</span></code> is particularly suitable when subflows can be reused inside a wayflowcore project.
Let’s see an example with a flow that estimates numerical value using the “wisdowm of the crowd” effect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span><span class="p">,</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">ListProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">MapStep</span><span class="p">,</span> <span class="n">PromptExecutionStep</span><span class="p">,</span> <span class="n">ToolExecutionStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerTool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">duplication_func</span><span class="p">(</span><span class="n">element</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">element</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">duplication_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;duplication_tool&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">func</span><span class="o">=</span><span class="n">duplication_func</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;array&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">reduce_func</span><span class="p">(</span><span class="n">elements</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="gp">... </span>    <span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="gp">... </span>    <span class="n">extracted_elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;-?\d*\.?\d+&#39;</span><span class="p">,</span> <span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">extracted_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">extracted_elements</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span> <span class="ow">or</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">extracted_numbers</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">extracted_numbers</span><span class="p">))</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduce_tool</span> <span class="o">=</span> <span class="n">ServerTool</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reduce_tool&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;elements&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">}},</span>
<span class="gp">... </span>    <span class="n">func</span><span class="o">=</span><span class="n">reduce_func</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining step names</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DUPLICATION_STEP</span> <span class="o">=</span> <span class="s2">&quot;DUPLICATION&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">REASONING_STEP</span> <span class="o">=</span> <span class="s2">&quot;REASONING&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MAP_STEP</span> <span class="o">=</span> <span class="s2">&quot;MAP&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">REDUCE_STEP</span> <span class="o">=</span> <span class="s2">&quot;REDUCE&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining flow input/output variables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">USER_QUERY_IO</span> <span class="o">=</span> <span class="s2">&quot;$user_query&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N_REPEAT_IO</span> <span class="o">=</span> <span class="s2">&quot;$n_repeat&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FLOW_ITERABLE_QUERIES_IO</span> <span class="o">=</span> <span class="s2">&quot;$flow_iterable_queries&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FLOW_PROCESSED_QUERIES_IO</span> <span class="o">=</span> <span class="s2">&quot;$flow_processed_queries&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FINAL_ANSWER_IO</span> <span class="o">=</span> <span class="s2">&quot;$answer_io&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining a simple prompt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">REASONING_PROMPT_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;Provide your best numerical estimate for: {{user_input}}</span>
<span class="gp">... </span><span class="s1">Your answer should be a single number. Do not include any units, reasoning, or extra text.&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Defining the subflow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapreduce_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">DUPLICATION_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="n">DUPLICATION_STEP</span><span class="p">:</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">tool</span><span class="o">=</span><span class="n">duplication_tool</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="n">USER_QUERY_IO</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="n">N_REPEAT_IO</span><span class="p">},</span>
<span class="gp">... </span>            <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">FLOW_ITERABLE_QUERIES_IO</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">MAP_STEP</span><span class="p">:</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">flow</span><span class="o">=</span><span class="n">create_single_step_flow</span><span class="p">(</span>
<span class="gp">... </span>                <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>                    <span class="n">prompt_template</span><span class="o">=</span><span class="n">REASONING_PROMPT_TEMPLATE</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">PromptExecutionStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">FLOW_PROCESSED_QUERIES_IO</span><span class="p">},</span>
<span class="gp">... </span>                <span class="p">),</span>
<span class="gp">... </span>                <span class="n">step_name</span><span class="o">=</span><span class="n">REASONING_STEP</span>
<span class="gp">... </span>            <span class="p">),</span>
<span class="gp">... </span>            <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;user_input&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">ListProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">FLOW_PROCESSED_QUERIES_IO</span><span class="p">,</span> <span class="n">item_type</span><span class="o">=</span><span class="n">StringProperty</span><span class="p">())],</span>
<span class="gp">... </span>            <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">FLOW_ITERABLE_QUERIES_IO</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">REDUCE_STEP</span><span class="p">:</span> <span class="n">ToolExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">tool</span><span class="o">=</span><span class="n">reduce_tool</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;elements&quot;</span><span class="p">:</span> <span class="n">FLOW_PROCESSED_QUERIES_IO</span><span class="p">},</span>
<span class="gp">... </span>            <span class="n">output_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ToolExecutionStep</span><span class="o">.</span><span class="n">TOOL_OUTPUT</span><span class="p">:</span> <span class="n">FINAL_ANSWER_IO</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">)</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">transitions</span><span class="o">=</span><span class="p">{</span><span class="n">DUPLICATION_STEP</span><span class="p">:</span> <span class="p">[</span><span class="n">MAP_STEP</span><span class="p">],</span> <span class="n">MAP_STEP</span><span class="p">:</span> <span class="p">[</span><span class="n">REDUCE_STEP</span><span class="p">],</span> <span class="n">REDUCE_STEP</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]}</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Once the subflow is created we can simply integrate it with the <code class="docutils literal notranslate"><span class="pre">FlowExecutionStep</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlowExecutionStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MAPREDUCE_STEP</span> <span class="o">=</span> <span class="s2">&quot;MAPREDUCE&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_STEP</span> <span class="o">=</span> <span class="s2">&quot;OUTPUT&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">MAPREDUCE_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="n">MAPREDUCE_STEP</span><span class="p">:</span> <span class="n">FlowExecutionStep</span><span class="p">(</span><span class="n">mapreduce_flow</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">OUTPUT_STEP</span><span class="p">:</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;The estimation is {{value}}&quot;</span><span class="p">,</span> <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">FINAL_ANSWER_IO</span><span class="p">})</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">transitions</span><span class="o">=</span><span class="p">{</span><span class="n">MAPREDUCE_STEP</span><span class="p">:</span> <span class="p">[</span><span class="n">OUTPUT_STEP</span><span class="p">],</span> <span class="n">OUTPUT_STEP</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>    <span class="n">USER_QUERY_IO</span><span class="p">:</span> <span class="s2">&quot;How many calories are in a typical slice of pepperoni pizza?&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">N_REPEAT_IO</span><span class="p">:</span> <span class="mi">2</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># print(conversation.get_last_message().content)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The estimation is 285.5</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.flowexecutionstep.FlowExecutionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.flowexecutionstep.FlowExecutionStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step might yield back to the user.
It depends on the subflow we are executing</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.flowexecutionstep.FlowExecutionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.flowexecutionstep.FlowExecutionStep.sub_flow">
<span class="sig-name descname"><span class="pre">sub_flow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.sub_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sub-flow this step implements, if it does.
(e.g. <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code> does execute a sub-flow)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="mapstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.mapstep.MapStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.mapstep.</span></span><span class="sig-name descname"><span class="pre">MapStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel_execution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.mapstep.MapStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to execute an inside flow on all the elements of an iterable. Order in the iterable is guaranteed the same
as order of execution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, this step will have several inputs descriptors.
One will be named <code class="docutils literal notranslate"><span class="pre">MapStep.ITERATED_INPUT</span></code> of type <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code> will be the iterable on which the step
will iterate. The step will also expose all input descriptors of the <code class="docutils literal notranslate"><span class="pre">flow</span></code> it runs if their names
are not in the <code class="docutils literal notranslate"><span class="pre">unpack_input</span></code> mapping (if they are, these values are extracted from <code class="docutils literal notranslate"><span class="pre">MapStep.ITERATED_INPUT</span></code>).
See <a class="reference internal" href="#flow"><span class="std std-ref">Flow</span></a> to learn more about how flow input descriptors are resolved.</p>
<p>If you provide a list of input descriptors, each provided descriptor will automatically override the detected one,
in particular using the new type instead of the detected one. In particular, the type of
<code class="docutils literal notranslate"><span class="pre">MapStep.ITERATED_INPUT</span></code> will impact the way the step iterates on the iterable (see <code class="docutils literal notranslate"><span class="pre">unpack_input</span></code>
parameter for more details).</p>
<p>If some of them are missing, an error will be thrown at instantiation of the step.</p>
<p>If you provide input descriptors for non-autodetected variables, a warning will be emitted, and
they won’t be used during the execution of the step.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">output_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, this step will not have any output descriptor.</p>
<p>If you provide a list of output descriptors, their names much match with the names of the output
descriptors of the inside <code class="docutils literal notranslate"><span class="pre">flow</span></code> and their type should be <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>.
This way. the step will collect the output of each iteration of the inside <code class="docutils literal notranslate"><span class="pre">flow</span></code> into these outputs.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flow</strong> (<a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>Flow</em></a>) – Flow that is being executed with each iteration of the input.</p></li>
<li><p><strong>unpack_input</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – <p>Mapping to specify how to unpack when each iter item is a <code class="docutils literal notranslate"><span class="pre">dict</span></code> and we need to map its element to the inside flow inputs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keys are names of input variables of the inside flow, while values are jq queries to extract a specific part of each iterated item (see <a class="reference external" href="https://jqlang.github.io/jq/">https://jqlang.github.io/jq/</a> for more information on jq queries). Using the item as-is can be done with the <code class="docutils literal notranslate"><span class="pre">.</span></code> query.
If the iterated input type is <code class="docutils literal notranslate"><span class="pre">dict</span></code>, then the iterated items will be key/value pairs and you can access both using <code class="docutils literal notranslate"><span class="pre">._key</span></code> and <code class="docutils literal notranslate"><span class="pre">._value</span></code> as jq queries.</p>
</div>
</p></li>
<li><p><strong>parallel_execution</strong> (<em>bool</em>) – Executes the mapping operation in parallel. Cannot be set to true if the internal flow can yield. This feature is
in beta, be aware that flows might have side effects on one another. Each thread will use a different IO dict, but they will all share
the same message list.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – <p>Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Setting this value to something else than <code class="docutils literal notranslate"><span class="pre">None</span></code> will change the behavior of the step. The step will
iterate differently depending on the type of the <code class="docutils literal notranslate"><span class="pre">MapStep.ITERATED_INPUT</span></code> descriptor and the
value of <code class="docutils literal notranslate"><span class="pre">unpack_inputs</span></code></p>
</div>
</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – <p>Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Setting this value to something else than <code class="docutils literal notranslate"><span class="pre">None</span></code> will change the behavior of the step. It will try to collect
these output descriptors values from the outputs of each run of the inside <code class="docutils literal notranslate"><span class="pre">flow</span></code>.</p>
</div>
</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If the mapping between iterated items and the inside
flow input is 1 to 1 (<code class="docutils literal notranslate"><span class="pre">unpack_input</span></code> is a <code class="docutils literal notranslate"><span class="pre">str</span></code>), then the <code class="docutils literal notranslate"><span class="pre">iterated_input_type</span></code> subtype will be infered from the inside flow’s input type.
Otherwise, it will be set to <code class="docutils literal notranslate"><span class="pre">AnyType</span></code>.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">MapStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_single_step_flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">DictProperty</span><span class="p">,</span> <span class="n">AnyProperty</span><span class="p">,</span> <span class="n">Property</span>
</pre></div>
</div>
<p>You can iterate in simple lists:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sub_flow</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">OutputMessageStep</span><span class="p">(</span><span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;username={{user}}&quot;</span><span class="p">),</span> <span class="n">step_name</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">flow</span><span class="o">=</span><span class="n">sub_flow</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">AnyProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">)],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">iterable</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;output_message&#39;: [&#39;username=a&#39;, &#39;username=b&#39;]}</span>
</pre></div>
</div>
<p>You can also extract from list of elements:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sub_flow</span><span class="o">=</span><span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">OutputMessageStep</span><span class="p">(</span><span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;{{user}}:{{email}}&quot;</span><span class="p">),</span> <span class="n">step_name</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">flow</span><span class="o">=</span><span class="n">sub_flow</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>       <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;.username&#39;</span><span class="p">,</span>
<span class="gp">... </span>       <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;.email&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">AnyProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">)],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;a@oracle.com&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;b@oracle.com&quot;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">iterable</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;output_message&#39;: [&#39;a:a@oracle.com&#39;, &#39;b:b@oracle.com&#39;]}</span>
</pre></div>
</div>
<p>You can also iterate through dictionaries:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sub_flow</span><span class="o">=</span><span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">OutputMessageStep</span><span class="p">(</span><span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;{{user}}:{{email}}&quot;</span><span class="p">),</span> <span class="n">step_name</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">MapStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">flow</span><span class="o">=</span><span class="n">sub_flow</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">unpack_input</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>       <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;._key&#39;</span><span class="p">,</span>
<span class="gp">... </span>       <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;._value.email&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">DictProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">,</span> <span class="n">value_type</span><span class="o">=</span><span class="n">AnyProperty</span><span class="p">(</span><span class="s1">&#39;inner_value&#39;</span><span class="p">))],</span>
<span class="gp">... </span>    <span class="n">output_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">AnyProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">OutputMessageStep</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">)],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;a@oracle.com&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;b@oracle.com&quot;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">create_single_step_flow</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">MapStep</span><span class="o">.</span><span class="n">ITERATED_INPUT</span><span class="p">:</span> <span class="n">iterable</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="o">.</span><span class="n">output_values</span>
<span class="go">{&#39;output_message&#39;: [&#39;a:a@oracle.com&#39;, &#39;b:b@oracle.com&#39;]}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.mapstep.MapStep.ITERATED_INPUT">
<span class="sig-name descname"><span class="pre">ITERATED_INPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'iterated_input'</span></em><a class="headerlink" href="#wayflowcore.steps.mapstep.MapStep.ITERATED_INPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the iterable to use the <code class="docutils literal notranslate"><span class="pre">MapStep</span></code> on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.mapstep.MapStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.mapstep.MapStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.steps.mapstep.MapStep.might_yield">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">might_yield</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.steps.mapstep.MapStep.might_yield" title="Permalink to this definition">#</a></dt>
<dd><p>Indicates if the step might yield back to the user.
Might be the step directly, or one of the steps it calls.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.mapstep.MapStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.mapstep.MapStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.mapstep.MapStep.sub_flow">
<span class="sig-name descname"><span class="pre">sub_flow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.mapstep.MapStep.sub_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sub-flow this step implements, if it does.
(e.g. <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code> does execute a sub-flow)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a> | None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="branchingstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.branchingstep.BranchingStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.branchingstep.</span></span><span class="sig-name descname"><span class="pre">BranchingStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch_name_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.branchingstep.BranchingStep" title="Permalink to this definition">#</a></dt>
<dd><p>This step impacts the control flow of the assistant by deciding what step to go next based on the input passed to it.
This step does not involve the use of LLMs, as it simply uses the given input step name and an optional mapping.
As a consequence, exact match in the step names is required for this step.
For more flexibility please use the <code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep</span></code> where the next step is determined by an LLM.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, this step has a single input descriptor, named
<code class="docutils literal notranslate"><span class="pre">BranchingStep.NEXT_BRANCH_NAME</span></code>, of type <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, that represents the value that will be
mapped against <code class="docutils literal notranslate"><span class="pre">branch_name_mapping</span></code> to determine the next branch.</p>
<p><strong>Output descriptors</strong></p>
<p>By default, this step has no output descriptor.</p>
<p><strong>Branches</strong></p>
<p>This step can have several next steps and perform conditional branching based on the value of its inputs. It has one
possible branch per value in the <code class="docutils literal notranslate"><span class="pre">branch_name_mapping</span></code> dictionary, plus <code class="docutils literal notranslate"><span class="pre">BRANCH_DEFAULT</span></code> which is chosen
in case the value passed as input does not appear in the <code class="docutils literal notranslate"><span class="pre">branch_name_mapping</span></code> mapping.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>branch_name_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – Mapping between input values of this step and particular branches. Used to branch out based on the input value.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceSelectionStep</span></code></dt><dd><p>Flexible version of the <code class="docutils literal notranslate"><span class="pre">BranchingStep</span></code> using an LLM to select the next step.</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">BranchingStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">BRANCHING_STEP</span> <span class="o">=</span> <span class="s2">&quot;BRANCHING&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_ACCESS_GRANTED_STEP</span> <span class="o">=</span> <span class="s2">&quot;ACCESS_GRANTED&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_ACCESS_DENIED_STEP</span> <span class="o">=</span> <span class="s2">&quot;ACCESS_DENIED&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NEXT_STEP_NAME_IO</span> <span class="o">=</span> <span class="s2">&quot;$next_step_name&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">BRANCHING_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="n">BRANCHING_STEP</span><span class="p">:</span> <span class="n">BranchingStep</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">branch_name_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;yes&quot;</span><span class="p">:</span> <span class="s2">&quot;access_is_granted&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">:</span> <span class="s2">&quot;access_is_denied&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">BranchingStep</span><span class="o">.</span><span class="n">NEXT_BRANCH_NAME</span><span class="p">:</span> <span class="n">NEXT_STEP_NAME_IO</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">OUTPUT_ACCESS_GRANTED_STEP</span><span class="p">:</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;Access granted. Press any key to continue...&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">OUTPUT_ACCESS_DENIED_STEP</span><span class="p">:</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;Access denied. Please exit the conversation.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">transitions</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="n">BRANCHING_STEP</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;access_is_granted&#39;</span><span class="p">:</span> <span class="n">OUTPUT_ACCESS_GRANTED_STEP</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s1">&#39;access_is_denied&#39;</span><span class="p">:</span> <span class="n">OUTPUT_ACCESS_DENIED_STEP</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">BranchingStep</span><span class="o">.</span><span class="n">BRANCH_DEFAULT</span><span class="p">:</span> <span class="n">OUTPUT_ACCESS_DENIED_STEP</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="n">OUTPUT_ACCESS_GRANTED_STEP</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">OUTPUT_ACCESS_DENIED_STEP</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">NEXT_STEP_NAME_IO</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># conversation.get_last_message().content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Access granted. Press any key to continue...</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.branchingstep.BranchingStep.BRANCH_DEFAULT">
<span class="sig-name descname"><span class="pre">BRANCH_DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#wayflowcore.steps.branchingstep.BranchingStep.BRANCH_DEFAULT" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the branch taken if none of the <cite>branch_name_mapping</cite> transitions match</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.branchingstep.BranchingStep.NEXT_BRANCH_NAME">
<span class="sig-name descname"><span class="pre">NEXT_BRANCH_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'next_step_name'</span></em><a class="headerlink" href="#wayflowcore.steps.branchingstep.BranchingStep.NEXT_BRANCH_NAME" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the name to transition to next.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.branchingstep.BranchingStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.branchingstep.BranchingStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.branchingstep.BranchingStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.branchingstep.BranchingStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="choiceselectionstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.choiceselectionstep.</span></span><span class="sig-name descname"><span class="pre">ChoiceSelectionStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tokens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step that decides what next step to go to (control flow change) based on an input and description of the next steps,
powered by an LLM. If the next step named as an explicit mapping to some existing value, please use the
<code class="docutils literal notranslate"><span class="pre">BranchingStep</span></code>, which is similar to this step but doesn’t use any LLM.</p>
<p>It outputs the selected choice index so that it can be consumed by downstreams steps if they need it,
as well as the full text given back by the LLM.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has for input descriptors all the variables extracted from <code class="docutils literal notranslate"><span class="pre">prompt_template</span></code>. See <a class="reference internal" href="#templaterenderingstep"><span class="std std-ref">TemplateRenderingStep</span></a> for concrete examples on how descriptors are extracted from text prompts.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has two output descriptors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.SELECTED_CHOICE</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, the name of the branch selected by the step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.LLM_OUTPUT</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, the raw LLM output before parsing</p></li>
</ul>
<p><strong>Branches</strong></p>
<p>This step can have several next steps and perform conditional branching using the <code class="docutils literal notranslate"><span class="pre">llm</span></code> and the given input values. The branches
this step can take are simply all the branches mentioned in the <code class="docutils literal notranslate"><span class="pre">next_step</span></code> argument.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>llm</strong> (<a class="reference internal" href="llmmodels.html#wayflowcore.models.llmmodel.LlmModel" title="wayflowcore.models.llmmodel.LlmModel"><em>LlmModel</em></a>) – Model that is used to determine the choice of next step.</p></li>
<li><p><strong>next_steps</strong> (<em>List</em><em>[</em><em>StepDescriptionInput</em><em>]</em>) – List of tuples containing the next step name and a description of it. If the name displayed in prompt is different than
the real step name, then pass tuples with the format <code class="docutils literal notranslate"><span class="pre">Tuple[step_name,</span> <span class="pre">step_description,</span> <span class="pre">displayed_step_name]</span></code>.
Will be passed in the prompt for making the choice.</p></li>
<li><p><strong>prompt_template</strong> (<em>str</em>) – Prompt template to be used to have the LLM determine the next step to transition to. Defaults to <code class="docutils literal notranslate"><span class="pre">DEFAULT_CHOICE_SELECTION_TEMPLATE</span></code>,</p></li>
<li><p><strong>num_tokens</strong> (<em>int</em>) – <p>Upper limit on the number of tokens that can be generated by the LLM.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">num_tokens</span></code> should be as small as possible to ensure low latency, but high enough
to encode all the displayed_step_names. Adjust the value depending on the length of the step names.</p>
</div>
</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">BranchingStep</span></code></dt><dd><p>Strict version of the <code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep</span></code> that does not use an LLM.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The success of this steps depends on the performance of the LLM. You can increase the robustness of this step by:</p>
<ul class="simple">
<li><p>Tweaking the prompt template for your specific use case.</p></li>
<li><p>Using a better LLM</p></li>
<li><p>Wrapping the step inside a <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code></p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChoiceSelectionStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CHOICE_SELECTION_STEP</span> <span class="o">=</span> <span class="s2">&quot;CHOICE_SELECTION&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_STEP1</span> <span class="o">=</span> <span class="s2">&quot;OUTPUT1&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">OUTPUT_STEP2</span> <span class="o">=</span> <span class="s2">&quot;OUTPUT2&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CHOICE_SELECTION_IO</span> <span class="o">=</span> <span class="s2">&quot;$choice_selection&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">CHOICE_SELECTION_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="n">CHOICE_SELECTION_STEP</span><span class="p">:</span> <span class="n">ChoiceSelectionStep</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">next_steps</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>                <span class="p">(</span><span class="n">OUTPUT_STEP1</span><span class="p">,</span> <span class="s2">&quot;The access is denied&quot;</span><span class="p">,</span> <span class="s2">&quot;is_access_denied&quot;</span><span class="p">),</span>
<span class="gp">... </span>                <span class="p">(</span><span class="n">OUTPUT_STEP2</span><span class="p">,</span> <span class="s2">&quot;The access is granted&quot;</span><span class="p">,</span> <span class="s2">&quot;is_access_granted&quot;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="p">],</span>
<span class="gp">... </span>            <span class="n">input_mapping</span><span class="o">=</span><span class="p">{</span><span class="n">ChoiceSelectionStep</span><span class="o">.</span><span class="n">INPUT</span><span class="p">:</span> <span class="n">CHOICE_SELECTION_IO</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">OUTPUT_STEP1</span><span class="p">:</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;Access denied. Please exit the conversation.&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">OUTPUT_STEP2</span><span class="p">:</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;Access granted. Press any key to continue...&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">transitions</span><span class="o">=</span><span class="p">{</span><span class="n">CHOICE_SELECTION_STEP</span><span class="p">:</span> <span class="p">{</span><span class="n">OUTPUT_STEP1</span><span class="p">:</span> <span class="n">OUTPUT_STEP1</span><span class="p">,</span> <span class="n">OUTPUT_STEP2</span><span class="p">:</span> <span class="n">OUTPUT_STEP2</span><span class="p">,</span> <span class="n">ChoiceSelectionStep</span><span class="o">.</span><span class="n">BRANCH_DEFAULT</span><span class="p">:</span> <span class="n">OUTPUT_STEP1</span><span class="p">},</span> <span class="n">OUTPUT_STEP1</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span> <span class="n">OUTPUT_STEP2</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">CHOICE_SELECTION_IO</span><span class="p">:</span> <span class="s2">&quot;I grant the access to the user&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># conversation.get_last_message().content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Access granted. Press any key to continue...</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.BRANCH_DEFAULT">
<span class="sig-name descname"><span class="pre">BRANCH_DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.BRANCH_DEFAULT" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the branch taken in case the LLM is not able to choose a next step</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.DEFAULT_CHOICE_SELECTION_TEMPLATE">
<span class="sig-name descname"><span class="pre">DEFAULT_CHOICE_SELECTION_TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'You</span> <span class="pre">are</span> <span class="pre">a</span> <span class="pre">helpful</span> <span class="pre">assistant.</span> <span class="pre">You</span> <span class="pre">must</span> <span class="pre">pick</span> <span class="pre">a</span> <span class="pre">task</span> <span class="pre">to</span> <span class="pre">execute,</span> <span class="pre">given</span> <span class="pre">some</span> <span class="pre">user</span> <span class="pre">input.\nYou</span> <span class="pre">have</span> <span class="pre">several</span> <span class="pre">tasks</span> <span class="pre">to</span> <span class="pre">select</span> <span class="pre">from,</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">format:\n```\ntask_name:</span> <span class="pre">task_description\n```\n\nThe</span> <span class="pre">available</span> <span class="pre">tasks</span> <span class="pre">are:\n```\n{%</span> <span class="pre">for</span> <span class="pre">desc</span> <span class="pre">in</span> <span class="pre">next_steps</span> <span class="pre">-%}\n-</span> <span class="pre">{{</span> <span class="pre">desc.displayed_step_name</span> <span class="pre">}}:</span> <span class="pre">{{</span> <span class="pre">desc.description</span> <span class="pre">}}\n{%</span> <span class="pre">endfor</span> <span class="pre">-%}\n```\n\nReturn</span> <span class="pre">the</span> <span class="pre">task_name</span> <span class="pre">(and</span> <span class="pre">only</span> <span class="pre">the</span> <span class="pre">task_name)</span> <span class="pre">that</span> <span class="pre">you</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">execute</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">request:</span> <span class="pre">{{</span> <span class="pre">input</span> <span class="pre">}}'</span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.DEFAULT_CHOICE_SELECTION_TEMPLATE" title="Permalink to this definition">#</a></dt>
<dd><p>Default prompt template to be used by the LLM to determine the next step to transition to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.INPUT">
<span class="sig-name descname"><span class="pre">INPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'input'</span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.INPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Input key for the input to be used to determine the next step to transition to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.LLM_OUTPUT">
<span class="sig-name descname"><span class="pre">LLM_OUTPUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'llm_output'</span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.LLM_OUTPUT" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the final next step decision after parsing the LLM decision.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.SELECTED_CHOICE">
<span class="sig-name descname"><span class="pre">SELECTED_CHOICE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'selected_choice'</span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.SELECTED_CHOICE" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the raw next step decision generated by the LLM.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.sub_flow">
<span class="sig-name descname"><span class="pre">sub_flow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.sub_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sub-flow this step implements, if it does.
(e.g. <code class="docutils literal notranslate"><span class="pre">RetryStep</span></code> does execute a sub-flow)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow">Flow</a> | None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="completestep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.completestep.CompleteStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.completestep.</span></span><span class="sig-name descname"><span class="pre">CompleteStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.completestep.CompleteStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to exit a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has no input descriptors.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has no output descriptors.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>branch_name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the outgoing branch of this step when being used in a sub-flow (i.e. flows used in a <code class="docutils literal notranslate"><span class="pre">FlowExecutionStep</span></code>).
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the step <code class="docutils literal notranslate"><span class="pre">name</span></code> is used.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">BranchingStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span><span class="p">,</span> <span class="n">StartStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">BRANCHING_VAR_NAME</span> <span class="o">=</span> <span class="s2">&quot;my_branching_var&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">branching_step</span> <span class="o">=</span> <span class="n">BranchingStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;branching_step&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">branch_name_mapping</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;[SUCCESS]&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;[FAILURE]&quot;</span><span class="p">:</span> <span class="s2">&quot;failure&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start_step&quot;</span><span class="p">,</span> <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span><span class="n">StringProperty</span><span class="p">(</span><span class="n">BRANCHING_VAR_NAME</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">success_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;success_step&quot;</span><span class="p">,</span> <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;It was a success&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">failure_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;failure_step&quot;</span><span class="p">,</span> <span class="n">message_template</span><span class="o">=</span><span class="s2">&quot;It was a failure&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">start_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">source_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">success_step</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_branch</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">source_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">failure_step</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_branch</span><span class="o">=</span><span class="s2">&quot;failure&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">source_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">destination_step</span><span class="o">=</span><span class="n">failure_step</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">source_branch</span><span class="o">=</span><span class="n">BranchingStep</span><span class="o">.</span><span class="n">BRANCH_DEFAULT</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">success_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">failure_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">data_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">DataFlowEdge</span><span class="p">(</span><span class="n">start_step</span><span class="p">,</span> <span class="n">BRANCHING_VAR_NAME</span><span class="p">,</span> <span class="n">branching_step</span><span class="p">,</span> <span class="n">BranchingStep</span><span class="o">.</span><span class="n">NEXT_BRANCH_NAME</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="n">BRANCHING_VAR_NAME</span><span class="p">:</span> <span class="s2">&quot;[SUCCESS]&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">conversation</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">conversation</span><span class="o">.</span><span class="n">get_last_message</span><span class="p">()</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="go">It was a success</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.completestep.CompleteStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.completestep.CompleteStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.completestep.CompleteStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.completestep.CompleteStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="startstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.startstep.StartStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.startstep.</span></span><span class="sig-name descname"><span class="pre">StartStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.startstep.StartStep" title="Permalink to this definition">#</a></dt>
<dd><p>Step to enter a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the input descriptors of the step are empty.
The user should set the <code class="docutils literal notranslate"><span class="pre">input_descriptors</span></code> to the list of inputs that are expected to be provided
as inputs to the flow this step belongs to.</p>
<p><strong>Output descriptors</strong></p>
<p>The output descriptors of this step are equal to the input descriptors.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – The list of input descriptors that the flow containing this step takes as input.
<code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will not have any input descriptor.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner. The output descriptors should be a subset of the input_descriptors.
This parameter should not be used in this step.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.
This parameter should not be used in this step.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.dataconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">CompleteStep</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">PromptExecutionStep</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">StartStep</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">START_STEP</span> <span class="o">=</span> <span class="s2">&quot;start_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LLM_ANSWER_STEP</span> <span class="o">=</span> <span class="s2">&quot;llm_answer_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COMPLETE_STEP</span> <span class="o">=</span> <span class="s2">&quot;complete_step&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_step</span> <span class="o">=</span> <span class="n">StartStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">input_descriptors</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">StringProperty</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_question&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The user question.&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">)</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llm_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;Answer the user question: {{user_question}}&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">steps</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="n">START_STEP</span><span class="p">:</span> <span class="n">start_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">LLM_ANSWER_STEP</span><span class="p">:</span> <span class="n">llm_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">COMPLETE_STEP</span><span class="p">:</span> <span class="n">CompleteStep</span><span class="p">(),</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transitions</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="n">START_STEP</span><span class="p">:</span> <span class="p">[</span><span class="n">LLM_ANSWER_STEP</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">LLM_ANSWER_STEP</span><span class="p">:</span> <span class="p">[</span><span class="n">COMPLETE_STEP</span><span class="p">],</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assistant</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step_name</span><span class="o">=</span><span class="n">START_STEP</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">transitions</span><span class="o">=</span><span class="n">transitions</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conversation</span> <span class="o">=</span> <span class="n">assistant</span><span class="o">.</span><span class="n">start_conversation</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;user_question&quot;</span><span class="p">:</span> <span class="s2">&quot;Could you talk about the Oracle Cloud Infrastructure?&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.startstep.StartStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.startstep.StartStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.startstep.StartStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.startstep.StartStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="apicallstep"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.apicallstep.ApiCallStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.apicallstep.</span></span><span class="sig-name descname"><span class="pre">ApiCallStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cookies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_values_json</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_response</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_bad_http_requests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_retry_on_bad_http_request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_insecure_http</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_allow_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_credentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_fragments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_ports</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'http':</span> <span class="pre">80,</span> <span class="pre">'https':</span> <span class="pre">443}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_descriptors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.apicallstep.ApiCallStep" title="Permalink to this definition">#</a></dt>
<dd><p>A step for calling remote APIs.
It can do GET/POST/PUT/DELETE/etc. requests to endpoints.
The query parameters, body, headers, cookies can be configured and can be templated so that they
take values from the IO system.
If the response is JSON its contents can be automatically extracted using json queries.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Since the Agent can generate arguments (url, method, json_body, data, params, headers, cookies) or parts of these arguments in the respective Jinja
templates, this can impose a security risk of information leakage and enable specific attack vectors like automated DDOS attacks. Please use
<code class="docutils literal notranslate"><span class="pre">ApiCallStep</span></code> responsibly and ensure that only valid URLs can be given as arguments or that no sensitive information is used for any of these arguments by the agent.
Please use the url_allow_list, allow_credentials and allow_fragments parameters to control which URLs are treated as valid.</p>
</div>
<p>Initializes the api call step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A step has input and output descriptors, describing what values the step requires to run and what values it produces.</p>
<p><strong>Input descriptors</strong></p>
<p>This step has for input descriptors all the variables extracted from the <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">method</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">json_body</span></code>, <code class="docutils literal notranslate"><span class="pre">params</span></code>, <code class="docutils literal notranslate"><span class="pre">headers</span></code> or <code class="docutils literal notranslate"><span class="pre">cookies</span></code> templates. See <a class="reference internal" href="#templaterenderingstep"><span class="std std-ref">TemplateRenderingStep</span></a> for concrete examples on how descriptors are extracted from text prompts.</p>
<p><strong>Output descriptors</strong></p>
<p>This step has several output descriptors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ApiCallStep.HTTP_STATUS_CODE</span></code>: <code class="docutils literal notranslate"><span class="pre">IntegerProperty()</span></code>, status code of the API call</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ApiCallStep.HTTP_RESPONSE</span></code>: <code class="docutils literal notranslate"><span class="pre">StringProperty()</span></code>, http response of the API call if <code class="docutils literal notranslate"><span class="pre">store_response</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
</ul>
<p>It also has one output descriptor per entry in the <code class="docutils literal notranslate"><span class="pre">output_values_json</span></code> mapping, which are <code class="docutils literal notranslate"><span class="pre">AnyProperty()</span></code> extract from the json response</p>
<p>The requested URL is validated and normalized before the request is executed. Normalization expects URLs containing non-Latin characters or
underscores to be normalized to punycode, else they will be rejected during normalization.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – Url to call.
Can be templated using jinja templates.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – HTTP method to call.
Common methods are: GET, OPTIONS, HEAD, POST, PUT, PATCH, or DELETE.
Can be templated using jinja templates.</p></li>
<li><p><strong>json_body</strong> (<em>Any</em><em> | </em><em>None</em>) – <p>A json-serializable object that will automatically be converted to json and sent as a body.
Cannot be used in combination with <code class="docutils literal notranslate"><span class="pre">data</span></code>.
Can be templated using jinja templates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Special case: if the <code class="docutils literal notranslate"><span class="pre">json_body</span></code> is a <code class="docutils literal notranslate"><span class="pre">str</span></code> it will be taken as a literal json string.
Setting this parameter automatically sets the <code class="docutils literal notranslate"><span class="pre">Content-Type:</span> <span class="pre">application/json</span></code> header.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">json_body</span></code> parameter is only relevant for http methods that allow bodies, e.g. POST, PUT, PATCH.</p>
</div>
</p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>Any</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>List</em><em>[</em><em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>Any</em><em>]</em><em>] </em><em>| </em><em>str</em><em> | </em><em>bytes</em><em> | </em><em>None</em>) – <p>Raw data that will be sent in the body.
Semantics of this are the same as in the <code class="docutils literal notranslate"><span class="pre">requests</span></code> library.
Cannot be used in combination with <code class="docutils literal notranslate"><span class="pre">json_body</span></code>.
Can be templated using jinja templates.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter is only relevant for http methods that allow bodies, e.g. POST, PUT, PATCH.</p>
</div>
</p></li>
<li><p><strong>params</strong> (<em>Dict</em><em>[</em><em>Any</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>List</em><em>[</em><em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>Any</em><em>]</em><em>] </em><em>| </em><em>str</em><em> | </em><em>bytes</em><em> | </em><em>None</em>) – Data to send as query-parameters (i.e. the <code class="docutils literal notranslate"><span class="pre">?foo=bar&amp;gnu=gna</span></code> part of queries)
Semantics of this are the same as in the <code class="docutils literal notranslate"><span class="pre">requests</span></code> library.
Can be templated using jinja templates.</p></li>
<li><p><strong>headers</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – <p>Explicitly set headers.
Can be templated using jinja templates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will override any of the implicitly set headers (e.g. <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> from <code class="docutils literal notranslate"><span class="pre">json_body</span></code>).</p>
</div>
</p></li>
<li><p><strong>cookies</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – Cookies to transmit.
Can be templated using jinja templates.</p></li>
<li><p><strong>output_values_json</strong> (<em>Dict</em><em>[</em><em>str</em><em> | </em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>, </em><em>str</em><em>] </em><em>| </em><em>None</em>) – <p>Interpret the response as json and extract values according to the provided dict, which contains pairs of (“key-in-io”: “jq-query”),
This will extract from the response json the value described by the “jq-query” and store it in “key-in-io”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default this is <code class="docutils literal notranslate"><span class="pre">None</span></code>, so if <code class="docutils literal notranslate"><span class="pre">output_values_json</span></code> is not set and the <code class="docutils literal notranslate"><span class="pre">store_response</span></code> parameter is not explicitly set to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
this step will not return anything from the response.</p>
</div>
</p></li>
<li><p><strong>store_response</strong> (<em>bool</em>) – <p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, store the complete response in the IO system under the key <code class="docutils literal notranslate"><span class="pre">HTTP_RESPONSE</span></code>.
(useful for e.g. later extraction through a specialized step, or if the response does not require extraction or is not json)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default this is <code class="docutils literal notranslate"><span class="pre">False</span></code>, so if <cite>output_values_json</cite> is not set and the <code class="docutils literal notranslate"><span class="pre">store_response</span></code> parameter is not explicitly set to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
this step will not return anything from the response body.</p>
</div>
</p></li>
<li><p><strong>ignore_bad_http_requests</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, don’t throw an exception when query results in a bad status code (e.g. 4xx, 5xx); if <code class="docutils literal notranslate"><span class="pre">False</span></code> throws an exception.</p></li>
<li><p><strong>num_retry_on_bad_http_request</strong> (<em>int</em>) – Number of times to retry a failed http request before continuing (depending on the <code class="docutils literal notranslate"><span class="pre">ignore_bad_http_requests</span></code> setting above).</p></li>
<li><p><strong>allow_insecure_http</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, allows url to have a unsecured non-ssl http scheme. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code> and throws a ValueError if url is unsecure.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Name of the step.</p></li>
<li><p><strong>url_allow_list</strong> (<em>List</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – <p>A list of URLs that any request URL is matched against.
If there is at least one entry in the allow list that the requested URL matches,
the request is considered allowed.</p>
<p>We consider URLs following the generic-URL syntax as defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc1808.html">RFC 1808</a>:
<code class="docutils literal notranslate"><span class="pre">&lt;scheme&gt;://&lt;net_loc&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;fragment&gt;</span></code></p>
<p>Matching is done according to the following rules:</p>
<ul>
<li><p>URL scheme must match exactly</p></li>
<li><p>URL authority (net_loc) must match exactly</p></li>
<li><p>URL path must prefix match the path given by the entry in the allow list</p></li>
<li><p>We do not support matching against specific params, fragments or query elements of the URLs.</p></li>
</ul>
<p>Examples of matches:</p>
<ul>
<li><p>URL: “<a class="reference external" href="https://example.com/page">https://example.com/page</a>”, allow_list: [”<a class="reference external" href="https://example.com">https://example.com</a>”]</p></li>
<li><p>URL: “<a class="reference external" href="https://specific.com/path/and/more">https://specific.com/path/and/more</a>”, allow_list: [”<a class="reference external" href="https://specific.com/path">https://specific.com/path</a>”]</p></li>
</ul>
<p>Examples of mismatches:</p>
<ul>
<li><p>URL: “<a class="reference external" href="http://someurl.example.com">http://someurl.example.com</a>”, allow_list: [”<a class="reference external" href="http://other.example.com">http://other.example.com</a>”]</p></li>
<li><p>URL: “<a class="reference external" href="http://someurl.example.com/endpoint">http://someurl.example.com/endpoint</a>”, allow_list: [”<a class="reference external" href="http://">http://</a>”] (results in a validation error)</p></li>
</ul>
<p>Can be used to restrict requests to a set of allowed urls.</p>
</p></li>
<li><p><strong>allow_credentials</strong> (<em>bool</em>) – <p>Whether to allow URLs containing credentials.
If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, requested URLs and those in the allow list containing credentials will be rejected.
Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Example of a URL containing credentials: “<a class="reference external" href="https://user:pass&#64;example.com/">https://user:pass&#64;example.com/</a>”</p>
</p></li>
<li><p><strong>allow_fragments</strong> (<em>bool</em>) – <p>Whether to allow fragments in requested URLs and in entries in the allow list.
If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, fragments will not be allowed. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>We consider URLs following the generic-URL syntax as defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc1808.html">RFC 1808</a>:
<code class="docutils literal notranslate"><span class="pre">&lt;scheme&gt;://&lt;net_loc&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;fragment&gt;</span></code></p>
</p></li>
<li><p><strong>default_ports</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em>) – A dictionary containing default schemes and their respective ports.
These ports will be removed from URLs requested or from entries in the allow list during URL normalization.
Default is <code class="docutils literal notranslate"><span class="pre">{'http':</span> <span class="pre">80,</span> <span class="pre">'https':</span> <span class="pre">443}</span></code>.</p></li>
<li><p><strong>input_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Input descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve the input descriptors automatically using its static configuration in a best effort manner.</p></li>
<li><p><strong>output_descriptors</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>] </em><em>| </em><em>None</em>) – Output descriptors of the step. <code class="docutils literal notranslate"><span class="pre">None</span></code> means the step will resolve them automatically using its static
configuration in a best effort manner.</p></li>
<li><p><strong>input_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the inputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>output_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping between the name of the outputs this step expects and the name to get it from in the conversation input/output dictionary.</p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – Thrown when both <code class="docutils literal notranslate"><span class="pre">json_body</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code> are set.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps.apicallstep</span><span class="w"> </span><span class="kn">import</span> <span class="n">ApiCallStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.property</span><span class="w"> </span><span class="kn">import</span> <span class="n">Property</span><span class="p">,</span> <span class="n">ListProperty</span><span class="p">,</span> <span class="n">IntegerProperty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call_current_weather_step</span> <span class="o">=</span> <span class="n">ApiCallStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://example.com/weather&quot;</span><span class="p">,</span>     <span class="c1"># call the URL https://example.com/weather</span>
<span class="gp">... </span>    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>                          <span class="c1"># using the GET method</span>
<span class="gp">... </span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;zurich&quot;</span><span class="p">,</span>                <span class="c1"># hardcode a query parameter &quot;location&quot; to &quot;zurich&quot; (will result in a GET call to https://example.com/weather?location=zurich)</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">output_values_json</span> <span class="o">=</span> <span class="p">{</span>                   <span class="c1"># from the returned JSON extract the `.weather` and `.temperature.celsius` properties and put it on the IO system under the key `weather` and `temperature`</span>
<span class="gp">... </span>        <span class="s2">&quot;weather&quot;</span><span class="p">:</span> <span class="s2">&quot;.weather&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;temperature_c&quot;</span><span class="p">:</span> <span class="s2">&quot;.temperature.celsius&quot;</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">create_order_step</span> <span class="o">=</span> <span class="n">ApiCallStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://example.com/orders/{{ order_id }}&quot;</span><span class="p">,</span>         <span class="c1"># call the URL https://example.com/orders/{{ order_id }}</span>
<span class="gp">... </span>    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>                            <span class="c1"># using the POST method</span>
<span class="gp">... </span>    <span class="n">json_body</span> <span class="o">=</span> <span class="p">{</span>                               <span class="c1"># sending an object which will automatically be transformed into JSON</span>
<span class="gp">... </span>        <span class="s2">&quot;topic_id&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>                      <span class="c1"># define a static body parameter</span>
<span class="gp">... </span>        <span class="s2">&quot;item_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ item_id }}&quot;</span><span class="p">,</span>             <span class="c1"># define a templated body parameter. the value for {{ item_id }} will be taken from the IO system at runtime</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;store_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ store_id }}&quot;</span><span class="p">,</span>          <span class="c1"># provide one templated query parameter called &quot;store_id&quot; which will take it&#39;s value from the IO system from key &quot;store_id&quot;</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>                                <span class="c1"># set headers</span>
<span class="gp">... </span>        <span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ session_id }}&quot;</span><span class="p">,</span>      <span class="c1"># set header session_id. the value is coming from the IO system</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">output_values_json</span> <span class="o">=</span> <span class="p">{</span>                     <span class="c1"># from the returned JSON extract the `.weather` property and put it on the IO system under the key `weather`</span>
<span class="gp">... </span>        <span class="s2">&quot;first_order_status&quot;</span><span class="p">:</span> <span class="s2">&quot;.orders[0].status&quot;</span><span class="p">,</span>                                                           <span class="c1"># more complicated query,</span>
<span class="gp">... </span>        <span class="n">ListProperty</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;order_ids&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of order ids&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">item_type</span><span class="o">=</span><span class="n">IntegerProperty</span><span class="p">(</span><span class="s2">&quot;inner_int&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="p">):</span> <span class="s2">&quot;[.orders[].id]&quot;</span><span class="p">,</span>  <span class="c1"># extract a list of values</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">url_allow_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://example.com/orders/&quot;</span><span class="p">]</span> <span class="c1"># Example usage of allow_list: Domains and base path are allowed explicitely. We allow any downstream path elements (like the order id in this example) since only the beginning of the path needs to precisely match. All other URLs are rejected.</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call_current_weather_step</span> <span class="o">=</span> <span class="n">ApiCallStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://user:pass@example.com/weather&quot;</span><span class="p">,</span>     <span class="c1"># call the URL https://example.com/weather</span>
<span class="gp">... </span>    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>                          <span class="c1"># using the GET method</span>
<span class="gp">... </span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;zurich&quot;</span><span class="p">,</span>                <span class="c1"># hardcode a query parameter &quot;location&quot; to &quot;zurich&quot; (will result in a GET call to https://example.com/weather?location=zurich)</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">output_values_json</span> <span class="o">=</span> <span class="p">{</span>                   <span class="c1"># from the returned JSON extract the `.weather` and `.temperature.celsius` properties and put it on the IO system under the key `weather` and `temperature`</span>
<span class="gp">... </span>        <span class="s2">&quot;weather&quot;</span><span class="p">:</span> <span class="s2">&quot;.weather&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;temperature_c&quot;</span><span class="p">:</span> <span class="s2">&quot;.temperature.celsius&quot;</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">allow_credentials</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>              <span class="c1"># in this example requests will be rejected since we explicitely dissallow credentials in the URL.</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call_current_weather_step</span> <span class="o">=</span> <span class="n">ApiCallStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://example.com/weather#switzerland&quot;</span><span class="p">,</span>     <span class="c1"># call the URL https://example.com/weather</span>
<span class="gp">... </span>    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>                          <span class="c1"># using the GET method</span>
<span class="gp">... </span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;zurich&quot;</span><span class="p">,</span>                <span class="c1"># hardcode a query parameter &quot;location&quot; to &quot;zurich&quot; (will result in a GET call to https://example.com/weather?location=zurich)</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">output_values_json</span> <span class="o">=</span> <span class="p">{</span>                   <span class="c1"># from the returned JSON extract the `.weather` and `.temperature.celsius` properties and put it on the IO system under the key `weather` and `temperature`</span>
<span class="gp">... </span>        <span class="s2">&quot;weather&quot;</span><span class="p">:</span> <span class="s2">&quot;.weather&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;temperature_c&quot;</span><span class="p">:</span> <span class="s2">&quot;.temperature.celsius&quot;</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">allow_fragments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>              <span class="c1"># in this example the requests will be rejected since we explicitely dissallow fragments in the URL.</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.apicallstep.ApiCallStep.HTTP_RESPONSE">
<span class="sig-name descname"><span class="pre">HTTP_RESPONSE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http_response'</span></em><a class="headerlink" href="#wayflowcore.steps.apicallstep.ApiCallStep.HTTP_RESPONSE" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the http response resulting from the API call.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.apicallstep.ApiCallStep.HTTP_STATUS_CODE">
<span class="sig-name descname"><span class="pre">HTTP_STATUS_CODE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http_status_code'</span></em><a class="headerlink" href="#wayflowcore.steps.apicallstep.ApiCallStep.HTTP_STATUS_CODE" title="Permalink to this definition">#</a></dt>
<dd><p>Output key for the http status code resulting from the API call.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.apicallstep.ApiCallStep.input_mapping">
<span class="sig-name descname"><span class="pre">input_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.apicallstep.ApiCallStep.input_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.apicallstep.ApiCallStep.output_mapping">
<span class="sig-name descname"><span class="pre">output_mapping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.apicallstep.ApiCallStep.output_mapping" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="classes-for-the-io-system-properties">
<h2>Classes for the IO system properties<a class="headerlink" href="#classes-for-the-io-system-properties" title="Permalink to this heading">#</a></h2>
<span class="target" id="property"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.Property">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">Property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property" title="Permalink to this definition">#</a></dt>
<dd><p>Base class to describe an input/output value for a component (flow or agent).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – Restricted accepted values of this property (in the case of an enumeration).
In case of validation, the first value in this tuple as default of the property.</p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.Property.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property.copy" title="Permalink to this definition">#</a></dt>
<dd><p>Copy a <code class="docutils literal notranslate"><span class="pre">Property</span></code> with potentially some new attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Optional name to override this property’s name. By default uses the same name.</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description to override this property’s description. By default uses the same description.</p></li>
<li><p><strong>default_value</strong> (<em>Any</em><em> | </em><em>None</em>) – Optional default_value to override this property’s default_value. By default uses the same default_value.</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – Values for an enumeration.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.Property.default_value">
<span class="sig-name descname"><span class="pre">default_value</span></span><a class="headerlink" href="#wayflowcore.property.Property.default_value" title="Permalink to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">_empty_default</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.Property.description">
<span class="sig-name descname"><span class="pre">description</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#wayflowcore.property.Property.description" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.Property.empty_default">
<span class="sig-name descname"><span class="pre">empty_default</span></span><a class="headerlink" href="#wayflowcore.property.Property.empty_default" title="Permalink to this definition">#</a></dt>
<dd><p>Any: Marker for no default value</p>
<p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">_empty_default</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.Property.enum">
<span class="sig-name descname"><span class="pre">enum</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#wayflowcore.property.Property.enum" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.Property.from_json_schema">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate_default_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property.from_json_schema" title="Permalink to this definition">#</a></dt>
<dd><p>Convert a JSON Schema into a <code class="docutils literal notranslate"><span class="pre">Property</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>JsonSchemaParam</em>) – JSON Schema to convert.</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>) – Optional name to override the <code class="docutils literal notranslate"><span class="pre">title</span></code> that might exist in the JSON Schema.</p></li>
<li><p><strong>description</strong> (<em>str</em><em> | </em><em>None</em>) – Optional description to override the <code class="docutils literal notranslate"><span class="pre">description</span></code> that might exist in the JSON Schema.</p></li>
<li><p><strong>default_value</strong> (<em>Any</em><em> | </em><em>None</em>) – Optional default_value to override the <code class="docutils literal notranslate"><span class="pre">default</span></code> that might exist in the JSON Schema</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – Potential values for a enumeration</p></li>
<li><p><strong>validate_default_type</strong> (<em>bool</em>) – Whether to ensure that any default_value has the correct type.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.Property.get_python_type_str">
<span class="sig-name descname"><span class="pre">get_python_type_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property.get_python_type_str" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.Property.get_type_str">
<span class="sig-name descname"><span class="pre">get_type_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property.get_type_str" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="wayflowcore.property.Property.has_default">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_default</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#wayflowcore.property.Property.has_default" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this property has a default value or not</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.Property.is_value_of_expected_type">
<span class="sig-name descname"><span class="pre">is_value_of_expected_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property.is_value_of_expected_type" title="Permalink to this definition">#</a></dt>
<dd><p>Check whether a value corresponds to this property’s type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Any</em>) – value for which to check the type</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.Property.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#wayflowcore.property.Property.name" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.Property.to_json_schema">
<span class="sig-name descname"><span class="pre">to_json_schema</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.Property.to_json_schema" title="Permalink to this definition">#</a></dt>
<dd><p>Convert this <code class="docutils literal notranslate"><span class="pre">Property</span></code> object into a corresponding JSON Schema</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>JsonSchemaParam</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="booleanproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.BooleanProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">BooleanProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.BooleanProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe a boolean input/output value for a component (flow or agent).
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="floatproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.FloatProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">FloatProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.FloatProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe a float input/output value for a component (flow or agent).
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">number</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="messageproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.MessageProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">MessageProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.MessageProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe a message input/output value for a component (flow or agent).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="integerproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.IntegerProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">IntegerProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.IntegerProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe an integer input/output value for a component (flow or agent).
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="stringproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.StringProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">StringProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.StringProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe a string input/output value for a component (flow or agent).
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="anyproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.AnyProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">AnyProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.AnyProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe any input/output value for a component (flow or agent).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="listproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.ListProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">ListProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_type=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.ListProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe a list input/output value for a component (flow or agent). It also contains the type
of its items.
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">array</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>item_type</strong> (<a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>wayflowcore.property.Property</em></a>) – Type of the items of the list. Defaults to <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code>.</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.ListProperty.get_type_str">
<span class="sig-name descname"><span class="pre">get_type_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.ListProperty.get_type_str" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.ListProperty.item_type">
<span class="sig-name descname"><span class="pre">item_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><span class="pre">Property</span></a></em><a class="headerlink" href="#wayflowcore.property.ListProperty.item_type" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="dictproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.DictProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">DictProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_type=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.DictProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe a dictionary input/output value for a component (flow or agent). It also contains the type
if its keys and its values.
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">object</span></code> with <code class="docutils literal notranslate"><span class="pre">additionalProperties</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>value_type</strong> (<a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>wayflowcore.property.Property</em></a>) – Type of the values of the dict. Defaults to <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code>.</p></li>
<li><p><strong>key_type</strong> (<a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>wayflowcore.property.Property</em></a>) – Type of the keys of the dict. Defaults to <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code>.</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.DictProperty.get_type_str">
<span class="sig-name descname"><span class="pre">get_type_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.DictProperty.get_type_str" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.DictProperty.key_type">
<span class="sig-name descname"><span class="pre">key_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><span class="pre">Property</span></a></em><a class="headerlink" href="#wayflowcore.property.DictProperty.key_type" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.DictProperty.value_type">
<span class="sig-name descname"><span class="pre">value_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><span class="pre">Property</span></a></em><a class="headerlink" href="#wayflowcore.property.DictProperty.value_type" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="objectproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.ObjectProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">ObjectProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value=&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.ObjectProperty" title="Permalink to this definition">#</a></dt>
<dd><p>Class to describe an object input/output value for a component (flow or agent). It contains the names of its
properties and their associated types. It supports both dictionaries with specific keys &amp; types and objects with
specific attributes &amp; types.
Its JSON type equivalent is <code class="docutils literal notranslate"><span class="pre">object</span></code> with <code class="docutils literal notranslate"><span class="pre">properties</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the property. Optional when the property is nested (e.g. <code class="docutils literal notranslate"><span class="pre">StringProperty</span></code> in a <code class="docutils literal notranslate"><span class="pre">ListProperty</span></code>)</p></li>
<li><p><strong>description</strong> (<em>str</em>) – <p>Optional description of the variable.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It can be helpful to put a description in two cases:</p>
<ul>
<li><p>to help potential users to know what this property is about, and simplify the usage of a potential <code class="docutils literal notranslate"><span class="pre">Step</span></code> using it</p></li>
<li><p>to help an LLM if it needs to generate values for this property (e.g. in <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>).</p></li>
</ul>
</div>
</p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – <p>Optional default value. By default, there is no default value (<code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code>), meaning that if a component has this property
as input, the value will need to be produced or passed before (it will appear as an input of an
<code class="docutils literal notranslate"><span class="pre">Agent</span></code>/<code class="docutils literal notranslate"><span class="pre">Flow</span></code> OR it needs to be produced by a previous <code class="docutils literal notranslate"><span class="pre">Step</span></code> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Setting a default value might be needed in several cases:</p>
<ul>
<li><p>when <strong>generating a value for a property</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code> or <code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code>), it is
possible that the LLM is not able to generate the value. In this case, the default value of the given property
type will be used, but you can specify your own <code class="docutils literal notranslate"><span class="pre">default_value</span></code>.</p></li>
<li><p>when <strong>a value might not be yet produced / not passed as input</strong> in a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> (e.g. caught exception, some other branch execution, …),
but you still want the flow to execute. Putting a default value helps ensuring that whatever happens before,
the flow can always execute properly with some defaults if needed.</p></li>
</ul>
</div>
</p></li>
<li><p><strong>properties</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>wayflowcore.property.Property</em></a><em>]</em>) – Dictionary of property names and their types. Defaults without any property.</p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.ObjectProperty.get_type_str">
<span class="sig-name descname"><span class="pre">get_type_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.ObjectProperty.get_type_str" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.ObjectProperty.properties">
<span class="sig-name descname"><span class="pre">properties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><span class="pre">Property</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.property.ObjectProperty.properties" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="unionproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.UnionProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">UnionProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value:</span> <span class="pre">Any</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum:</span> <span class="pre">Optional[Tuple[Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__:</span> <span class="pre">Dict[str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Any]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">any_of:</span> <span class="pre">List[wayflowcore.property.Property]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.UnionProperty" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em>) – </p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – </p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>any_of</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>Property</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.property.UnionProperty.any_of">
<span class="sig-name descname"><span class="pre">any_of</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><span class="pre">Property</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.property.UnionProperty.any_of" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wayflowcore.property.UnionProperty.get_type_str">
<span class="sig-name descname"><span class="pre">get_type_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.UnionProperty.get_type_str" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="nullproperty"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.property.NullProperty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.property.</span></span><span class="sig-name descname"><span class="pre">NullProperty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value:</span> <span class="pre">Any</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'wayflowcore.property._empty_default'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum:</span> <span class="pre">Optional[Tuple[Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_validate_default_type:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__metadata_info__:</span> <span class="pre">Dict[str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Any]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.property.NullProperty" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em>) – </p></li>
<li><p><strong>default_value</strong> (<em>Any</em>) – </p></li>
<li><p><strong>enum</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – </p></li>
<li><p><strong>_validate_default_type</strong> (<em>bool</em>) – </p></li>
<li><p><strong>__metadata_info__</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="other-classes-and-helpers-used-in-fixed-flows">
<h2>Other classes and helpers used in fixed flows<a class="headerlink" href="#other-classes-and-helpers-used-in-fixed-flows" title="Permalink to this heading">#</a></h2>
<span class="target" id="assistantstepresult"></span><dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.steps.step.StepResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.steps.step.</span></span><span class="sig-name descname"><span class="pre">StepResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'next'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">StepExecutionStatus.PASSTHROUGH</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.steps.step.StepResult" title="Permalink to this definition">#</a></dt>
<dd><p>Output information collected from the execution of a <code class="docutils literal notranslate"><span class="pre">Step</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Dictionary of outputs collected from the executed <code class="docutils literal notranslate"><span class="pre">Step</span></code>.</p></li>
<li><p><strong>branch_name</strong> (<em>str</em>) – Name of the control flow branch the step is taking.</p></li>
<li><p><strong>step_type</strong> (<em>wayflowcore.steps.step.StepExecutionStatus</em>) – Whether we want to be able to go back to this step (<code class="docutils literal notranslate"><span class="pre">StepExecutionStatus.YIELDING</span></code>) or simply continue with the next step (<code class="docutils literal notranslate"><span class="pre">StepExecutionStatus.PASSTHROUGH</span></code>).</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.step.StepResult.branch_name">
<span class="sig-name descname"><span class="pre">branch_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'next'</span></em><a class="headerlink" href="#wayflowcore.steps.step.StepResult.branch_name" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.step.StepResult.outputs">
<span class="sig-name descname"><span class="pre">outputs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#wayflowcore.steps.step.StepResult.outputs" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wayflowcore.steps.step.StepResult.step_type">
<span class="sig-name descname"><span class="pre">step_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">StepExecutionStatus</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PASSTHROUGH'</span></em><a class="headerlink" href="#wayflowcore.steps.step.StepResult.step_type" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.flowhelpers.run_step_and_return_outputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.flowhelpers.</span></span><span class="sig-name descname"><span class="pre">run_step_and_return_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flowhelpers.run_step_and_return_outputs" title="Permalink to this definition">#</a></dt>
<dd><p>Helper function to run a step with some inputs and return the outputs of the step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>wayflowcore.steps.step.Step</em></a>) – Step to run</p></li>
<li><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Inputs for the step. Need to contain all expected inputs of the step. Their names and types
can be checked using <code class="docutils literal notranslate"><span class="pre">step.input_descriptors</span></code>.</p></li>
<li><p><strong>messages</strong> (<em>List</em><em>[</em><a class="reference internal" href="conversation.html#wayflowcore.messagelist.Message" title="wayflowcore.messagelist.Message"><em>wayflowcore.messagelist.Message</em></a><em>] </em><em>| </em><em>None</em>) – List of previous messages</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptExecutionStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_step_and_return_outputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;What is the capital of {{country}}?&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outputs</span> <span class="o">=</span> <span class="n">run_step_and_return_outputs</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;Switzerland&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {&quot;output&quot;: &quot;the capital of Switzerland is Bern&quot;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.flowhelpers.run_flow_and_return_outputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.flowhelpers.</span></span><span class="sig-name descname"><span class="pre">run_flow_and_return_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flowhelpers.run_flow_and_return_outputs" title="Permalink to this definition">#</a></dt>
<dd><p>Runs a <cite>Flow</cite> until completion and returns the outputs of the flow. It should not use any <cite>ClientTool</cite> nor <cite>Agent</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flow</strong> (<a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>wayflowcore.flow.Flow</em></a>) – Flow to run</p></li>
<li><p><strong>inputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Inputs for the flow. Need to contain all expected inputs of the flow. Their names and types
can be checked using <code class="docutils literal notranslate"><span class="pre">flow.input_descriptors</span></code>.</p></li>
<li><p><strong>messages</strong> (<em>List</em><em>[</em><a class="reference internal" href="conversation.html#wayflowcore.messagelist.Message" title="wayflowcore.messagelist.Message"><em>Message</em></a><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.steps</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptExecutionStep</span><span class="p">,</span> <span class="n">BranchingStep</span><span class="p">,</span> <span class="n">OutputMessageStep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.controlconnection</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlFlowEdge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">wayflowcore.flowhelpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_flow_and_return_outputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">generation_step</span> <span class="o">=</span> <span class="n">PromptExecutionStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prompt_template</span><span class="o">=</span><span class="s2">&quot;What is the capital of {{country}}? Only answer by the name of city, and the name of the city only.&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">branching_step</span> <span class="o">=</span> <span class="n">BranchingStep</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">branch_name_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;bern&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">success_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s1">&#39;Well done, llama!&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">failure_step</span> <span class="o">=</span> <span class="n">OutputMessageStep</span><span class="p">(</span><span class="s2">&quot;That&#39;s not it...&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">begin_step</span><span class="o">=</span><span class="n">generation_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;generation&#39;</span><span class="p">:</span> <span class="n">generation_step</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;branching&#39;</span><span class="p">:</span> <span class="n">branching_step</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="n">success_step</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;failure&#39;</span><span class="p">:</span> <span class="n">failure_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="n">control_flow_edges</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">generation_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">success_step</span><span class="p">,</span> <span class="n">source_branch</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">branching_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="n">failure_step</span><span class="p">,</span> <span class="n">source_branch</span><span class="o">=</span><span class="n">branching_step</span><span class="o">.</span><span class="n">BRANCH_DEFAULT</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">success_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ControlFlowEdge</span><span class="p">(</span><span class="n">source_step</span><span class="o">=</span><span class="n">failure_step</span><span class="p">,</span> <span class="n">destination_step</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outputs</span> <span class="o">=</span> <span class="n">run_flow_and_return_outputs</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;Switzerland&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wayflowcore.flowhelpers.create_single_step_flow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wayflowcore.flowhelpers.</span></span><span class="sig-name descname"><span class="pre">create_single_step_flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'single_step'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_providers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_flow_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow_description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wayflowcore.flowhelpers.create_single_step_flow" title="Permalink to this definition">#</a></dt>
<dd><p>Create a flow that consist of one step only</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step</strong> (<a class="reference internal" href="#wayflowcore.steps.step.Step" title="wayflowcore.steps.step.Step"><em>wayflowcore.steps.step.Step</em></a>) – the step that this flow should consist of</p></li>
<li><p><strong>step_name</strong> (<em>str</em>) – the name of the single step</p></li>
<li><p><strong>context_providers</strong> (<em>Dict</em><em>[</em><a class="reference internal" href="#wayflowcore.property.Property" title="wayflowcore.property.Property"><em>wayflowcore.property.Property</em></a><em>, </em><em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="conversation.html#wayflowcore.conversation.Conversation" title="wayflowcore.conversation.Conversation"><em>wayflowcore.conversation.Conversation</em></a><em>]</em><em>, </em><em>Any</em><em>]</em><em>] </em><em>| </em><em>List</em><em>[</em><a class="reference internal" href="contextproviders.html#wayflowcore.contextproviders.contextprovider.ContextProvider" title="wayflowcore.contextproviders.contextprovider.ContextProvider"><em>wayflowcore.contextproviders.contextprovider.ContextProvider</em></a><em>] </em><em>| </em><em>None</em>) – context providers that should be available to the assistant</p></li>
<li><p><strong>data_flow_edges</strong> (<em>List</em><em>[</em><a class="reference internal" href="#wayflowcore.dataconnection.DataFlowEdge" title="wayflowcore.dataconnection.DataFlowEdge"><em>wayflowcore.dataconnection.DataFlowEdge</em></a><em>] </em><em>| </em><em>None</em>) – list of data flow edges</p></li>
<li><p><strong>variables</strong> (<em>List</em><em>[</em><a class="reference internal" href="variables.html#wayflowcore.variable.Variable" title="wayflowcore.variable.Variable"><em>wayflowcore.variable.Variable</em></a><em>] </em><em>| </em><em>None</em>) – list of variables of the flow</p></li>
<li><p><strong>flow_name</strong> (<em>str</em><em> | </em><em>None</em>) – optional name of the flow</p></li>
<li><p><strong>flow_description</strong> (<em>str</em>) – optional description of the flow</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#wayflowcore.flow.Flow" title="wayflowcore.flow.Flow"><em>Flow</em></a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#flows-steps">Flows &amp; Steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow"><code class="docutils literal notranslate"><span class="pre">Flow</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.add_context_providers"><code class="docutils literal notranslate"><span class="pre">Flow.add_context_providers()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.as_client_tool"><code class="docutils literal notranslate"><span class="pre">Flow.as_client_tool()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.as_server_tool"><code class="docutils literal notranslate"><span class="pre">Flow.as_server_tool()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.clone"><code class="docutils literal notranslate"><span class="pre">Flow.clone()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.flow_id"><code class="docutils literal notranslate"><span class="pre">Flow.flow_id</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.from_steps"><code class="docutils literal notranslate"><span class="pre">Flow.from_steps()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.llms"><code class="docutils literal notranslate"><span class="pre">Flow.llms</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.might_yield"><code class="docutils literal notranslate"><span class="pre">Flow.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flow.Flow.start_conversation"><code class="docutils literal notranslate"><span class="pre">Flow.start_conversation()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step"><code class="docutils literal notranslate"><span class="pre">Step</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.BRANCH_NEXT"><code class="docutils literal notranslate"><span class="pre">Step.BRANCH_NEXT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.BRANCH_SELF"><code class="docutils literal notranslate"><span class="pre">Step.BRANCH_SELF</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.get_branches"><code class="docutils literal notranslate"><span class="pre">Step.get_branches()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.get_static_configuration_descriptors"><code class="docutils literal notranslate"><span class="pre">Step.get_static_configuration_descriptors()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.invoke"><code class="docutils literal notranslate"><span class="pre">Step.invoke()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.invoke_async"><code class="docutils literal notranslate"><span class="pre">Step.invoke_async()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.llms"><code class="docutils literal notranslate"><span class="pre">Step.llms</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.might_yield"><code class="docutils literal notranslate"><span class="pre">Step.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.remap_inputs"><code class="docutils literal notranslate"><span class="pre">Step.remap_inputs()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.remap_outputs"><code class="docutils literal notranslate"><span class="pre">Step.remap_outputs()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.sub_flow"><code class="docutils literal notranslate"><span class="pre">Step.sub_flow()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.Step.supports_dict_io_with_non_str_keys"><code class="docutils literal notranslate"><span class="pre">Step.supports_dict_io_with_non_str_keys</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.dataconnection.DataFlowEdge"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.dataconnection.DataFlowEdge.destination_input"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.destination_input</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.dataconnection.DataFlowEdge.destination_step"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.destination_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.dataconnection.DataFlowEdge.source_output"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.source_output</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.dataconnection.DataFlowEdge.source_step"><code class="docutils literal notranslate"><span class="pre">DataFlowEdge.source_step</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.controlconnection.ControlFlowEdge"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.controlconnection.ControlFlowEdge.destination_step"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge.destination_step</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.controlconnection.ControlFlowEdge.source_branch"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge.source_branch</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.controlconnection.ControlFlowEdge.source_step"><code class="docutils literal notranslate"><span class="pre">ControlFlowEdge.source_step</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-steps">Task steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep"><code class="docutils literal notranslate"><span class="pre">AgentExecutionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">AgentExecutionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep.might_yield"><code class="docutils literal notranslate"><span class="pre">AgentExecutionStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.agentexecutionstep.AgentExecutionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">AgentExecutionStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep"><code class="docutils literal notranslate"><span class="pre">PromptExecutionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.JSON_CONSTRAINED_GENERATION_PROMPT"><code class="docutils literal notranslate"><span class="pre">PromptExecutionStep.JSON_CONSTRAINED_GENERATION_PROMPT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.OUTPUT"><code class="docutils literal notranslate"><span class="pre">PromptExecutionStep.OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">PromptExecutionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.promptexecutionstep.PromptExecutionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">PromptExecutionStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep"><code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.OUTPUT"><code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep.OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.format_template"><code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep.format_template()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.templaterenderingstep.TemplateRenderingStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">TemplateRenderingStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.TOOL_OUTPUT"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.TOOL_OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.TOOL_REQUEST_UUID"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.TOOL_REQUEST_UUID</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.might_yield"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.output_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.toolexecutionstep.ToolExecutionStep.supports_dict_io_with_non_str_keys"><code class="docutils literal notranslate"><span class="pre">ToolExecutionStep.supports_dict_io_with_non_str_keys</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep"><code class="docutils literal notranslate"><span class="pre">ExtractValueFromJsonStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.TEXT"><code class="docutils literal notranslate"><span class="pre">ExtractValueFromJsonStep.TEXT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">ExtractValueFromJsonStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.extractvaluefromjsonstep.ExtractValueFromJsonStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">ExtractValueFromJsonStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep"><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.OUTPUT"><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.TEXT"><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.TEXT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.textextractionstep.regexextractionstep.RegexExtractionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">RegexExtractionStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#datastore-tasks">Datastore tasks</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreListStep"><code class="docutils literal notranslate"><span class="pre">DatastoreListStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreListStep.ENTITIES"><code class="docutils literal notranslate"><span class="pre">DatastoreListStep.ENTITIES</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreListStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreListStep.input_mapping</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreListStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreListStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep"><code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.CREATED_ENTITY"><code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.CREATED_ENTITY</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.ENTITY"><code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.ENTITY</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.input_mapping</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreCreateStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreCreateStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep"><code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.ENTITIES"><code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep.ENTITIES</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.UPDATE"><code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep.UPDATE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep.input_mapping</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreUpdateStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreUpdateStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreDeleteStep"><code class="docutils literal notranslate"><span class="pre">DatastoreDeleteStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreDeleteStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreDeleteStep.input_mapping</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreDeleteStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreDeleteStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep"><code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep.RESULT"><code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep.RESULT</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep.input_mapping</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.datastoresteps.DatastoreQueryStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">DatastoreQueryStep.output_mapping</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#io-steps">IO steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.inputmessagestep.InputMessageStep"><code class="docutils literal notranslate"><span class="pre">InputMessageStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.USER_PROVIDED_INPUT"><code class="docutils literal notranslate"><span class="pre">InputMessageStep.USER_PROVIDED_INPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">InputMessageStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.might_yield"><code class="docutils literal notranslate"><span class="pre">InputMessageStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.inputmessagestep.InputMessageStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">InputMessageStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep"><code class="docutils literal notranslate"><span class="pre">OutputMessageStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep.OUTPUT"><code class="docutils literal notranslate"><span class="pre">OutputMessageStep.OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">OutputMessageStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.outputmessagestep.OutputMessageStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">OutputMessageStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep"><code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.CHAT_HISTORY"><code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep.CHAT_HISTORY</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.DEFAULT_OUTPUT_TEMPLATE"><code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep.DEFAULT_OUTPUT_TEMPLATE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.getchathistorystep.GetChatHistoryStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">GetChatHistoryStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep"><code class="docutils literal notranslate"><span class="pre">VariableReadStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.VALUE"><code class="docutils literal notranslate"><span class="pre">VariableReadStep.VALUE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">VariableReadStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablereadstep.VariableReadStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">VariableReadStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep"><code class="docutils literal notranslate"><span class="pre">VariableWriteStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.VALUE"><code class="docutils literal notranslate"><span class="pre">VariableWriteStep.VALUE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">VariableWriteStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.variablesteps.variablewritestep.VariableWriteStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">VariableWriteStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.ConstantValuesStep"><code class="docutils literal notranslate"><span class="pre">ConstantValuesStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.ConstantValuesStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">ConstantValuesStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.ConstantValuesStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">ConstantValuesStep.output_mapping</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#flow-steps">Flow steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep"><code class="docutils literal notranslate"><span class="pre">RetryStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.BRANCH_FAILURE"><code class="docutils literal notranslate"><span class="pre">RetryStep.BRANCH_FAILURE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.MAX_RETRY"><code class="docutils literal notranslate"><span class="pre">RetryStep.MAX_RETRY</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.NUM_RETRIES_VAR"><code class="docutils literal notranslate"><span class="pre">RetryStep.NUM_RETRIES_VAR</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.SUCCESS_VAR"><code class="docutils literal notranslate"><span class="pre">RetryStep.SUCCESS_VAR</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">RetryStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.might_yield"><code class="docutils literal notranslate"><span class="pre">RetryStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">RetryStep.output_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.retrystep.RetryStep.sub_flow"><code class="docutils literal notranslate"><span class="pre">RetryStep.sub_flow()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.DEFAULT_EXCEPTION_BRANCH"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.DEFAULT_EXCEPTION_BRANCH</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.EXCEPTION_NAME_OUTPUT_NAME"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.EXCEPTION_NAME_OUTPUT_NAME</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.EXCEPTION_PAYLOAD_OUTPUT_NAME"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.EXCEPTION_PAYLOAD_OUTPUT_NAME</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.might_yield"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.output_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.catchexceptionstep.CatchExceptionStep.sub_flow"><code class="docutils literal notranslate"><span class="pre">CatchExceptionStep.sub_flow()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep"><code class="docutils literal notranslate"><span class="pre">FlowExecutionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">FlowExecutionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.might_yield"><code class="docutils literal notranslate"><span class="pre">FlowExecutionStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">FlowExecutionStep.output_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.flowexecutionstep.FlowExecutionStep.sub_flow"><code class="docutils literal notranslate"><span class="pre">FlowExecutionStep.sub_flow()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.mapstep.MapStep"><code class="docutils literal notranslate"><span class="pre">MapStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.mapstep.MapStep.ITERATED_INPUT"><code class="docutils literal notranslate"><span class="pre">MapStep.ITERATED_INPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.mapstep.MapStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">MapStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.mapstep.MapStep.might_yield"><code class="docutils literal notranslate"><span class="pre">MapStep.might_yield</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.mapstep.MapStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">MapStep.output_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.mapstep.MapStep.sub_flow"><code class="docutils literal notranslate"><span class="pre">MapStep.sub_flow()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.branchingstep.BranchingStep"><code class="docutils literal notranslate"><span class="pre">BranchingStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.branchingstep.BranchingStep.BRANCH_DEFAULT"><code class="docutils literal notranslate"><span class="pre">BranchingStep.BRANCH_DEFAULT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.branchingstep.BranchingStep.NEXT_BRANCH_NAME"><code class="docutils literal notranslate"><span class="pre">BranchingStep.NEXT_BRANCH_NAME</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.branchingstep.BranchingStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">BranchingStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.branchingstep.BranchingStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">BranchingStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.BRANCH_DEFAULT"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.BRANCH_DEFAULT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.DEFAULT_CHOICE_SELECTION_TEMPLATE"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.DEFAULT_CHOICE_SELECTION_TEMPLATE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.INPUT"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.INPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.LLM_OUTPUT"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.LLM_OUTPUT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.SELECTED_CHOICE"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.SELECTED_CHOICE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.output_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.choiceselectionstep.ChoiceSelectionStep.sub_flow"><code class="docutils literal notranslate"><span class="pre">ChoiceSelectionStep.sub_flow()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.completestep.CompleteStep"><code class="docutils literal notranslate"><span class="pre">CompleteStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.completestep.CompleteStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">CompleteStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.completestep.CompleteStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">CompleteStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.startstep.StartStep"><code class="docutils literal notranslate"><span class="pre">StartStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.startstep.StartStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">StartStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.startstep.StartStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">StartStep.output_mapping</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.apicallstep.ApiCallStep"><code class="docutils literal notranslate"><span class="pre">ApiCallStep</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.apicallstep.ApiCallStep.HTTP_RESPONSE"><code class="docutils literal notranslate"><span class="pre">ApiCallStep.HTTP_RESPONSE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.apicallstep.ApiCallStep.HTTP_STATUS_CODE"><code class="docutils literal notranslate"><span class="pre">ApiCallStep.HTTP_STATUS_CODE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.apicallstep.ApiCallStep.input_mapping"><code class="docutils literal notranslate"><span class="pre">ApiCallStep.input_mapping</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.apicallstep.ApiCallStep.output_mapping"><code class="docutils literal notranslate"><span class="pre">ApiCallStep.output_mapping</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#classes-for-the-io-system-properties">Classes for the IO system properties</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property"><code class="docutils literal notranslate"><span class="pre">Property</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.copy"><code class="docutils literal notranslate"><span class="pre">Property.copy()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.default_value"><code class="docutils literal notranslate"><span class="pre">Property.default_value</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.description"><code class="docutils literal notranslate"><span class="pre">Property.description</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.empty_default"><code class="docutils literal notranslate"><span class="pre">Property.empty_default</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.enum"><code class="docutils literal notranslate"><span class="pre">Property.enum</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.from_json_schema"><code class="docutils literal notranslate"><span class="pre">Property.from_json_schema()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.get_python_type_str"><code class="docutils literal notranslate"><span class="pre">Property.get_python_type_str()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.get_type_str"><code class="docutils literal notranslate"><span class="pre">Property.get_type_str()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.has_default"><code class="docutils literal notranslate"><span class="pre">Property.has_default</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.is_value_of_expected_type"><code class="docutils literal notranslate"><span class="pre">Property.is_value_of_expected_type()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.name"><code class="docutils literal notranslate"><span class="pre">Property.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.Property.to_json_schema"><code class="docutils literal notranslate"><span class="pre">Property.to_json_schema()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.BooleanProperty"><code class="docutils literal notranslate"><span class="pre">BooleanProperty</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.FloatProperty"><code class="docutils literal notranslate"><span class="pre">FloatProperty</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.MessageProperty"><code class="docutils literal notranslate"><span class="pre">MessageProperty</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.IntegerProperty"><code class="docutils literal notranslate"><span class="pre">IntegerProperty</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.StringProperty"><code class="docutils literal notranslate"><span class="pre">StringProperty</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.AnyProperty"><code class="docutils literal notranslate"><span class="pre">AnyProperty</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.ListProperty"><code class="docutils literal notranslate"><span class="pre">ListProperty</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.ListProperty.get_type_str"><code class="docutils literal notranslate"><span class="pre">ListProperty.get_type_str()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.ListProperty.item_type"><code class="docutils literal notranslate"><span class="pre">ListProperty.item_type</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.DictProperty"><code class="docutils literal notranslate"><span class="pre">DictProperty</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.DictProperty.get_type_str"><code class="docutils literal notranslate"><span class="pre">DictProperty.get_type_str()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.DictProperty.key_type"><code class="docutils literal notranslate"><span class="pre">DictProperty.key_type</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.DictProperty.value_type"><code class="docutils literal notranslate"><span class="pre">DictProperty.value_type</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.ObjectProperty"><code class="docutils literal notranslate"><span class="pre">ObjectProperty</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.ObjectProperty.get_type_str"><code class="docutils literal notranslate"><span class="pre">ObjectProperty.get_type_str()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.ObjectProperty.properties"><code class="docutils literal notranslate"><span class="pre">ObjectProperty.properties</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.UnionProperty"><code class="docutils literal notranslate"><span class="pre">UnionProperty</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.UnionProperty.any_of"><code class="docutils literal notranslate"><span class="pre">UnionProperty.any_of</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.UnionProperty.get_type_str"><code class="docutils literal notranslate"><span class="pre">UnionProperty.get_type_str()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.property.NullProperty"><code class="docutils literal notranslate"><span class="pre">NullProperty</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-classes-and-helpers-used-in-fixed-flows">Other classes and helpers used in fixed flows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.StepResult"><code class="docutils literal notranslate"><span class="pre">StepResult</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.StepResult.branch_name"><code class="docutils literal notranslate"><span class="pre">StepResult.branch_name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.StepResult.outputs"><code class="docutils literal notranslate"><span class="pre">StepResult.outputs</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.steps.step.StepResult.step_type"><code class="docutils literal notranslate"><span class="pre">StepResult.step_type</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flowhelpers.run_step_and_return_outputs"><code class="docutils literal notranslate"><span class="pre">run_step_and_return_outputs</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flowhelpers.run_flow_and_return_outputs"><code class="docutils literal notranslate"><span class="pre">run_flow_and_return_outputs</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wayflowcore.flowhelpers.create_single_step_flow"><code class="docutils literal notranslate"><span class="pre">create_single_step_flow</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Oracle and/or its affiliates..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>