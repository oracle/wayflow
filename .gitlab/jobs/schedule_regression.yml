schedule_regression:
  stage: trigger
  when: manual
  variables:
    llmCodeGenSubmodule:
      value: "all"
    dryRunSubmodule:
      value: "same"
  script:
    - !reference [ .get_private_branch, script ]
    - |
      curl -X POST "${JENKINS_URL}/job/Regression/job/regression/buildWithParameters" \
      --user "$JENKINS_BOT_AUTH" \
      --data-urlencode "BRANCH=$PRIVATE_BRANCH" \
      --data-urlencode "PUBLIC_BRANCH=$CI_COMMIT_REF_NAME" \
      --data-urlencode "PUBLIC_COMMIT=$CI_COMMIT_SHA" \
      --data-urlencode "PR_SOURCE_PROJECT=$CI_PROJECT_NAMESPACE" \
      --data-urlencode "PR_SOURCE_REPOSITORY=$CI_PROJECT_NAME" \
      --data-urlencode "EMAIL=$GITLAB_USER_EMAIL" \
      --data-urlencode "llmCodeGenSubmodule=$llmCodeGenSubmodule" \
      --data-urlencode "USE_${REPOSITORY_HOST}=true" \
      --data-urlencode "${REPOSITORY_HOST}_PIPELINE_ID=$CI_PIPELINE_ID"
    - sleep 50
